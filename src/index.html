<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Network Mock Panel</title>
  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(r){const e=Object.create(null);for(const n of r.split(","))e[n]=1;return n=>n in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),isModelListener=r=>r.startsWith("onUpdate:"),extend=Object.assign,remove$1=(r,e)=>{const n=r.indexOf(e);n>-1&&r.splice(n,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(r,e)=>hasOwnProperty$1.call(r,e),isArray=Array.isArray,isMap=r=>toTypeString(r)==="[object Map]",isSet=r=>toTypeString(r)==="[object Set]",isDate=r=>toTypeString(r)==="[object Date]",isFunction=r=>typeof r=="function",isString=r=>typeof r=="string",isSymbol=r=>typeof r=="symbol",isObject=r=>r!==null&&typeof r=="object",isPromise=r=>(isObject(r)||isFunction(r))&&isFunction(r.then)&&isFunction(r.catch),objectToString=Object.prototype.toString,toTypeString=r=>objectToString.call(r),toRawType=r=>toTypeString(r).slice(8,-1),isPlainObject=r=>toTypeString(r)==="[object Object]",isIntegerKey=r=>isString(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=r=>{const e=Object.create(null);return n=>e[n]||(e[n]=r(n))},camelizeRE=/-\w/g,camelize=cacheStringFunction(r=>r.replace(camelizeRE,e=>e.slice(1).toUpperCase())),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(r=>r.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(r=>r.charAt(0).toUpperCase()+r.slice(1)),toHandlerKey=cacheStringFunction(r=>r?`on${capitalize(r)}`:""),hasChanged=(r,e)=>!Object.is(r,e),invokeArrayFns=(r,...e)=>{for(let n=0;n<r.length;n++)r[n](...e)},def=(r,e,n,s=!1)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,writable:s,value:n})},looseToNumber=r=>{const e=parseFloat(r);return isNaN(e)?r:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(r){if(isArray(r)){const e={};for(let n=0;n<r.length;n++){const s=r[n],o=isString(s)?parseStringStyle(s):normalizeStyle(s);if(o)for(const l in o)e[l]=o[l]}return e}else if(isString(r)||isObject(r))return r}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(r){const e={};return r.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const s=n.split(propertyDelimiterRE);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function normalizeClass(r){let e="";if(isString(r))e=r;else if(isArray(r))for(let n=0;n<r.length;n++){const s=normalizeClass(r[n]);s&&(e+=s+" ")}else if(isObject(r))for(const n in r)r[n]&&(e+=n+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(r){return!!r||r===""}function looseCompareArrays(r,e){if(r.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<r.length;s++)n=looseEqual(r[s],e[s]);return n}function looseEqual(r,e){if(r===e)return!0;let n=isDate(r),s=isDate(e);if(n||s)return n&&s?r.getTime()===e.getTime():!1;if(n=isSymbol(r),s=isSymbol(e),n||s)return r===e;if(n=isArray(r),s=isArray(e),n||s)return n&&s?looseCompareArrays(r,e):!1;if(n=isObject(r),s=isObject(e),n||s){if(!n||!s)return!1;const o=Object.keys(r).length,l=Object.keys(e).length;if(o!==l)return!1;for(const a in r){const c=r.hasOwnProperty(a),u=e.hasOwnProperty(a);if(c&&!u||!c&&u||!looseEqual(r[a],e[a]))return!1}}return String(r)===String(e)}function looseIndexOf(r,e){return r.findIndex(n=>looseEqual(n,e))}const isRef$1=r=>!!(r&&r.__v_isRef===!0),toDisplayString=r=>isString(r)?r:r==null?"":isArray(r)||isObject(r)&&(r.toString===objectToString||!isFunction(r.toString))?isRef$1(r)?toDisplayString(r.value):JSON.stringify(r,replacer,2):String(r),replacer=(r,e)=>isRef$1(e)?replacer(r,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,o],l)=>(n[stringifySymbol(s,l)+" =>"]=o,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>stringifySymbol(n))}:isSymbol(e)?stringifySymbol(e):isObject(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e,stringifySymbol=(r,e="")=>{var n;return isSymbol(r)?`Symbol(${(n=r.description)!=null?n:e})`:r};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,n=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(r,e=!1){if(r.flags|=8,e){r.next=batchedComputed,batchedComputed=r;return}r.next=batchedSub,batchedSub=r}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let r;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){r||(r=s)}e=n}}if(r)throw r}function prepareDeps(r){for(let e=r.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(r){let e,n=r.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),removeSub(s),removeDep(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}r.deps=e,r.depsTail=n}function isDirty(r){for(let e=r.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!r._dirty}function refreshComputed(r){if(r.flags&4&&!(r.flags&16)||(r.flags&=-17,r.globalVersion===globalVersion)||(r.globalVersion=globalVersion,!r.isSSR&&r.flags&128&&(!r.deps&&!r._dirty||!isDirty(r))))return;r.flags|=2;const e=r.dep,n=activeSub,s=shouldTrack;activeSub=r,shouldTrack=!0;try{prepareDeps(r);const o=r.fn(r._value);(e.version===0||hasChanged(o,r._value))&&(r.flags|=128,r._value=o,e.version++)}catch(o){throw e.version++,o}finally{activeSub=n,shouldTrack=s,cleanupDeps(r),r.flags&=-3}}function removeSub(r,e=!1){const{dep:n,prevSub:s,nextSub:o}=r;if(s&&(s.nextSub=o,r.prevSub=void 0),o&&(o.prevSub=s,r.nextSub=void 0),n.subs===r&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)removeSub(l,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function removeDep(r){const{prevDep:e,nextDep:n}=r;e&&(e.nextDep=n,r.prevDep=void 0),n&&(n.prevDep=e,r.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const r=trackStack.pop();shouldTrack=r===void 0?!0:r}function cleanupEffect(r){const{cleanup:e}=r;if(r.cleanup=void 0,e){const n=activeSub;activeSub=void 0;try{e()}finally{activeSub=n}}}let globalVersion=0;class Link{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==activeSub)n=this.activeLink=new Link(activeSub,this),activeSub.deps?(n.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=n,activeSub.depsTail=n):activeSub.deps=activeSub.depsTail=n,addSub(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=activeSub.depsTail,n.nextDep=void 0,activeSub.depsTail.nextDep=n,activeSub.depsTail=n,activeSub.deps===n&&(activeSub.deps=s)}return n}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{endBatch()}}}function addSub(r){if(r.dep.sc++,r.sub.flags&4){const e=r.dep.computed;if(e&&!r.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)addSub(s)}const n=r.dep.subs;n!==r&&(r.prevSub=n,n&&(n.nextSub=r)),r.dep.subs=r}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(r,e,n){if(shouldTrack&&activeSub){let s=targetMap.get(r);s||targetMap.set(r,s=new Map);let o=s.get(n);o||(s.set(n,o=new Dep),o.map=s,o.key=n),o.track()}}function trigger(r,e,n,s,o,l){const a=targetMap.get(r);if(!a){globalVersion++;return}const c=u=>{u&&u.trigger()};if(startBatch(),e==="clear")a.forEach(c);else{const u=isArray(r),f=u&&isIntegerKey(n);if(u&&n==="length"){const d=Number(s);a.forEach((g,m)=>{(m==="length"||m===ARRAY_ITERATE_KEY||!isSymbol(m)&&m>=d)&&c(g)})}else switch((n!==void 0||a.has(void 0))&&c(a.get(n)),f&&c(a.get(ARRAY_ITERATE_KEY)),e){case"add":u?f&&c(a.get("length")):(c(a.get(ITERATE_KEY)),isMap(r)&&c(a.get(MAP_KEY_ITERATE_KEY)));break;case"delete":u||(c(a.get(ITERATE_KEY)),isMap(r)&&c(a.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(r)&&c(a.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(r){const e=toRaw(r);return e===r?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(r)?e:e.map(toReactive))}function shallowReadArray(r){return track(r=toRaw(r),"iterate",ARRAY_ITERATE_KEY),r}function toWrapped(r,e){return isReadonly(r)?isReactive(r)?toReadonly(toReactive(e)):toReadonly(e):toReactive(e)}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,r=>toWrapped(this,r))},concat(...r){return reactiveReadArray(this).concat(...r.map(e=>isArray(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",r=>(r[1]=toWrapped(this,r[1]),r))},every(r,e){return apply(this,"every",r,e,void 0,arguments)},filter(r,e){return apply(this,"filter",r,e,n=>n.map(s=>toWrapped(this,s)),arguments)},find(r,e){return apply(this,"find",r,e,n=>toWrapped(this,n),arguments)},findIndex(r,e){return apply(this,"findIndex",r,e,void 0,arguments)},findLast(r,e){return apply(this,"findLast",r,e,n=>toWrapped(this,n),arguments)},findLastIndex(r,e){return apply(this,"findLastIndex",r,e,void 0,arguments)},forEach(r,e){return apply(this,"forEach",r,e,void 0,arguments)},includes(...r){return searchProxy(this,"includes",r)},indexOf(...r){return searchProxy(this,"indexOf",r)},join(r){return reactiveReadArray(this).join(r)},lastIndexOf(...r){return searchProxy(this,"lastIndexOf",r)},map(r,e){return apply(this,"map",r,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...r){return noTracking(this,"push",r)},reduce(r,...e){return reduce(this,"reduce",r,e)},reduceRight(r,...e){return reduce(this,"reduceRight",r,e)},shift(){return noTracking(this,"shift")},some(r,e){return apply(this,"some",r,e,void 0,arguments)},splice(...r){return noTracking(this,"splice",r)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(r){return reactiveReadArray(this).toSorted(r)},toSpliced(...r){return reactiveReadArray(this).toSpliced(...r)},unshift(...r){return noTracking(this,"unshift",r)},values(){return iterator(this,"values",r=>toWrapped(this,r))}};function iterator(r,e,n){const s=shallowReadArray(r),o=s[e]();return s!==r&&!isShallow(r)&&(o._next=o.next,o.next=()=>{const l=o._next();return l.done||(l.value=n(l.value)),l}),o}const arrayProto=Array.prototype;function apply(r,e,n,s,o,l){const a=shallowReadArray(r),c=a!==r&&!isShallow(r),u=a[e];if(u!==arrayProto[e]){const g=u.apply(r,l);return c?toReactive(g):g}let f=n;a!==r&&(c?f=function(g,m){return n.call(this,toWrapped(r,g),m,r)}:n.length>2&&(f=function(g,m){return n.call(this,g,m,r)}));const d=u.call(a,f,s);return c&&o?o(d):d}function reduce(r,e,n,s){const o=shallowReadArray(r);let l=n;return o!==r&&(isShallow(r)?n.length>3&&(l=function(a,c,u){return n.call(this,a,c,u,r)}):l=function(a,c,u){return n.call(this,a,toWrapped(r,c),u,r)}),o[e](l,...s)}function searchProxy(r,e,n){const s=toRaw(r);track(s,"iterate",ARRAY_ITERATE_KEY);const o=s[e](...n);return(o===-1||o===!1)&&isProxy(n[0])?(n[0]=toRaw(n[0]),s[e](...n)):o}function noTracking(r,e,n=[]){pauseTracking(),startBatch();const s=toRaw(r)[e].apply(r,n);return endBatch(),resetTracking(),s}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(isSymbol));function hasOwnProperty(r){isSymbol(r)||(r=String(r));const e=toRaw(this);return track(e,"has",r),e.hasOwnProperty(r)}class BaseReactiveHandler{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const o=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return l;if(n==="__v_raw")return s===(o?l?shallowReadonlyMap:readonlyMap:l?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const a=isArray(e);if(!o){let u;if(a&&(u=arrayInstrumentations[n]))return u;if(n==="hasOwnProperty")return hasOwnProperty}const c=Reflect.get(e,n,isRef(e)?e:s);if((isSymbol(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(o||track(e,"get",n),l))return c;if(isRef(c)){const u=a&&isIntegerKey(n)?c:c.value;return o&&isObject(u)?readonly(u):u}return isObject(c)?o?readonly(c):reactive(c):c}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,n,s,o){let l=e[n];const a=isArray(e)&&isIntegerKey(n);if(!this._isShallow){const f=isReadonly(l);if(!isShallow(s)&&!isReadonly(s)&&(l=toRaw(l),s=toRaw(s)),!a&&isRef(l)&&!isRef(s))return f||(l.value=s),!0}const c=a?Number(n)<e.length:hasOwn(e,n),u=Reflect.set(e,n,s,isRef(e)?e:o);return e===toRaw(o)&&(c?hasChanged(s,l)&&trigger(e,"set",n,s):trigger(e,"add",n,s)),u}deleteProperty(e,n){const s=hasOwn(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&s&&trigger(e,"delete",n,void 0),o}has(e,n){const s=Reflect.has(e,n);return(!isSymbol(n)||!builtInSymbols.has(n))&&track(e,"has",n),s}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=r=>r,getProto=r=>Reflect.getPrototypeOf(r);function createIterableMethod(r,e,n){return function(...s){const o=this.__v_raw,l=toRaw(o),a=isMap(l),c=r==="entries"||r===Symbol.iterator&&a,u=r==="keys"&&a,f=o[r](...s),d=n?toShallow:e?toReadonly:toReactive;return!e&&track(l,"iterate",u?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:g,done:m}=f.next();return m?{value:g,done:m}:{value:c?[d(g[0]),d(g[1])]:d(g),done:m}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(r){return function(...e){return r==="delete"?!1:r==="clear"?void 0:this}}function createInstrumentations(r,e){const n={get(o){const l=this.__v_raw,a=toRaw(l),c=toRaw(o);r||(hasChanged(o,c)&&track(a,"get",o),track(a,"get",c));const{has:u}=getProto(a),f=e?toShallow:r?toReadonly:toReactive;if(u.call(a,o))return f(l.get(o));if(u.call(a,c))return f(l.get(c));l!==a&&l.get(o)},get size(){const o=this.__v_raw;return!r&&track(toRaw(o),"iterate",ITERATE_KEY),o.size},has(o){const l=this.__v_raw,a=toRaw(l),c=toRaw(o);return r||(hasChanged(o,c)&&track(a,"has",o),track(a,"has",c)),o===c?l.has(o):l.has(o)||l.has(c)},forEach(o,l){const a=this,c=a.__v_raw,u=toRaw(c),f=e?toShallow:r?toReadonly:toReactive;return!r&&track(u,"iterate",ITERATE_KEY),c.forEach((d,g)=>o.call(l,f(d),f(g),a))}};return extend(n,r?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(o){!e&&!isShallow(o)&&!isReadonly(o)&&(o=toRaw(o));const l=toRaw(this);return getProto(l).has.call(l,o)||(l.add(o),trigger(l,"add",o,o)),this},set(o,l){!e&&!isShallow(l)&&!isReadonly(l)&&(l=toRaw(l));const a=toRaw(this),{has:c,get:u}=getProto(a);let f=c.call(a,o);f||(o=toRaw(o),f=c.call(a,o));const d=u.call(a,o);return a.set(o,l),f?hasChanged(l,d)&&trigger(a,"set",o,l):trigger(a,"add",o,l),this},delete(o){const l=toRaw(this),{has:a,get:c}=getProto(l);let u=a.call(l,o);u||(o=toRaw(o),u=a.call(l,o)),c&&c.call(l,o);const f=l.delete(o);return u&&trigger(l,"delete",o,void 0),f},clear(){const o=toRaw(this),l=o.size!==0,a=o.clear();return l&&trigger(o,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=createIterableMethod(o,r,e)}),n}function createInstrumentationGetter(r,e){const n=createInstrumentations(r,e);return(s,o,l)=>o==="__v_isReactive"?!r:o==="__v_isReadonly"?r:o==="__v_raw"?s:Reflect.get(hasOwn(n,o)&&o in s?n:s,o,l)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(r){return r.__v_skip||!Object.isExtensible(r)?0:targetTypeMap(toRawType(r))}function reactive(r){return isReadonly(r)?r:createReactiveObject(r,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(r){return createReactiveObject(r,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(r){return createReactiveObject(r,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(r){return createReactiveObject(r,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(r,e,n,s,o){if(!isObject(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const l=getTargetType(r);if(l===0)return r;const a=o.get(r);if(a)return a;const c=new Proxy(r,l===2?s:n);return o.set(r,c),c}function isReactive(r){return isReadonly(r)?isReactive(r.__v_raw):!!(r&&r.__v_isReactive)}function isReadonly(r){return!!(r&&r.__v_isReadonly)}function isShallow(r){return!!(r&&r.__v_isShallow)}function isProxy(r){return r?!!r.__v_raw:!1}function toRaw(r){const e=r&&r.__v_raw;return e?toRaw(e):r}function markRaw(r){return!hasOwn(r,"__v_skip")&&Object.isExtensible(r)&&def(r,"__v_skip",!0),r}const toReactive=r=>isObject(r)?reactive(r):r,toReadonly=r=>isObject(r)?readonly(r):r;function isRef(r){return r?r.__v_isRef===!0:!1}function ref(r){return createRef(r,!1)}function shallowRef(r){return createRef(r,!0)}function createRef(r,e){return isRef(r)?r:new RefImpl(r,e)}class RefImpl{constructor(e,n){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||isShallow(e)||isReadonly(e);e=s?e:toRaw(e),hasChanged(e,n)&&(this._rawValue=e,this._value=s?e:toReactive(e),this.dep.trigger())}}function unref(r){return isRef(r)?r.value:r}const shallowUnwrapHandlers={get:(r,e,n)=>e==="__v_raw"?r:unref(Reflect.get(r,e,n)),set:(r,e,n,s)=>{const o=r[e];return isRef(o)&&!isRef(n)?(o.value=n,!0):Reflect.set(r,e,n,s)}};function proxyRefs(r){return isReactive(r)?r:new Proxy(r,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Dep,{get:s,set:o}=e(n.track.bind(n),n.trigger.bind(n));this._get=s,this._set=o}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(r){return new CustomRefImpl(r)}class ComputedRefImpl{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(r,e,n=!1){let s,o;return isFunction(r)?s=r:(s=r.get,o=r.set),new ComputedRefImpl(s,o,n)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(r,e=!1,n=activeWatcher){if(n){let s=cleanupMap.get(n);s||cleanupMap.set(n,s=[]),s.push(r)}}function watch$1(r,e,n=EMPTY_OBJ){const{immediate:s,deep:o,once:l,scheduler:a,augmentJob:c,call:u}=n,f=W=>o?W:isShallow(W)||o===!1||o===0?traverse(W,1):traverse(W);let d,g,m,v,k=!1,A=!1;if(isRef(r)?(g=()=>r.value,k=isShallow(r)):isReactive(r)?(g=()=>f(r),k=!0):isArray(r)?(A=!0,k=r.some(W=>isReactive(W)||isShallow(W)),g=()=>r.map(W=>{if(isRef(W))return W.value;if(isReactive(W))return f(W);if(isFunction(W))return u?u(W,2):W()})):isFunction(r)?e?g=u?()=>u(r,2):r:g=()=>{if(m){pauseTracking();try{m()}finally{resetTracking()}}const W=activeWatcher;activeWatcher=d;try{return u?u(r,3,[v]):r(v)}finally{activeWatcher=W}}:g=NOOP,e&&o){const W=g,H=o===!0?1/0:o;g=()=>traverse(W(),H)}const E=getCurrentScope(),N=()=>{d.stop(),E&&E.active&&remove$1(E.effects,d)};if(l&&e){const W=e;e=(...H)=>{W(...H),N()}}let V=A?new Array(r.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const q=W=>{if(!(!(d.flags&1)||!d.dirty&&!W))if(e){const H=d.run();if(o||k||(A?H.some(($,L)=>hasChanged($,V[L])):hasChanged(H,V))){m&&m();const $=activeWatcher;activeWatcher=d;try{const L=[H,V===INITIAL_WATCHER_VALUE?void 0:A&&V[0]===INITIAL_WATCHER_VALUE?[]:V,v];V=H,u?u(e,3,L):e(...L)}finally{activeWatcher=$}}}else d.run()};return c&&c(q),d=new ReactiveEffect(g),d.scheduler=a?()=>a(q,!1):q,v=W=>onWatcherCleanup(W,!1,d),m=d.onStop=()=>{const W=cleanupMap.get(d);if(W){if(u)u(W,4);else for(const H of W)H();cleanupMap.delete(d)}},e?s?q(!0):V=d.run():a?a(q.bind(null,!0),!0):d.run(),N.pause=d.pause.bind(d),N.resume=d.resume.bind(d),N.stop=N,N}function traverse(r,e=1/0,n){if(e<=0||!isObject(r)||r.__v_skip||(n=n||new Map,(n.get(r)||0)>=e))return r;if(n.set(r,e),e--,isRef(r))traverse(r.value,e,n);else if(isArray(r))for(let s=0;s<r.length;s++)traverse(r[s],e,n);else if(isSet(r)||isMap(r))r.forEach(s=>{traverse(s,e,n)});else if(isPlainObject(r)){for(const s in r)traverse(r[s],e,n);for(const s of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,s)&&traverse(r[s],e,n)}return r}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(r,...e){if(isWarning)return;isWarning=!0,pauseTracking();const n=stack.length?stack[stack.length-1].component:null,s=n&&n.appContext.config.warnHandler,o=getComponentTrace();if(s)callWithErrorHandling(s,n,11,[r+e.map(l=>{var a,c;return(c=(a=l.toString)==null?void 0:a.call(l))!=null?c:JSON.stringify(l)}).join(""),n&&n.proxy,o.map(({vnode:l})=>`at <${formatComponentName(n,l.type)}>`).join(`
`),o]);else{const l=[`[Vue warn]: ${r}`,...e];o.length&&l.push(`
`,...formatTrace(o)),console.warn(...l)}resetTracking(),isWarning=!1}function getComponentTrace(){let r=stack[stack.length-1];if(!r)return[];const e=[];for(;r;){const n=e[0];n&&n.vnode===r?n.recurseCount++:e.push({vnode:r,recurseCount:0});const s=r.component&&r.component.parent;r=s&&s.vnode}return e}function formatTrace(r){const e=[];return r.forEach((n,s)=>{e.push(...s===0?[]:[`
`],...formatTraceEntry(n))}),e}function formatTraceEntry({vnode:r,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",s=r.component?r.component.parent==null:!1,o=` at <${formatComponentName(r.component,r.type,s)}`,l=">"+n;return r.props?[o,...formatProps(r.props),l]:[o+l]}function formatProps(r){const e=[],n=Object.keys(r);return n.slice(0,3).forEach(s=>{e.push(...formatProp(s,r[s]))}),n.length>3&&e.push(" ..."),e}function formatProp(r,e,n){return isString(e)?(e=JSON.stringify(e),n?e:[`${r}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${r}=${e}`]:isRef(e)?(e=formatProp(r,toRaw(e.value),!0),n?e:[`${r}=Ref<`,e,">"]):isFunction(e)?[`${r}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),n?e:[`${r}=`,e])}function callWithErrorHandling(r,e,n,s){try{return s?r(...s):r()}catch(o){handleError(o,e,n)}}function callWithAsyncErrorHandling(r,e,n,s){if(isFunction(r)){const o=callWithErrorHandling(r,e,n,s);return o&&isPromise(o)&&o.catch(l=>{handleError(l,e,n)}),o}if(isArray(r)){const o=[];for(let l=0;l<r.length;l++)o.push(callWithAsyncErrorHandling(r[l],e,n,s));return o}}function handleError(r,e,n,s=!0){const o=e?e.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||EMPTY_OBJ;if(e){let c=e.parent;const u=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const d=c.ec;if(d){for(let g=0;g<d.length;g++)if(d[g](r,u,f)===!1)return}c=c.parent}if(l){pauseTracking(),callWithErrorHandling(l,null,10,[r,u,f]),resetTracking();return}}logError(r,n,o,s,a)}function logError(r,e,n,s=!0,o=!1){if(o)throw r;console.error(r)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(r){const e=currentFlushPromise||resolvedPromise;return r?e.then(this?r.bind(this):r):e}function findInsertionIndex(r){let e=flushIndex+1,n=queue.length;for(;e<n;){const s=e+n>>>1,o=queue[s],l=getId(o);l<r||l===r&&o.flags&2?e=s+1:n=s}return e}function queueJob(r){if(!(r.flags&1)){const e=getId(r),n=queue[queue.length-1];!n||!(r.flags&2)&&e>=getId(n)?queue.push(r):queue.splice(findInsertionIndex(e),0,r),r.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(r){isArray(r)?pendingPostFlushCbs.push(...r):activePostFlushCbs&&r.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,r):r.flags&1||(pendingPostFlushCbs.push(r),r.flags|=1),queueFlush()}function flushPreFlushCbs(r,e,n=flushIndex+1){for(;n<queue.length;n++){const s=queue[n];if(s&&s.flags&2){if(r&&s.id!==r.uid)continue;queue.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function flushPostFlushCbs(r){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((n,s)=>getId(n)-getId(s));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const n=activePostFlushCbs[postFlushIndex];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=r=>r.id==null?r.flags&2?-1:1/0:r.id;function flushJobs(r){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(r){const e=currentRenderingInstance;return currentRenderingInstance=r,currentScopeId=r&&r.type.__scopeId||null,e}function withCtx(r,e=currentRenderingInstance,n){if(!e||r._n)return r;const s=(...o)=>{s._d&&setBlockTracking(-1);const l=setCurrentRenderingInstance(e);let a;try{a=r(...o)}finally{setCurrentRenderingInstance(l),s._d&&setBlockTracking(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function withDirectives(r,e){if(currentRenderingInstance===null)return r;const n=getComponentPublicInstance(currentRenderingInstance),s=r.dirs||(r.dirs=[]);for(let o=0;o<e.length;o++){let[l,a,c,u=EMPTY_OBJ]=e[o];l&&(isFunction(l)&&(l={mounted:l,updated:l}),l.deep&&traverse(a),s.push({dir:l,instance:n,value:a,oldValue:void 0,arg:c,modifiers:u}))}return r}function invokeDirectiveHook(r,e,n,s){const o=r.dirs,l=e&&e.dirs;for(let a=0;a<o.length;a++){const c=o[a];l&&(c.oldValue=l[a].value);let u=c.dir[s];u&&(pauseTracking(),callWithAsyncErrorHandling(u,n,8,[r.el,c,r,e]),resetTracking())}}function provide(r,e){if(currentInstance){let n=currentInstance.provides;const s=currentInstance.parent&&currentInstance.parent.provides;s===n&&(n=currentInstance.provides=Object.create(s)),n[r]=e}}function inject(r,e,n=!1){const s=getCurrentInstance();if(s||currentApp){let o=currentApp?currentApp._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&r in o)return o[r];if(arguments.length>1)return n&&isFunction(e)?e.call(s&&s.proxy):e}}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchSyncEffect(r,e){return doWatch(r,null,{flush:"sync"})}function watch(r,e,n){return doWatch(r,e,n)}function doWatch(r,e,n=EMPTY_OBJ){const{immediate:s,deep:o,flush:l,once:a}=n,c=extend({},n),u=e&&s||!e&&l!=="post";let f;if(isInSSRComponentSetup){if(l==="sync"){const v=useSSRContext();f=v.__watcherHandles||(v.__watcherHandles=[])}else if(!u){const v=()=>{};return v.stop=NOOP,v.resume=NOOP,v.pause=NOOP,v}}const d=currentInstance;c.call=(v,k,A)=>callWithAsyncErrorHandling(v,d,k,A);let g=!1;l==="post"?c.scheduler=v=>{queuePostRenderEffect(v,d&&d.suspense)}:l!=="sync"&&(g=!0,c.scheduler=(v,k)=>{k?v():queueJob(v)}),c.augmentJob=v=>{e&&(v.flags|=4),g&&(v.flags|=2,d&&(v.id=d.uid,v.i=d))};const m=watch$1(r,e,c);return isInSSRComponentSetup&&(f?f.push(m):u&&m()),m}function instanceWatch(r,e,n){const s=this.proxy,o=isString(r)?r.includes(".")?createPathGetter(s,r):()=>s[r]:r.bind(s,s);let l;isFunction(e)?l=e:(l=e.handler,n=e);const a=setCurrentInstance(this),c=doWatch(o,l.bind(s),n);return a(),c}function createPathGetter(r,e){const n=e.split(".");return()=>{let s=r;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const TeleportEndKey=Symbol("_vte"),isTeleport=r=>r.__isTeleport,isTeleportDisabled=r=>r&&(r.disabled||r.disabled===""),isTeleportDeferred=r=>r&&(r.defer||r.defer===""),isTargetSVG=r=>typeof SVGElement<"u"&&r instanceof SVGElement,isTargetMathML=r=>typeof MathMLElement=="function"&&r instanceof MathMLElement,resolveTarget=(r,e)=>{const n=r&&r.to;return isString(n)?e?e(n):null:n},TeleportImpl={name:"Teleport",__isTeleport:!0,process(r,e,n,s,o,l,a,c,u,f){const{mc:d,pc:g,pbc:m,o:{insert:v,querySelector:k,createText:A,createComment:E}}=f,N=isTeleportDisabled(e.props);let{shapeFlag:V,children:q,dynamicChildren:W}=e;if(r==null){const H=e.el=A(""),$=e.anchor=A("");v(H,n,s),v($,n,s);const L=(ae,ge)=>{V&16&&d(q,ae,ge,o,l,a,c,u)},te=()=>{const ae=e.target=resolveTarget(e.props,k),ge=prepareAnchor(ae,e,A,v);ae&&(a!=="svg"&&isTargetSVG(ae)?a="svg":a!=="mathml"&&isTargetMathML(ae)&&(a="mathml"),o&&o.isCE&&(o.ce._teleportTargets||(o.ce._teleportTargets=new Set)).add(ae),N||(L(ae,ge),updateCssVars(e,!1)))};N&&(L(n,$),updateCssVars(e,!0)),isTeleportDeferred(e.props)?(e.el.__isMounted=!1,queuePostRenderEffect(()=>{te(),delete e.el.__isMounted},l)):te()}else{if(isTeleportDeferred(e.props)&&r.el.__isMounted===!1){queuePostRenderEffect(()=>{TeleportImpl.process(r,e,n,s,o,l,a,c,u,f)},l);return}e.el=r.el,e.targetStart=r.targetStart;const H=e.anchor=r.anchor,$=e.target=r.target,L=e.targetAnchor=r.targetAnchor,te=isTeleportDisabled(r.props),ae=te?n:$,ge=te?H:L;if(a==="svg"||isTargetSVG($)?a="svg":(a==="mathml"||isTargetMathML($))&&(a="mathml"),W?(m(r.dynamicChildren,W,ae,o,l,a,c),traverseStaticChildren(r,e,!0)):u||g(r,e,ae,ge,o,l,a,c,!1),N)te?e.props&&r.props&&e.props.to!==r.props.to&&(e.props.to=r.props.to):moveTeleport(e,n,H,f,1);else if((e.props&&e.props.to)!==(r.props&&r.props.to)){const Y=e.target=resolveTarget(e.props,k);Y&&moveTeleport(e,Y,null,f,0)}else te&&moveTeleport(e,$,L,f,1);updateCssVars(e,N)}},remove(r,e,n,{um:s,o:{remove:o}},l){const{shapeFlag:a,children:c,anchor:u,targetStart:f,targetAnchor:d,target:g,props:m}=r;if(g&&(o(f),o(d)),l&&o(u),a&16){const v=l||!isTeleportDisabled(m);for(let k=0;k<c.length;k++){const A=c[k];s(A,e,n,v,!!A.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(r,e,n,{o:{insert:s},m:o},l=2){l===0&&s(r.targetAnchor,e,n);const{el:a,anchor:c,shapeFlag:u,children:f,props:d}=r,g=l===2;if(g&&s(a,e,n),(!g||isTeleportDisabled(d))&&u&16)for(let m=0;m<f.length;m++)o(f[m],e,n,2);g&&s(c,e,n)}function hydrateTeleport(r,e,n,s,o,l,{o:{nextSibling:a,parentNode:c,querySelector:u,insert:f,createText:d}},g){function m(A,E,N,V){E.anchor=g(a(A),E,c(A),n,s,o,l),E.targetStart=N,E.targetAnchor=V}const v=e.target=resolveTarget(e.props,u),k=isTeleportDisabled(e.props);if(v){const A=v._lpa||v.firstChild;if(e.shapeFlag&16)if(k)m(r,e,A,A&&a(A));else{e.anchor=a(r);let E=A;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&a(e.targetAnchor);break}}E=a(E)}e.targetAnchor||prepareAnchor(v,e,d,f),g(A&&a(A),e,v,n,s,o,l)}updateCssVars(e,k)}else k&&e.shapeFlag&16&&m(r,e,r,a(r));return e.anchor&&a(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(r,e){const n=r.ctx;if(n&&n.ut){let s,o;for(e?(s=r.el,o=r.anchor):(s=r.targetStart,o=r.targetAnchor);s&&s!==o;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function prepareAnchor(r,e,n,s){const o=e.targetStart=n(""),l=e.targetAnchor=n("");return o[TeleportEndKey]=l,r&&(s(o,r),s(l,r)),l}const leaveCbKey=Symbol("_leaveCb");function setTransitionHooks(r,e){r.shapeFlag&6&&r.component?(r.transition=e,setTransitionHooks(r.component.subTree,e)):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function defineComponent(r,e){return isFunction(r)?extend({name:r.name},e,{setup:r}):r}function markAsyncBoundary(r){r.ids=[r.ids[0]+r.ids[2]+++"-",0,0]}const pendingSetRefMap=new WeakMap;function setRef(r,e,n,s,o=!1){if(isArray(r)){r.forEach((k,A)=>setRef(k,e&&(isArray(e)?e[A]:e),n,s,o));return}if(isAsyncWrapper(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&setRef(r,e,n,s.component.subTree);return}const l=s.shapeFlag&4?getComponentPublicInstance(s.component):s.el,a=o?null:l,{i:c,r:u}=r,f=e&&e.r,d=c.refs===EMPTY_OBJ?c.refs={}:c.refs,g=c.setupState,m=toRaw(g),v=g===EMPTY_OBJ?NO:k=>hasOwn(m,k);if(f!=null&&f!==u){if(invalidatePendingSetRef(e),isString(f))d[f]=null,v(f)&&(g[f]=null);else if(isRef(f)){f.value=null;const k=e;k.k&&(d[k.k]=null)}}if(isFunction(u))callWithErrorHandling(u,c,12,[a,d]);else{const k=isString(u),A=isRef(u);if(k||A){const E=()=>{if(r.f){const N=k?v(u)?g[u]:d[u]:u.value;if(o)isArray(N)&&remove$1(N,l);else if(isArray(N))N.includes(l)||N.push(l);else if(k)d[u]=[l],v(u)&&(g[u]=d[u]);else{const V=[l];u.value=V,r.k&&(d[r.k]=V)}}else k?(d[u]=a,v(u)&&(g[u]=a)):A&&(u.value=a,r.k&&(d[r.k]=a))};if(a){const N=()=>{E(),pendingSetRefMap.delete(r)};N.id=-1,pendingSetRefMap.set(r,N),queuePostRenderEffect(N,n)}else invalidatePendingSetRef(r),E()}}}function invalidatePendingSetRef(r){const e=pendingSetRefMap.get(r);e&&(e.flags|=8,pendingSetRefMap.delete(r))}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=r=>!!r.type.__asyncLoader,isKeepAlive=r=>r.type.__isKeepAlive;function onActivated(r,e){registerKeepAliveHook(r,"a",e)}function onDeactivated(r,e){registerKeepAliveHook(r,"da",e)}function registerKeepAliveHook(r,e,n=currentInstance){const s=r.__wdc||(r.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return r()});if(injectHook(e,s,n),n){let o=n.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(s,e,n,o),o=o.parent}}function injectToKeepAliveRoot(r,e,n,s){const o=injectHook(e,r,s,!0);onUnmounted(()=>{remove$1(s[e],o)},n)}function injectHook(r,e,n=currentInstance,s=!1){if(n){const o=n[r]||(n[r]=[]),l=e.__weh||(e.__weh=(...a)=>{pauseTracking();const c=setCurrentInstance(n),u=callWithAsyncErrorHandling(e,n,r,a);return c(),resetTracking(),u});return s?o.unshift(l):o.push(l),l}}const createHook=r=>(e,n=currentInstance)=>{(!isInSSRComponentSetup||r==="sp")&&injectHook(r,(...s)=>e(...s),n)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(r,e=currentInstance){injectHook("ec",r,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(r,e,n,s){let o;const l=n,a=isArray(r);if(a||isString(r)){const c=a&&isReactive(r);let u=!1,f=!1;c&&(u=!isShallow(r),f=isReadonly(r),r=shallowReadArray(r)),o=new Array(r.length);for(let d=0,g=r.length;d<g;d++)o[d]=e(u?f?toReadonly(toReactive(r[d])):toReactive(r[d]):r[d],d,void 0,l)}else if(typeof r=="number"){o=new Array(r);for(let c=0;c<r;c++)o[c]=e(c+1,c,void 0,l)}else if(isObject(r))if(r[Symbol.iterator])o=Array.from(r,(c,u)=>e(c,u,void 0,l));else{const c=Object.keys(r);o=new Array(c.length);for(let u=0,f=c.length;u<f;u++){const d=c[u];o[u]=e(r[d],d,u,l)}}else o=[];return o}function renderSlot(r,e,n={},s,o){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce){const f=Object.keys(n).length>0;return e!=="default"&&(n.name=e),openBlock(),createBlock(Fragment,null,[createVNode("slot",n,s)],f?-2:64)}let l=r[e];l&&l._c&&(l._d=!1),openBlock();const a=l&&ensureValidVNode(l(n)),c=n.key||a&&a.key,u=createBlock(Fragment,{key:(c&&!isSymbol(c)?c:`_${e}`)+(!a&&s?"_fb":"")},a||[],a&&r._===1?64:-2);return l&&l._c&&(l._d=!0),u}function ensureValidVNode(r){return r.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?r:null}const getPublicInstance=r=>r?isStatefulComponent(r)?getComponentPublicInstance(r):getPublicInstance(r.parent):null,publicPropertiesMap=extend(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>getPublicInstance(r.parent),$root:r=>getPublicInstance(r.root),$host:r=>r.ce,$emit:r=>r.emit,$options:r=>resolveMergedOptions(r),$forceUpdate:r=>r.f||(r.f=()=>{queueJob(r.update)}),$nextTick:r=>r.n||(r.n=nextTick.bind(r.proxy)),$watch:r=>instanceWatch.bind(r)}),hasSetupBinding=(r,e)=>r!==EMPTY_OBJ&&!r.__isScriptSetup&&hasOwn(r,e),PublicInstanceProxyHandlers={get({_:r},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:l,accessCache:a,type:c,appContext:u}=r;if(e[0]!=="$"){const m=a[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return o[e];case 4:return n[e];case 3:return l[e]}else{if(hasSetupBinding(s,e))return a[e]=1,s[e];if(o!==EMPTY_OBJ&&hasOwn(o,e))return a[e]=2,o[e];if(hasOwn(l,e))return a[e]=3,l[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return a[e]=4,n[e];shouldCacheAccess&&(a[e]=0)}}const f=publicPropertiesMap[e];let d,g;if(f)return e==="$attrs"&&track(r.attrs,"get",""),f(r);if((d=c.__cssModules)&&(d=d[e]))return d;if(n!==EMPTY_OBJ&&hasOwn(n,e))return a[e]=4,n[e];if(g=u.config.globalProperties,hasOwn(g,e))return g[e]},set({_:r},e,n){const{data:s,setupState:o,ctx:l}=r;return hasSetupBinding(o,e)?(o[e]=n,!0):s!==EMPTY_OBJ&&hasOwn(s,e)?(s[e]=n,!0):hasOwn(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(l[e]=n,!0)},has({_:{data:r,setupState:e,accessCache:n,ctx:s,appContext:o,props:l,type:a}},c){let u;return!!(n[c]||r!==EMPTY_OBJ&&c[0]!=="$"&&hasOwn(r,c)||hasSetupBinding(e,c)||hasOwn(l,c)||hasOwn(s,c)||hasOwn(publicPropertiesMap,c)||hasOwn(o.config.globalProperties,c)||(u=a.__cssModules)&&u[c])},defineProperty(r,e,n){return n.get!=null?r._.accessCache[e]=0:hasOwn(n,"value")&&this.set(r,e,n.value,null),Reflect.defineProperty(r,e,n)}};function normalizePropsOrEmits(r){return isArray(r)?r.reduce((e,n)=>(e[n]=null,e),{}):r}function mergeModels(r,e){return!r||!e?r||e:isArray(r)&&isArray(e)?r.concat(e):extend({},normalizePropsOrEmits(r),normalizePropsOrEmits(e))}let shouldCacheAccess=!0;function applyOptions(r){const e=resolveMergedOptions(r),n=r.proxy,s=r.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,r,"bc");const{data:o,computed:l,methods:a,watch:c,provide:u,inject:f,created:d,beforeMount:g,mounted:m,beforeUpdate:v,updated:k,activated:A,deactivated:E,beforeDestroy:N,beforeUnmount:V,destroyed:q,unmounted:W,render:H,renderTracked:$,renderTriggered:L,errorCaptured:te,serverPrefetch:ae,expose:ge,inheritAttrs:Y,components:he,directives:me,filters:xe}=e;if(f&&resolveInjections(f,s,null),a)for(const be in a){const ve=a[be];isFunction(ve)&&(s[be]=ve.bind(n))}if(o){const be=o.call(n,n);isObject(be)&&(r.data=reactive(be))}if(shouldCacheAccess=!0,l)for(const be in l){const ve=l[be],Te=isFunction(ve)?ve.bind(n,n):isFunction(ve.get)?ve.get.bind(n,n):NOOP,Me=!isFunction(ve)&&isFunction(ve.set)?ve.set.bind(n):NOOP,Be=computed({get:Te,set:Me});Object.defineProperty(s,be,{enumerable:!0,configurable:!0,get:()=>Be.value,set:Re=>Be.value=Re})}if(c)for(const be in c)createWatcher(c[be],s,n,be);if(u){const be=isFunction(u)?u.call(n):u;Reflect.ownKeys(be).forEach(ve=>{provide(ve,be[ve])})}d&&callHook(d,r,"c");function Se(be,ve){isArray(ve)?ve.forEach(Te=>be(Te.bind(n))):ve&&be(ve.bind(n))}if(Se(onBeforeMount,g),Se(onMounted,m),Se(onBeforeUpdate,v),Se(onUpdated,k),Se(onActivated,A),Se(onDeactivated,E),Se(onErrorCaptured,te),Se(onRenderTracked,$),Se(onRenderTriggered,L),Se(onBeforeUnmount,V),Se(onUnmounted,W),Se(onServerPrefetch,ae),isArray(ge))if(ge.length){const be=r.exposed||(r.exposed={});ge.forEach(ve=>{Object.defineProperty(be,ve,{get:()=>n[ve],set:Te=>n[ve]=Te,enumerable:!0})})}else r.exposed||(r.exposed={});H&&r.render===NOOP&&(r.render=H),Y!=null&&(r.inheritAttrs=Y),he&&(r.components=he),me&&(r.directives=me),ae&&markAsyncBoundary(r)}function resolveInjections(r,e,n=NOOP){isArray(r)&&(r=normalizeInject(r));for(const s in r){const o=r[s];let l;isObject(o)?"default"in o?l=inject(o.from||s,o.default,!0):l=inject(o.from||s):l=inject(o),isRef(l)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>l.value,set:a=>l.value=a}):e[s]=l}}function callHook(r,e,n){callWithAsyncErrorHandling(isArray(r)?r.map(s=>s.bind(e.proxy)):r.bind(e.proxy),e,n)}function createWatcher(r,e,n,s){let o=s.includes(".")?createPathGetter(n,s):()=>n[s];if(isString(r)){const l=e[r];isFunction(l)&&watch(o,l)}else if(isFunction(r))watch(o,r.bind(n));else if(isObject(r))if(isArray(r))r.forEach(l=>createWatcher(l,e,n,s));else{const l=isFunction(r.handler)?r.handler.bind(n):e[r.handler];isFunction(l)&&watch(o,l,r)}}function resolveMergedOptions(r){const e=r.type,{mixins:n,extends:s}=e,{mixins:o,optionsCache:l,config:{optionMergeStrategies:a}}=r.appContext,c=l.get(e);let u;return c?u=c:!o.length&&!n&&!s?u=e:(u={},o.length&&o.forEach(f=>mergeOptions(u,f,a,!0)),mergeOptions(u,e,a)),isObject(e)&&l.set(e,u),u}function mergeOptions(r,e,n,s=!1){const{mixins:o,extends:l}=e;l&&mergeOptions(r,l,n,!0),o&&o.forEach(a=>mergeOptions(r,a,n,!0));for(const a in e)if(!(s&&a==="expose")){const c=internalOptionMergeStrats[a]||n&&n[a];r[a]=c?c(r[a],e[a]):e[a]}return r}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(r,e){return e?r?function(){return extend(isFunction(r)?r.call(this,this):r,isFunction(e)?e.call(this,this):e)}:e:r}function mergeInject(r,e){return mergeObjectOptions(normalizeInject(r),normalizeInject(e))}function normalizeInject(r){if(isArray(r)){const e={};for(let n=0;n<r.length;n++)e[r[n]]=r[n];return e}return r}function mergeAsArray(r,e){return r?[...new Set([].concat(r,e))]:e}function mergeObjectOptions(r,e){return r?extend(Object.create(null),r,e):e}function mergeEmitsOrPropsOptions(r,e){return r?isArray(r)&&isArray(e)?[...new Set([...r,...e])]:extend(Object.create(null),normalizePropsOrEmits(r),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(r,e){if(!r)return e;if(!e)return r;const n=extend(Object.create(null),r);for(const s in e)n[s]=mergeAsArray(r[s],e[s]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(r,e){return function(s,o=null){isFunction(s)||(s=extend({},s)),o!=null&&!isObject(o)&&(o=null);const l=createAppContext(),a=new WeakSet,c=[];let u=!1;const f=l.app={_uid:uid$1++,_component:s,_props:o,_container:null,_context:l,_instance:null,version,get config(){return l.config},set config(d){},use(d,...g){return a.has(d)||(d&&isFunction(d.install)?(a.add(d),d.install(f,...g)):isFunction(d)&&(a.add(d),d(f,...g))),f},mixin(d){return l.mixins.includes(d)||l.mixins.push(d),f},component(d,g){return g?(l.components[d]=g,f):l.components[d]},directive(d,g){return g?(l.directives[d]=g,f):l.directives[d]},mount(d,g,m){if(!u){const v=f._ceVNode||createVNode(s,o);return v.appContext=l,m===!0?m="svg":m===!1&&(m=void 0),r(v,d,m),u=!0,f._container=d,d.__vue_app__=f,getComponentPublicInstance(v.component)}},onUnmount(d){c.push(d)},unmount(){u&&(callWithAsyncErrorHandling(c,f._instance,16),r(null,f._container),delete f._container.__vue_app__)},provide(d,g){return l.provides[d]=g,f},runWithContext(d){const g=currentApp;currentApp=f;try{return d()}finally{currentApp=g}}};return f}}let currentApp=null;function useModel(r,e,n=EMPTY_OBJ){const s=getCurrentInstance(),o=camelize(e),l=hyphenate(e),a=getModelModifiers(r,o),c=customRef((u,f)=>{let d,g=EMPTY_OBJ,m;return watchSyncEffect(()=>{const v=r[o];hasChanged(d,v)&&(d=v,f())}),{get(){return u(),n.get?n.get(d):d},set(v){const k=n.set?n.set(v):v;if(!hasChanged(k,d)&&!(g!==EMPTY_OBJ&&hasChanged(v,g)))return;const A=s.vnode.props;A&&(e in A||o in A||l in A)&&(`onUpdate:${e}`in A||`onUpdate:${o}`in A||`onUpdate:${l}`in A)||(d=v,f()),s.emit(`update:${e}`,k),hasChanged(v,k)&&hasChanged(v,g)&&!hasChanged(k,m)&&f(),g=v,m=k}}});return c[Symbol.iterator]=()=>{let u=0;return{next(){return u<2?{value:u++?a||EMPTY_OBJ:c,done:!1}:{done:!0}}}},c}const getModelModifiers=(r,e)=>e==="modelValue"||e==="model-value"?r.modelModifiers:r[`${e}Modifiers`]||r[`${camelize(e)}Modifiers`]||r[`${hyphenate(e)}Modifiers`];function emit(r,e,...n){if(r.isUnmounted)return;const s=r.vnode.props||EMPTY_OBJ;let o=n;const l=e.startsWith("update:"),a=l&&getModelModifiers(s,e.slice(7));a&&(a.trim&&(o=n.map(d=>isString(d)?d.trim():d)),a.number&&(o=n.map(looseToNumber)));let c,u=s[c=toHandlerKey(e)]||s[c=toHandlerKey(camelize(e))];!u&&l&&(u=s[c=toHandlerKey(hyphenate(e))]),u&&callWithAsyncErrorHandling(u,r,6,o);const f=s[c+"Once"];if(f){if(!r.emitted)r.emitted={};else if(r.emitted[c])return;r.emitted[c]=!0,callWithAsyncErrorHandling(f,r,6,o)}}const mixinEmitsCache=new WeakMap;function normalizeEmitsOptions(r,e,n=!1){const s=n?mixinEmitsCache:e.emitsCache,o=s.get(r);if(o!==void 0)return o;const l=r.emits;let a={},c=!1;if(!isFunction(r)){const u=f=>{const d=normalizeEmitsOptions(f,e,!0);d&&(c=!0,extend(a,d))};!n&&e.mixins.length&&e.mixins.forEach(u),r.extends&&u(r.extends),r.mixins&&r.mixins.forEach(u)}return!l&&!c?(isObject(r)&&s.set(r,null),null):(isArray(l)?l.forEach(u=>a[u]=null):extend(a,l),isObject(r)&&s.set(r,a),a)}function isEmitListener(r,e){return!r||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(r,e[0].toLowerCase()+e.slice(1))||hasOwn(r,hyphenate(e))||hasOwn(r,e))}function markAttrsAccessed(){}function renderComponentRoot(r){const{type:e,vnode:n,proxy:s,withProxy:o,propsOptions:[l],slots:a,attrs:c,emit:u,render:f,renderCache:d,props:g,data:m,setupState:v,ctx:k,inheritAttrs:A}=r,E=setCurrentRenderingInstance(r);let N,V;try{if(n.shapeFlag&4){const W=o||s,H=W;N=normalizeVNode(f.call(H,W,d,g,v,m,k)),V=c}else{const W=e;N=normalizeVNode(W.length>1?W(g,{attrs:c,slots:a,emit:u}):W(g,null)),V=e.props?c:getFunctionalFallthrough(c)}}catch(W){blockStack.length=0,handleError(W,r,1),N=createVNode(Comment)}let q=N;if(V&&A!==!1){const W=Object.keys(V),{shapeFlag:H}=q;W.length&&H&7&&(l&&W.some(isModelListener)&&(V=filterModelListeners(V,l)),q=cloneVNode(q,V,!1,!0))}return n.dirs&&(q=cloneVNode(q,null,!1,!0),q.dirs=q.dirs?q.dirs.concat(n.dirs):n.dirs),n.transition&&setTransitionHooks(q,n.transition),N=q,setCurrentRenderingInstance(E),N}const getFunctionalFallthrough=r=>{let e;for(const n in r)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=r[n]);return e},filterModelListeners=(r,e)=>{const n={};for(const s in r)(!isModelListener(s)||!(s.slice(9)in e))&&(n[s]=r[s]);return n};function shouldUpdateComponent(r,e,n){const{props:s,children:o,component:l}=r,{props:a,children:c,patchFlag:u}=e,f=l.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return s?hasPropsChanged(s,a,f):!!a;if(u&8){const d=e.dynamicProps;for(let g=0;g<d.length;g++){const m=d[g];if(a[m]!==s[m]&&!isEmitListener(f,m))return!0}}}else return(o||c)&&(!c||!c.$stable)?!0:s===a?!1:s?a?hasPropsChanged(s,a,f):!0:!!a;return!1}function hasPropsChanged(r,e,n){const s=Object.keys(e);if(s.length!==Object.keys(r).length)return!0;for(let o=0;o<s.length;o++){const l=s[o];if(e[l]!==r[l]&&!isEmitListener(n,l))return!0}return!1}function updateHOCHostEl({vnode:r,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===r&&(s.el=r.el),s===r)(r=e.vnode).el=n,e=e.parent;else break}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=r=>Object.getPrototypeOf(r)===internalObjectProto;function initProps(r,e,n,s=!1){const o={},l=createInternalObject();r.propsDefaults=Object.create(null),setFullProps(r,e,o,l);for(const a in r.propsOptions[0])a in o||(o[a]=void 0);n?r.props=s?o:shallowReactive(o):r.type.props?r.props=o:r.props=l,r.attrs=l}function updateProps(r,e,n,s){const{props:o,attrs:l,vnode:{patchFlag:a}}=r,c=toRaw(o),[u]=r.propsOptions;let f=!1;if((s||a>0)&&!(a&16)){if(a&8){const d=r.vnode.dynamicProps;for(let g=0;g<d.length;g++){let m=d[g];if(isEmitListener(r.emitsOptions,m))continue;const v=e[m];if(u)if(hasOwn(l,m))v!==l[m]&&(l[m]=v,f=!0);else{const k=camelize(m);o[k]=resolvePropValue(u,c,k,v,r,!1)}else v!==l[m]&&(l[m]=v,f=!0)}}}else{setFullProps(r,e,o,l)&&(f=!0);let d;for(const g in c)(!e||!hasOwn(e,g)&&((d=hyphenate(g))===g||!hasOwn(e,d)))&&(u?n&&(n[g]!==void 0||n[d]!==void 0)&&(o[g]=resolvePropValue(u,c,g,void 0,r,!0)):delete o[g]);if(l!==c)for(const g in l)(!e||!hasOwn(e,g))&&(delete l[g],f=!0)}f&&trigger(r.attrs,"set","")}function setFullProps(r,e,n,s){const[o,l]=r.propsOptions;let a=!1,c;if(e)for(let u in e){if(isReservedProp(u))continue;const f=e[u];let d;o&&hasOwn(o,d=camelize(u))?!l||!l.includes(d)?n[d]=f:(c||(c={}))[d]=f:isEmitListener(r.emitsOptions,u)||(!(u in s)||f!==s[u])&&(s[u]=f,a=!0)}if(l){const u=toRaw(n),f=c||EMPTY_OBJ;for(let d=0;d<l.length;d++){const g=l[d];n[g]=resolvePropValue(o,u,g,f[g],r,!hasOwn(f,g))}}return a}function resolvePropValue(r,e,n,s,o,l){const a=r[n];if(a!=null){const c=hasOwn(a,"default");if(c&&s===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&isFunction(u)){const{propsDefaults:f}=o;if(n in f)s=f[n];else{const d=setCurrentInstance(o);s=f[n]=u.call(null,e),d()}}else s=u;o.ce&&o.ce._setProp(n,s)}a[0]&&(l&&!c?s=!1:a[1]&&(s===""||s===hyphenate(n))&&(s=!0))}return s}const mixinPropsCache=new WeakMap;function normalizePropsOptions(r,e,n=!1){const s=n?mixinPropsCache:e.propsCache,o=s.get(r);if(o)return o;const l=r.props,a={},c=[];let u=!1;if(!isFunction(r)){const d=g=>{u=!0;const[m,v]=normalizePropsOptions(g,e,!0);extend(a,m),v&&c.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(d),r.extends&&d(r.extends),r.mixins&&r.mixins.forEach(d)}if(!l&&!u)return isObject(r)&&s.set(r,EMPTY_ARR),EMPTY_ARR;if(isArray(l))for(let d=0;d<l.length;d++){const g=camelize(l[d]);validatePropName(g)&&(a[g]=EMPTY_OBJ)}else if(l)for(const d in l){const g=camelize(d);if(validatePropName(g)){const m=l[d],v=a[g]=isArray(m)||isFunction(m)?{type:m}:extend({},m),k=v.type;let A=!1,E=!0;if(isArray(k))for(let N=0;N<k.length;++N){const V=k[N],q=isFunction(V)&&V.name;if(q==="Boolean"){A=!0;break}else q==="String"&&(E=!1)}else A=isFunction(k)&&k.name==="Boolean";v[0]=A,v[1]=E,(A||hasOwn(v,"default"))&&c.push(g)}}const f=[a,c];return isObject(r)&&s.set(r,f),f}function validatePropName(r){return r[0]!=="$"&&!isReservedProp(r)}const isInternalKey=r=>r==="_"||r==="_ctx"||r==="$stable",normalizeSlotValue=r=>isArray(r)?r.map(normalizeVNode):[normalizeVNode(r)],normalizeSlot=(r,e,n)=>{if(e._n)return e;const s=withCtx((...o)=>normalizeSlotValue(e(...o)),n);return s._c=!1,s},normalizeObjectSlots=(r,e,n)=>{const s=r._ctx;for(const o in r){if(isInternalKey(o))continue;const l=r[o];if(isFunction(l))e[o]=normalizeSlot(o,l,s);else if(l!=null){const a=normalizeSlotValue(l);e[o]=()=>a}}},normalizeVNodeSlots=(r,e)=>{const n=normalizeSlotValue(e);r.slots.default=()=>n},assignSlots=(r,e,n)=>{for(const s in e)(n||!isInternalKey(s))&&(r[s]=e[s])},initSlots=(r,e,n)=>{const s=r.slots=createInternalObject();if(r.vnode.shapeFlag&32){const o=e._;o?(assignSlots(s,e,n),n&&def(s,"_",o,!0)):normalizeObjectSlots(e,s)}else e&&normalizeVNodeSlots(r,e)},updateSlots=(r,e,n)=>{const{vnode:s,slots:o}=r;let l=!0,a=EMPTY_OBJ;if(s.shapeFlag&32){const c=e._;c?n&&c===1?l=!1:assignSlots(o,e,n):(l=!e.$stable,normalizeObjectSlots(e,o)),a=e}else e&&(normalizeVNodeSlots(r,e),a={default:1});if(l)for(const c in o)!isInternalKey(c)&&a[c]==null&&delete o[c]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(r){return baseCreateRenderer(r)}function baseCreateRenderer(r,e){const n=getGlobalThis();n.__VUE__=!0;const{insert:s,remove:o,patchProp:l,createElement:a,createText:c,createComment:u,setText:f,setElementText:d,parentNode:g,nextSibling:m,setScopeId:v=NOOP,insertStaticContent:k}=r,A=(I,_,K,Z=null,J=null,Q=null,se=void 0,ne=null,ee=!!_.dynamicChildren)=>{if(I===_)return;I&&!isSameVNodeType(I,_)&&(Z=$e(I),Re(I,J,Q,!0),I=null),_.patchFlag===-2&&(ee=!1,_.dynamicChildren=null);const{type:X,ref:de,shapeFlag:le}=_;switch(X){case Text$1:E(I,_,K,Z);break;case Comment:N(I,_,K,Z);break;case Static:I==null&&V(_,K,Z,se);break;case Fragment:he(I,_,K,Z,J,Q,se,ne,ee);break;default:le&1?H(I,_,K,Z,J,Q,se,ne,ee):le&6?me(I,_,K,Z,J,Q,se,ne,ee):(le&64||le&128)&&X.process(I,_,K,Z,J,Q,se,ne,ee,Ue)}de!=null&&J?setRef(de,I&&I.ref,Q,_||I,!_):de==null&&I&&I.ref!=null&&setRef(I.ref,null,Q,I,!0)},E=(I,_,K,Z)=>{if(I==null)s(_.el=c(_.children),K,Z);else{const J=_.el=I.el;_.children!==I.children&&f(J,_.children)}},N=(I,_,K,Z)=>{I==null?s(_.el=u(_.children||""),K,Z):_.el=I.el},V=(I,_,K,Z)=>{[I.el,I.anchor]=k(I.children,_,K,Z,I.el,I.anchor)},q=({el:I,anchor:_},K,Z)=>{let J;for(;I&&I!==_;)J=m(I),s(I,K,Z),I=J;s(_,K,Z)},W=({el:I,anchor:_})=>{let K;for(;I&&I!==_;)K=m(I),o(I),I=K;o(_)},H=(I,_,K,Z,J,Q,se,ne,ee)=>{if(_.type==="svg"?se="svg":_.type==="math"&&(se="mathml"),I==null)$(_,K,Z,J,Q,se,ne,ee);else{const X=I.el&&I.el._isVueCE?I.el:null;try{X&&X._beginPatch(),ae(I,_,J,Q,se,ne,ee)}finally{X&&X._endPatch()}}},$=(I,_,K,Z,J,Q,se,ne)=>{let ee,X;const{props:de,shapeFlag:le,transition:fe,dirs:ye}=I;if(ee=I.el=a(I.type,Q,de&&de.is,de),le&8?d(ee,I.children):le&16&&te(I.children,ee,null,Z,J,resolveChildrenNamespace(I,Q),se,ne),ye&&invokeDirectiveHook(I,null,Z,"created"),L(ee,I,I.scopeId,se,Z),de){for(const Ee in de)Ee!=="value"&&!isReservedProp(Ee)&&l(ee,Ee,null,de[Ee],Q,Z);"value"in de&&l(ee,"value",null,de.value,Q),(X=de.onVnodeBeforeMount)&&invokeVNodeHook(X,Z,I)}ye&&invokeDirectiveHook(I,null,Z,"beforeMount");const ke=needTransition(J,fe);ke&&fe.beforeEnter(ee),s(ee,_,K),((X=de&&de.onVnodeMounted)||ke||ye)&&queuePostRenderEffect(()=>{X&&invokeVNodeHook(X,Z,I),ke&&fe.enter(ee),ye&&invokeDirectiveHook(I,null,Z,"mounted")},J)},L=(I,_,K,Z,J)=>{if(K&&v(I,K),Z)for(let Q=0;Q<Z.length;Q++)v(I,Z[Q]);if(J){let Q=J.subTree;if(_===Q||isSuspense(Q.type)&&(Q.ssContent===_||Q.ssFallback===_)){const se=J.vnode;L(I,se,se.scopeId,se.slotScopeIds,J.parent)}}},te=(I,_,K,Z,J,Q,se,ne,ee=0)=>{for(let X=ee;X<I.length;X++){const de=I[X]=ne?cloneIfMounted(I[X]):normalizeVNode(I[X]);A(null,de,_,K,Z,J,Q,se,ne)}},ae=(I,_,K,Z,J,Q,se)=>{const ne=_.el=I.el;let{patchFlag:ee,dynamicChildren:X,dirs:de}=_;ee|=I.patchFlag&16;const le=I.props||EMPTY_OBJ,fe=_.props||EMPTY_OBJ;let ye;if(K&&toggleRecurse(K,!1),(ye=fe.onVnodeBeforeUpdate)&&invokeVNodeHook(ye,K,_,I),de&&invokeDirectiveHook(_,I,K,"beforeUpdate"),K&&toggleRecurse(K,!0),(le.innerHTML&&fe.innerHTML==null||le.textContent&&fe.textContent==null)&&d(ne,""),X?ge(I.dynamicChildren,X,ne,K,Z,resolveChildrenNamespace(_,J),Q):se||ve(I,_,ne,null,K,Z,resolveChildrenNamespace(_,J),Q,!1),ee>0){if(ee&16)Y(ne,le,fe,K,J);else if(ee&2&&le.class!==fe.class&&l(ne,"class",null,fe.class,J),ee&4&&l(ne,"style",le.style,fe.style,J),ee&8){const ke=_.dynamicProps;for(let Ee=0;Ee<ke.length;Ee++){const Ae=ke[Ee],Pe=le[Ae],Oe=fe[Ae];(Oe!==Pe||Ae==="value")&&l(ne,Ae,Pe,Oe,J,K)}}ee&1&&I.children!==_.children&&d(ne,_.children)}else!se&&X==null&&Y(ne,le,fe,K,J);((ye=fe.onVnodeUpdated)||de)&&queuePostRenderEffect(()=>{ye&&invokeVNodeHook(ye,K,_,I),de&&invokeDirectiveHook(_,I,K,"updated")},Z)},ge=(I,_,K,Z,J,Q,se)=>{for(let ne=0;ne<_.length;ne++){const ee=I[ne],X=_[ne],de=ee.el&&(ee.type===Fragment||!isSameVNodeType(ee,X)||ee.shapeFlag&198)?g(ee.el):K;A(ee,X,de,null,Z,J,Q,se,!0)}},Y=(I,_,K,Z,J)=>{if(_!==K){if(_!==EMPTY_OBJ)for(const Q in _)!isReservedProp(Q)&&!(Q in K)&&l(I,Q,_[Q],null,J,Z);for(const Q in K){if(isReservedProp(Q))continue;const se=K[Q],ne=_[Q];se!==ne&&Q!=="value"&&l(I,Q,ne,se,J,Z)}"value"in K&&l(I,"value",_.value,K.value,J)}},he=(I,_,K,Z,J,Q,se,ne,ee)=>{const X=_.el=I?I.el:c(""),de=_.anchor=I?I.anchor:c("");let{patchFlag:le,dynamicChildren:fe,slotScopeIds:ye}=_;ye&&(ne=ne?ne.concat(ye):ye),I==null?(s(X,K,Z),s(de,K,Z),te(_.children||[],K,de,J,Q,se,ne,ee)):le>0&&le&64&&fe&&I.dynamicChildren&&I.dynamicChildren.length===fe.length?(ge(I.dynamicChildren,fe,K,J,Q,se,ne),(_.key!=null||J&&_===J.subTree)&&traverseStaticChildren(I,_,!0)):ve(I,_,K,de,J,Q,se,ne,ee)},me=(I,_,K,Z,J,Q,se,ne,ee)=>{_.slotScopeIds=ne,I==null?_.shapeFlag&512?J.ctx.activate(_,K,Z,se,ee):xe(_,K,Z,J,Q,se,ee):we(I,_,ee)},xe=(I,_,K,Z,J,Q,se)=>{const ne=I.component=createComponentInstance(I,Z,J);if(isKeepAlive(I)&&(ne.ctx.renderer=Ue),setupComponent(ne,!1,se),ne.asyncDep){if(J&&J.registerDep(ne,Se,se),!I.el){const ee=ne.subTree=createVNode(Comment);N(null,ee,_,K),I.placeholder=ee.el}}else Se(ne,I,_,K,J,Q,se)},we=(I,_,K)=>{const Z=_.component=I.component;if(shouldUpdateComponent(I,_,K))if(Z.asyncDep&&!Z.asyncResolved){be(Z,_,K);return}else Z.next=_,Z.update();else _.el=I.el,Z.vnode=_},Se=(I,_,K,Z,J,Q,se)=>{const ne=()=>{if(I.isMounted){let{next:le,bu:fe,u:ye,parent:ke,vnode:Ee}=I;{const Le=locateNonHydratedAsyncRoot(I);if(Le){le&&(le.el=Ee.el,be(I,le,se)),Le.asyncDep.then(()=>{I.isUnmounted||ne()});return}}let Ae=le,Pe;toggleRecurse(I,!1),le?(le.el=Ee.el,be(I,le,se)):le=Ee,fe&&invokeArrayFns(fe),(Pe=le.props&&le.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Pe,ke,le,Ee),toggleRecurse(I,!0);const Oe=renderComponentRoot(I),Ie=I.subTree;I.subTree=Oe,A(Ie,Oe,g(Ie.el),$e(Ie),I,J,Q),le.el=Oe.el,Ae===null&&updateHOCHostEl(I,Oe.el),ye&&queuePostRenderEffect(ye,J),(Pe=le.props&&le.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Pe,ke,le,Ee),J)}else{let le;const{el:fe,props:ye}=_,{bm:ke,m:Ee,parent:Ae,root:Pe,type:Oe}=I,Ie=isAsyncWrapper(_);toggleRecurse(I,!1),ke&&invokeArrayFns(ke),!Ie&&(le=ye&&ye.onVnodeBeforeMount)&&invokeVNodeHook(le,Ae,_),toggleRecurse(I,!0);{Pe.ce&&Pe.ce._def.shadowRoot!==!1&&Pe.ce._injectChildStyle(Oe);const Le=I.subTree=renderComponentRoot(I);A(null,Le,K,Z,I,J,Q),_.el=Le.el}if(Ee&&queuePostRenderEffect(Ee,J),!Ie&&(le=ye&&ye.onVnodeMounted)){const Le=_;queuePostRenderEffect(()=>invokeVNodeHook(le,Ae,Le),J)}(_.shapeFlag&256||Ae&&isAsyncWrapper(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&I.a&&queuePostRenderEffect(I.a,J),I.isMounted=!0,_=K=Z=null}};I.scope.on();const ee=I.effect=new ReactiveEffect(ne);I.scope.off();const X=I.update=ee.run.bind(ee),de=I.job=ee.runIfDirty.bind(ee);de.i=I,de.id=I.uid,ee.scheduler=()=>queueJob(de),toggleRecurse(I,!0),X()},be=(I,_,K)=>{_.component=I;const Z=I.vnode.props;I.vnode=_,I.next=null,updateProps(I,_.props,Z,K),updateSlots(I,_.children,K),pauseTracking(),flushPreFlushCbs(I),resetTracking()},ve=(I,_,K,Z,J,Q,se,ne,ee=!1)=>{const X=I&&I.children,de=I?I.shapeFlag:0,le=_.children,{patchFlag:fe,shapeFlag:ye}=_;if(fe>0){if(fe&128){Me(X,le,K,Z,J,Q,se,ne,ee);return}else if(fe&256){Te(X,le,K,Z,J,Q,se,ne,ee);return}}ye&8?(de&16&&Fe(X,J,Q),le!==X&&d(K,le)):de&16?ye&16?Me(X,le,K,Z,J,Q,se,ne,ee):Fe(X,J,Q,!0):(de&8&&d(K,""),ye&16&&te(le,K,Z,J,Q,se,ne,ee))},Te=(I,_,K,Z,J,Q,se,ne,ee)=>{I=I||EMPTY_ARR,_=_||EMPTY_ARR;const X=I.length,de=_.length,le=Math.min(X,de);let fe;for(fe=0;fe<le;fe++){const ye=_[fe]=ee?cloneIfMounted(_[fe]):normalizeVNode(_[fe]);A(I[fe],ye,K,null,J,Q,se,ne,ee)}X>de?Fe(I,J,Q,!0,!1,le):te(_,K,Z,J,Q,se,ne,ee,le)},Me=(I,_,K,Z,J,Q,se,ne,ee)=>{let X=0;const de=_.length;let le=I.length-1,fe=de-1;for(;X<=le&&X<=fe;){const ye=I[X],ke=_[X]=ee?cloneIfMounted(_[X]):normalizeVNode(_[X]);if(isSameVNodeType(ye,ke))A(ye,ke,K,null,J,Q,se,ne,ee);else break;X++}for(;X<=le&&X<=fe;){const ye=I[le],ke=_[fe]=ee?cloneIfMounted(_[fe]):normalizeVNode(_[fe]);if(isSameVNodeType(ye,ke))A(ye,ke,K,null,J,Q,se,ne,ee);else break;le--,fe--}if(X>le){if(X<=fe){const ye=fe+1,ke=ye<de?_[ye].el:Z;for(;X<=fe;)A(null,_[X]=ee?cloneIfMounted(_[X]):normalizeVNode(_[X]),K,ke,J,Q,se,ne,ee),X++}}else if(X>fe)for(;X<=le;)Re(I[X],J,Q,!0),X++;else{const ye=X,ke=X,Ee=new Map;for(X=ke;X<=fe;X++){const De=_[X]=ee?cloneIfMounted(_[X]):normalizeVNode(_[X]);De.key!=null&&Ee.set(De.key,X)}let Ae,Pe=0;const Oe=fe-ke+1;let Ie=!1,Le=0;const ze=new Array(Oe);for(X=0;X<Oe;X++)ze[X]=0;for(X=ye;X<=le;X++){const De=I[X];if(Pe>=Oe){Re(De,J,Q,!0);continue}let _e;if(De.key!=null)_e=Ee.get(De.key);else for(Ae=ke;Ae<=fe;Ae++)if(ze[Ae-ke]===0&&isSameVNodeType(De,_[Ae])){_e=Ae;break}_e===void 0?Re(De,J,Q,!0):(ze[_e-ke]=X+1,_e>=Le?Le=_e:Ie=!0,A(De,_[_e],K,null,J,Q,se,ne,ee),Pe++)}const Ke=Ie?getSequence(ze):EMPTY_ARR;for(Ae=Ke.length-1,X=Oe-1;X>=0;X--){const De=ke+X,_e=_[De],Ge=_[De+1],Xe=De+1<de?Ge.el||resolveAsyncComponentPlaceholder(Ge):Z;ze[X]===0?A(null,_e,K,Xe,J,Q,se,ne,ee):Ie&&(Ae<0||X!==Ke[Ae]?Be(_e,K,Xe,2):Ae--)}}},Be=(I,_,K,Z,J=null)=>{const{el:Q,type:se,transition:ne,children:ee,shapeFlag:X}=I;if(X&6){Be(I.component.subTree,_,K,Z);return}if(X&128){I.suspense.move(_,K,Z);return}if(X&64){se.move(I,_,K,Ue);return}if(se===Fragment){s(Q,_,K);for(let le=0;le<ee.length;le++)Be(ee[le],_,K,Z);s(I.anchor,_,K);return}if(se===Static){q(I,_,K);return}if(Z!==2&&X&1&&ne)if(Z===0)ne.beforeEnter(Q),s(Q,_,K),queuePostRenderEffect(()=>ne.enter(Q),J);else{const{leave:le,delayLeave:fe,afterLeave:ye}=ne,ke=()=>{I.ctx.isUnmounted?o(Q):s(Q,_,K)},Ee=()=>{Q._isLeaving&&Q[leaveCbKey](!0),le(Q,()=>{ke(),ye&&ye()})};fe?fe(Q,ke,Ee):Ee()}else s(Q,_,K)},Re=(I,_,K,Z=!1,J=!1)=>{const{type:Q,props:se,ref:ne,children:ee,dynamicChildren:X,shapeFlag:de,patchFlag:le,dirs:fe,cacheIndex:ye}=I;if(le===-2&&(J=!1),ne!=null&&(pauseTracking(),setRef(ne,null,K,I,!0),resetTracking()),ye!=null&&(_.renderCache[ye]=void 0),de&256){_.ctx.deactivate(I);return}const ke=de&1&&fe,Ee=!isAsyncWrapper(I);let Ae;if(Ee&&(Ae=se&&se.onVnodeBeforeUnmount)&&invokeVNodeHook(Ae,_,I),de&6)He(I.component,K,Z);else{if(de&128){I.suspense.unmount(K,Z);return}ke&&invokeDirectiveHook(I,null,_,"beforeUnmount"),de&64?I.type.remove(I,_,K,Ue,Z):X&&!X.hasOnce&&(Q!==Fragment||le>0&&le&64)?Fe(X,_,K,!1,!0):(Q===Fragment&&le&384||!J&&de&16)&&Fe(ee,_,K),Z&&Ne(I)}(Ee&&(Ae=se&&se.onVnodeUnmounted)||ke)&&queuePostRenderEffect(()=>{Ae&&invokeVNodeHook(Ae,_,I),ke&&invokeDirectiveHook(I,null,_,"unmounted")},K)},Ne=I=>{const{type:_,el:K,anchor:Z,transition:J}=I;if(_===Fragment){Ve(K,Z);return}if(_===Static){W(I);return}const Q=()=>{o(K),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(I.shapeFlag&1&&J&&!J.persisted){const{leave:se,delayLeave:ne}=J,ee=()=>se(K,Q);ne?ne(I.el,Q,ee):ee()}else Q()},Ve=(I,_)=>{let K;for(;I!==_;)K=m(I),o(I),I=K;o(_)},He=(I,_,K)=>{const{bum:Z,scope:J,job:Q,subTree:se,um:ne,m:ee,a:X}=I;invalidateMount(ee),invalidateMount(X),Z&&invokeArrayFns(Z),J.stop(),Q&&(Q.flags|=8,Re(se,I,_,K)),ne&&queuePostRenderEffect(ne,_),queuePostRenderEffect(()=>{I.isUnmounted=!0},_)},Fe=(I,_,K,Z=!1,J=!1,Q=0)=>{for(let se=Q;se<I.length;se++)Re(I[se],_,K,Z,J)},$e=I=>{if(I.shapeFlag&6)return $e(I.component.subTree);if(I.shapeFlag&128)return I.suspense.next();const _=m(I.anchor||I.el),K=_&&_[TeleportEndKey];return K?m(K):_};let We=!1;const Qe=(I,_,K)=>{let Z;I==null?_._vnode&&(Re(_._vnode,null,null,!0),Z=_._vnode.component):A(_._vnode||null,I,_,null,null,null,K),_._vnode=I,We||(We=!0,flushPreFlushCbs(Z),flushPostFlushCbs(),We=!1)},Ue={p:A,um:Re,m:Be,r:Ne,mt:xe,mc:te,pc:ve,pbc:ge,n:$e,o:r};return{render:Qe,hydrate:void 0,createApp:createAppAPI(Qe)}}function resolveChildrenNamespace({type:r,props:e},n){return n==="svg"&&r==="foreignObject"||n==="mathml"&&r==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function toggleRecurse({effect:r,job:e},n){n?(r.flags|=32,e.flags|=4):(r.flags&=-33,e.flags&=-5)}function needTransition(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(r,e,n=!1){const s=r.children,o=e.children;if(isArray(s)&&isArray(o))for(let l=0;l<s.length;l++){const a=s[l];let c=o[l];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=o[l]=cloneIfMounted(o[l]),c.el=a.el),!n&&c.patchFlag!==-2&&traverseStaticChildren(a,c)),c.type===Text$1&&(c.patchFlag!==-1?c.el=a.el:c.__elIndex=l+(r.type===Fragment?1:0)),c.type===Comment&&!c.el&&(c.el=a.el)}}function getSequence(r){const e=r.slice(),n=[0];let s,o,l,a,c;const u=r.length;for(s=0;s<u;s++){const f=r[s];if(f!==0){if(o=n[n.length-1],r[o]<f){e[s]=o,n.push(s);continue}for(l=0,a=n.length-1;l<a;)c=l+a>>1,r[n[c]]<f?l=c+1:a=c;f<r[n[l]]&&(l>0&&(e[s]=n[l-1]),n[l]=s)}}for(l=n.length,a=n[l-1];l-- >0;)n[l]=a,a=e[a];return n}function locateNonHydratedAsyncRoot(r){const e=r.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(r){if(r)for(let e=0;e<r.length;e++)r[e].flags|=8}function resolveAsyncComponentPlaceholder(r){if(r.placeholder)return r.placeholder;const e=r.component;return e?resolveAsyncComponentPlaceholder(e.subTree):null}const isSuspense=r=>r.__isSuspense;function queueEffectWithSuspense(r,e){e&&e.pendingBranch?isArray(r)?e.effects.push(...r):e.effects.push(r):queuePostFlushCb(r)}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(r=!1){blockStack.push(currentBlock=r?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(r,e=!1){isBlockTreeEnabled+=r,r<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(r){return r.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(r),r}function createElementBlock(r,e,n,s,o,l){return setupBlock(createBaseVNode(r,e,n,s,o,l,!0))}function createBlock(r,e,n,s,o){return setupBlock(createVNode(r,e,n,s,o,!0))}function isVNode(r){return r?r.__v_isVNode===!0:!1}function isSameVNodeType(r,e){return r.type===e.type&&r.key===e.key}const normalizeKey=({key:r})=>r??null,normalizeRef=({ref:r,ref_key:e,ref_for:n})=>(typeof r=="number"&&(r=""+r),r!=null?isString(r)||isRef(r)||isFunction(r)?{i:currentRenderingInstance,r,k:e,f:!!n}:r:null);function createBaseVNode(r,e=null,n=null,s=0,o=null,l=r===Fragment?0:1,a=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return c?(normalizeChildren(u,n),l&128&&r.normalize(u)):n&&(u.shapeFlag|=isString(n)?8:16),isBlockTreeEnabled>0&&!a&&currentBlock&&(u.patchFlag>0||l&6)&&u.patchFlag!==32&&currentBlock.push(u),u}const createVNode=_createVNode;function _createVNode(r,e=null,n=null,s=0,o=null,l=!1){if((!r||r===NULL_DYNAMIC_COMPONENT)&&(r=Comment),isVNode(r)){const c=cloneVNode(r,e,!0);return n&&normalizeChildren(c,n),isBlockTreeEnabled>0&&!l&&currentBlock&&(c.shapeFlag&6?currentBlock[currentBlock.indexOf(r)]=c:currentBlock.push(c)),c.patchFlag=-2,c}if(isClassComponent(r)&&(r=r.__vccOpts),e){e=guardReactiveProps(e);let{class:c,style:u}=e;c&&!isString(c)&&(e.class=normalizeClass(c)),isObject(u)&&(isProxy(u)&&!isArray(u)&&(u=extend({},u)),e.style=normalizeStyle(u))}const a=isString(r)?1:isSuspense(r)?128:isTeleport(r)?64:isObject(r)?4:isFunction(r)?2:0;return createBaseVNode(r,e,n,s,o,a,l,!0)}function guardReactiveProps(r){return r?isProxy(r)||isInternalObject(r)?extend({},r):r:null}function cloneVNode(r,e,n=!1,s=!1){const{props:o,ref:l,patchFlag:a,children:c,transition:u}=r,f=e?mergeProps(o||{},e):o,d={__v_isVNode:!0,__v_skip:!0,type:r.type,props:f,key:f&&normalizeKey(f),ref:e&&e.ref?n&&l?isArray(l)?l.concat(normalizeRef(e)):[l,normalizeRef(e)]:normalizeRef(e):l,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:c,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Fragment?a===-1?16:a|16:a,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:u,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&cloneVNode(r.ssContent),ssFallback:r.ssFallback&&cloneVNode(r.ssFallback),placeholder:r.placeholder,el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return u&&s&&setTransitionHooks(d,u.clone(d)),d}function createTextVNode(r=" ",e=0){return createVNode(Text$1,null,r,e)}function createStaticVNode(r,e){const n=createVNode(Static,null,r);return n.staticCount=e,n}function createCommentVNode(r="",e=!1){return e?(openBlock(),createBlock(Comment,null,r)):createVNode(Comment,null,r)}function normalizeVNode(r){return r==null||typeof r=="boolean"?createVNode(Comment):isArray(r)?createVNode(Fragment,null,r.slice()):isVNode(r)?cloneIfMounted(r):createVNode(Text$1,null,String(r))}function cloneIfMounted(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:cloneVNode(r)}function normalizeChildren(r,e){let n=0;const{shapeFlag:s}=r;if(e==null)e=null;else if(isArray(e))n=16;else if(typeof e=="object")if(s&65){const o=e.default;o&&(o._c&&(o._d=!1),normalizeChildren(r,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!isInternalObject(e)?e._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),s&64?(n=16,e=[createTextVNode(e)]):n=8);r.children=e,r.shapeFlag|=n}function mergeProps(...r){const e={};for(let n=0;n<r.length;n++){const s=r[n];for(const o in s)if(o==="class")e.class!==s.class&&(e.class=normalizeClass([e.class,s.class]));else if(o==="style")e.style=normalizeStyle([e.style,s.style]);else if(isOn(o)){const l=e[o],a=s[o];a&&l!==a&&!(isArray(l)&&l.includes(a))&&(e[o]=l?[].concat(l,a):a)}else o!==""&&(e[o]=s[o])}return e}function invokeVNodeHook(r,e,n,s=null){callWithAsyncErrorHandling(r,e,7,[n,s])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(r,e,n){const s=r.type,o=(e?e.appContext:r.appContext)||emptyAppContext,l={uid:uid++,vnode:r,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(s,o),emitsOptions:normalizeEmitsOptions(s,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:s.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=emit.bind(null,l),r.ce&&r.ce(l),l}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const r=getGlobalThis(),e=(n,s)=>{let o;return(o=r[n])||(o=r[n]=[]),o.push(s),l=>{o.length>1?o.forEach(a=>a(l)):o[0](l)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",n=>currentInstance=n),setInSSRSetupState=e("__VUE_SSR_SETTERS__",n=>isInSSRComponentSetup=n)}const setCurrentInstance=r=>{const e=currentInstance;return internalSetCurrentInstance(r),r.scope.on(),()=>{r.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(r){return r.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(r,e=!1,n=!1){e&&setInSSRSetupState(e);const{props:s,children:o}=r.vnode,l=isStatefulComponent(r);initProps(r,s,l,e),initSlots(r,o,n||e);const a=l?setupStatefulComponent(r,e):void 0;return e&&setInSSRSetupState(!1),a}function setupStatefulComponent(r,e){const n=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,PublicInstanceProxyHandlers);const{setup:s}=n;if(s){pauseTracking();const o=r.setupContext=s.length>1?createSetupContext(r):null,l=setCurrentInstance(r),a=callWithErrorHandling(s,r,0,[r.props,o]),c=isPromise(a);if(resetTracking(),l(),(c||r.sp)&&!isAsyncWrapper(r)&&markAsyncBoundary(r),c){if(a.then(unsetCurrentInstance,unsetCurrentInstance),e)return a.then(u=>{handleSetupResult(r,u)}).catch(u=>{handleError(u,r,0)});r.asyncDep=a}else handleSetupResult(r,a)}else finishComponentSetup(r)}function handleSetupResult(r,e,n){isFunction(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:isObject(e)&&(r.setupState=proxyRefs(e)),finishComponentSetup(r)}function finishComponentSetup(r,e,n){const s=r.type;r.render||(r.render=s.render||NOOP);{const o=setCurrentInstance(r);pauseTracking();try{applyOptions(r)}finally{resetTracking(),o()}}}const attrsProxyHandlers={get(r,e){return track(r,"get",""),r[e]}};function createSetupContext(r){const e=n=>{r.exposed=n||{}};return{attrs:new Proxy(r.attrs,attrsProxyHandlers),slots:r.slots,emit:r.emit,expose:e}}function getComponentPublicInstance(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(proxyRefs(markRaw(r.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](r)},has(e,n){return n in e||n in publicPropertiesMap}})):r.proxy}const classifyRE=/(?:^|[-_])\w/g,classify=r=>r.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(r,e=!0){return isFunction(r)?r.displayName||r.name:r.name||e&&r.__name}function formatComponentName(r,e,n=!1){let s=getComponentName(e);if(!s&&e.__file){const o=e.__file.match(/([^/\\]+)\.\w+$/);o&&(s=o[1])}if(!s&&r){const o=l=>{for(const a in l)if(l[a]===e)return a};s=o(r.components)||r.parent&&o(r.parent.type.components)||o(r.appContext.components)}return s?classify(s):n?"App":"Anonymous"}function isClassComponent(r){return isFunction(r)&&"__vccOpts"in r}const computed=(r,e)=>computed$1(r,e,isInSSRComponentSetup);function h$1(r,e,n){try{setBlockTracking(-1);const s=arguments.length;return s===2?isObject(e)&&!isArray(e)?isVNode(e)?createVNode(r,null,[e]):createVNode(r,e):createVNode(r,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&isVNode(n)&&(n=[n]),createVNode(r,e,n))}finally{setBlockTracking(1)}}const version="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:r=>r})}catch{}const unsafeToTrustedHTML=policy?r=>policy.createHTML(r):r=>r,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc$1=typeof document<"u"?document:null,templateContainer=doc$1&&doc$1.createElement("template"),nodeOps={insert:(r,e,n)=>{e.insertBefore(r,n||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,n,s)=>{const o=e==="svg"?doc$1.createElementNS(svgNS,r):e==="mathml"?doc$1.createElementNS(mathmlNS,r):n?doc$1.createElement(r,{is:n}):doc$1.createElement(r);return r==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:r=>doc$1.createTextNode(r),createComment:r=>doc$1.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>doc$1.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,n,s,o,l){const a=n?n.previousSibling:e.lastChild;if(o&&(o===l||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===l||!(o=o.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(s==="svg"?`<svg>${r}</svg>`:s==="mathml"?`<math>${r}</math>`:r);const c=templateContainer.content;if(s==="svg"||s==="mathml"){const u=c.firstChild;for(;u.firstChild;)c.appendChild(u.firstChild);c.removeChild(u)}e.insertBefore(c,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(r,e,n){const s=r[vtcKey];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?r.removeAttribute("class"):n?r.setAttribute("class",e):r.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={name:"show",beforeMount(r,{value:e},{transition:n}){r[vShowOriginalDisplay]=r.style.display==="none"?"":r.style.display,n&&e?n.beforeEnter(r):setDisplay(r,e)},mounted(r,{value:e},{transition:n}){n&&e&&n.enter(r)},updated(r,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(r),setDisplay(r,!0),s.enter(r)):s.leave(r,()=>{setDisplay(r,!1)}):setDisplay(r,e))},beforeUnmount(r,{value:e}){setDisplay(r,e)}};function setDisplay(r,e){r.style.display=e?r[vShowOriginalDisplay]:"none",r[vShowHidden]=!e}const CSS_VAR_TEXT=Symbol(""),displayRE=/(?:^|;)\s*display\s*:/;function patchStyle(r,e,n){const s=r.style,o=isString(n);let l=!1;if(n&&!o){if(e)if(isString(e))for(const a of e.split(";")){const c=a.slice(0,a.indexOf(":")).trim();n[c]==null&&setStyle(s,c,"")}else for(const a in e)n[a]==null&&setStyle(s,a,"");for(const a in n)a==="display"&&(l=!0),setStyle(s,a,n[a])}else if(o){if(e!==n){const a=s[CSS_VAR_TEXT];a&&(n+=";"+a),s.cssText=n,l=displayRE.test(n)}}else e&&r.removeAttribute("style");vShowOriginalDisplay in r&&(r[vShowOriginalDisplay]=l?s.display:"",r[vShowHidden]&&(s.display="none"))}const importantRE=/\s*!important$/;function setStyle(r,e,n){if(isArray(n))n.forEach(s=>setStyle(r,e,s));else if(n==null&&(n=""),e.startsWith("--"))r.setProperty(e,n);else{const s=autoPrefix(r,e);importantRE.test(n)?r.setProperty(hyphenate(s),n.replace(importantRE,""),"important"):r[s]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(r,e){const n=prefixCache[e];if(n)return n;let s=camelize(e);if(s!=="filter"&&s in r)return prefixCache[e]=s;s=capitalize(s);for(let o=0;o<prefixes.length;o++){const l=prefixes[o]+s;if(l in r)return prefixCache[e]=l}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(r,e,n,s,o,l=isSpecialBooleanAttr(e)){s&&e.startsWith("xlink:")?n==null?r.removeAttributeNS(xlinkNS,e.slice(6,e.length)):r.setAttributeNS(xlinkNS,e,n):n==null||l&&!includeBooleanAttr(n)?r.removeAttribute(e):r.setAttribute(e,l?"":isSymbol(n)?String(n):n)}function patchDOMProp(r,e,n,s,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(r[e]=e==="innerHTML"?unsafeToTrustedHTML(n):n);return}const l=r.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){const c=l==="OPTION"?r.getAttribute("value")||"":r.value,u=n==null?r.type==="checkbox"?"on":"":String(n);(c!==u||!("_value"in r))&&(r.value=u),n==null&&r.removeAttribute(e),r._value=n;return}let a=!1;if(n===""||n==null){const c=typeof r[e];c==="boolean"?n=includeBooleanAttr(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{r[e]=n}catch{}a&&r.removeAttribute(o||e)}function addEventListener(r,e,n,s){r.addEventListener(e,n,s)}function removeEventListener(r,e,n,s){r.removeEventListener(e,n,s)}const veiKey=Symbol("_vei");function patchEvent(r,e,n,s,o=null){const l=r[veiKey]||(r[veiKey]={}),a=l[e];if(s&&a)a.value=s;else{const[c,u]=parseName(e);if(s){const f=l[e]=createInvoker(s,o);addEventListener(r,c,f,u)}else a&&(removeEventListener(r,c,a,u),l[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(r){let e;if(optionsModifierRE.test(r)){e={};let s;for(;s=r.match(optionsModifierRE);)r=r.slice(0,r.length-s[0].length),e[s[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):hyphenate(r.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(r,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(s,n.value),e,5,[s])};return n.value=r,n.attached=getNow(),n}function patchStopImmediatePropagation(r,e){if(isArray(e)){const n=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{n.call(r),r._stopped=!0},e.map(s=>o=>!o._stopped&&s&&s(o))}else return e}const isNativeOn=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,patchProp=(r,e,n,s,o,l)=>{const a=o==="svg";e==="class"?patchClass(r,s,a):e==="style"?patchStyle(r,n,s):isOn(e)?isModelListener(e)||patchEvent(r,e,n,s,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(r,e,s,a))?(patchDOMProp(r,e,s),!r.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(r,e,s,a,l,e!=="value")):r._isVueCE&&(/[A-Z]/.test(e)||!isString(s))?patchDOMProp(r,camelize(e),s,l,e):(e==="true-value"?r._trueValue=s:e==="false-value"&&(r._falseValue=s),patchAttr(r,e,s,a))};function shouldSetAsProp(r,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in r&&isNativeOn(e)&&isFunction(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&r.tagName==="IFRAME"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=r.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return isNativeOn(e)&&isString(n)?!1:e in r}const getModelAssigner=r=>{const e=r.props["onUpdate:modelValue"]||!1;return isArray(e)?n=>invokeArrayFns(e,n):e};function onCompositionStart(r){r.target.composing=!0}function onCompositionEnd(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign");function castValue(r,e,n){return e&&(r=r.trim()),n&&(r=looseToNumber(r)),r}const vModelText={created(r,{modifiers:{lazy:e,trim:n,number:s}},o){r[assignKey]=getModelAssigner(o);const l=s||o.props&&o.props.type==="number";addEventListener(r,e?"change":"input",a=>{a.target.composing||r[assignKey](castValue(r.value,n,l))}),(n||l)&&addEventListener(r,"change",()=>{r.value=castValue(r.value,n,l)}),e||(addEventListener(r,"compositionstart",onCompositionStart),addEventListener(r,"compositionend",onCompositionEnd),addEventListener(r,"change",onCompositionEnd))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,oldValue:n,modifiers:{lazy:s,trim:o,number:l}},a){if(r[assignKey]=getModelAssigner(a),r.composing)return;const c=(l||r.type==="number")&&!/^0\d/.test(r.value)?looseToNumber(r.value):r.value,u=e??"";c!==u&&(document.activeElement===r&&r.type!=="range"&&(s&&e===n||o&&r.value.trim()===u)||(r.value=u))}},vModelCheckbox={deep:!0,created(r,e,n){r[assignKey]=getModelAssigner(n),addEventListener(r,"change",()=>{const s=r._modelValue,o=getValue(r),l=r.checked,a=r[assignKey];if(isArray(s)){const c=looseIndexOf(s,o),u=c!==-1;if(l&&!u)a(s.concat(o));else if(!l&&u){const f=[...s];f.splice(c,1),a(f)}}else if(isSet(s)){const c=new Set(s);l?c.add(o):c.delete(o),a(c)}else a(getCheckboxValue(r,l))})},mounted:setChecked,beforeUpdate(r,e,n){r[assignKey]=getModelAssigner(n),setChecked(r,e,n)}};function setChecked(r,{value:e,oldValue:n},s){r._modelValue=e;let o;if(isArray(e))o=looseIndexOf(e,s.props.value)>-1;else if(isSet(e))o=e.has(s.props.value);else{if(e===n)return;o=looseEqual(e,getCheckboxValue(r,!0))}r.checked!==o&&(r.checked=o)}const vModelSelect={deep:!0,created(r,{value:e,modifiers:{number:n}},s){const o=isSet(e);addEventListener(r,"change",()=>{const l=Array.prototype.filter.call(r.options,a=>a.selected).map(a=>n?looseToNumber(getValue(a)):getValue(a));r[assignKey](r.multiple?o?new Set(l):l:l[0]),r._assigning=!0,nextTick(()=>{r._assigning=!1})}),r[assignKey]=getModelAssigner(s)},mounted(r,{value:e}){setSelected(r,e)},beforeUpdate(r,e,n){r[assignKey]=getModelAssigner(n)},updated(r,{value:e}){r._assigning||setSelected(r,e)}};function setSelected(r,e){const n=r.multiple,s=isArray(e);if(!(n&&!s&&!isSet(e))){for(let o=0,l=r.options.length;o<l;o++){const a=r.options[o],c=getValue(a);if(n)if(s){const u=typeof c;u==="string"||u==="number"?a.selected=e.some(f=>String(f)===String(c)):a.selected=looseIndexOf(e,c)>-1}else a.selected=e.has(c);else if(looseEqual(getValue(a),e)){r.selectedIndex!==o&&(r.selectedIndex=o);return}}!n&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function getValue(r){return"_value"in r?r._value:r.value}function getCheckboxValue(r,e){const n=e?"_trueValue":"_falseValue";return n in r?r[n]:e}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>systemModifiers.some(n=>r[`${n}Key`]&&!e.includes(n))},withModifiers=(r,e)=>{const n=r._withMods||(r._withMods={}),s=e.join(".");return n[s]||(n[s]=(o,...l)=>{for(let a=0;a<e.length;a++){const c=modifierGuards[e[a]];if(c&&c(o,e))return}return r(o,...l)})},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...r)=>{const e=ensureRenderer().createApp(...r),{mount:n}=e;return e.mount=s=>{const o=normalizeContainer(s);if(!o)return;const l=e._component;!isFunction(l)&&!l.render&&!l.template&&(l.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const a=n(o,!1,resolveRootNamespace(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},e};function resolveRootNamespace(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function normalizeContainer(r){return isString(r)?document.querySelector(r):r}function useWebSocket(){const r=ref([]),e=ref([]);let n=null;function s(){const d=location.protocol==="https:"?"wss:":"ws:";n=new WebSocket(`${d}//${location.host}/__network_mock_ws__`),n.onmessage=g=>{const m=JSON.parse(g.data);m.type==="rules"?r.value=m.data||[]:m.type==="logs"?e.value=m.data||[]:m.type==="log"&&e.value.unshift(m.data)},n.onclose=()=>setTimeout(s,1e3)}function o(d,g){n==null||n.send(JSON.stringify({type:d,data:g}))}const l=d=>o("add-rule",d),a=d=>o("update-rule",d),c=d=>o("toggle-rule",d),u=d=>o("delete-rule",d),f=()=>o("clear-logs",null);return onMounted(s),onUnmounted(()=>n==null?void 0:n.close()),{rules:r,logs:e,addRule:l,updateRule:a,toggleRule:c,deleteRule:u,clearLogs:f}}const _hoisted_1$b={class:"header"},_hoisted_2$8={class:"tabs"},_sfc_main$d=defineComponent({__name:"AppHeader",props:{activeTab:{}},emits:["update:activeTab"],setup(r,{emit:e}){const n=e;return(s,o)=>(openBlock(),createElementBlock("div",_hoisted_1$b,[o[2]||(o[2]=createBaseVNode("div",{class:"logo"},[createBaseVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[createBaseVNode("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})]),createTextVNode(" Network Mock ")],-1)),createBaseVNode("div",_hoisted_2$8,[createBaseVNode("button",{class:normalizeClass(["tab",{active:r.activeTab==="network"}]),onClick:o[0]||(o[0]=l=>n("update:activeTab","network"))},"Network",2),createBaseVNode("button",{class:normalizeClass(["tab",{active:r.activeTab==="rules"}]),onClick:o[1]||(o[1]=l=>n("update:activeTab","rules"))},"Rules",2)])]))}}),_export_sfc=(r,e)=>{const n=r.__vccOpts||r;for(const[s,o]of e)n[s]=o;return n},AppHeader=_export_sfc(_sfc_main$d,[["__scopeId","data-v-b868c482"]]);function stringifyJSON(r){if(!r)return"";if(typeof r=="string")try{return JSON.stringify(JSON.parse(r),null,2)}catch{return r}return JSON.stringify(r,null,2)}const visible=ref(!1),isEdit=ref(!1),viewOnly=ref(!1),form=reactive({id:"",url:"",method:"GET",status:200,delay:0,response:"",headers:"",enabled:!0,createdAt:0});function useRuleModal(){function r(){isEdit.value=!1,viewOnly.value=!1,Object.assign(form,{id:"",url:"",method:"GET",status:200,delay:0,response:"",headers:"",enabled:!0,createdAt:0}),visible.value=!0}function e(l){isEdit.value=!0,viewOnly.value=!1,Object.assign(form,{...l,response:typeof l.response=="object"?JSON.stringify(l.response,null,2):l.response||"",headers:l.headers?JSON.stringify(l.headers,null,2):""}),visible.value=!0}function n(l){isEdit.value=!1,viewOnly.value=!0,Object.assign(form,{...l,response:typeof l.response=="object"?JSON.stringify(l.response,null,2):l.response||"",headers:l.headers?JSON.stringify(l.headers,null,2):""}),visible.value=!0}function s(l){isEdit.value=!1,viewOnly.value=!1,Object.assign(form,{id:"",url:l.url,method:l.method,status:l.status,delay:0,response:typeof l.responseBody=="object"?JSON.stringify(l.responseBody,null,2):l.responseBody||"",headers:"",enabled:!0,createdAt:0}),visible.value=!0}function o(){visible.value=!1}return{visible,isEdit,viewOnly,form,openAdd:r,openEdit:e,openView:n,openFromLog:s,close:o}}const _hoisted_1$a={class:"sub-modal-header"},_hoisted_2$7={class:"sub-modal-title"},_hoisted_3$4={key:0,class:"sub-modal-tip"},_hoisted_4$4={class:"sub-modal-actions"},_hoisted_5$4={class:"sub-modal-body"},_sfc_main$c=defineComponent({__name:"SubModal",props:{visible:{type:Boolean},title:{},tip:{},width:{},height:{}},emits:["close"],setup(r,{emit:e}){const n=e;return(s,o)=>(openBlock(),createBlock(Teleport,{to:"body"},[r.visible?(openBlock(),createElementBlock("div",{key:0,class:"sub-modal-overlay",onClick:o[1]||(o[1]=withModifiers(l=>n("close"),["self"]))},[createBaseVNode("div",{class:"sub-modal",style:normalizeStyle({maxWidth:r.width||"800px",height:r.height})},[createBaseVNode("div",_hoisted_1$a,[createBaseVNode("span",_hoisted_2$7,toDisplayString(r.title),1),r.tip?(openBlock(),createElementBlock("span",_hoisted_3$4,toDisplayString(r.tip),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_4$4,[renderSlot(s.$slots,"actions",{},void 0),createBaseVNode("button",{class:"sub-modal-close",onClick:o[0]||(o[0]=l=>n("close"))},[...o[2]||(o[2]=[createBaseVNode("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[createBaseVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])])])]),createBaseVNode("div",_hoisted_5$4,[renderSlot(s.$slots,"default",{},void 0)])],4)])):createCommentVNode("",!0)]))}}),SubModal=_export_sfc(_sfc_main$c,[["__scopeId","data-v-7f43eec3"]]),_hoisted_1$9={class:"search-box"},_hoisted_2$6=["placeholder"],_sfc_main$b=defineComponent({__name:"SearchBox",props:mergeModels({placeholder:{}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const e=useModel(r,"modelValue");return(n,s)=>(openBlock(),createElementBlock("div",_hoisted_1$9,[s[1]||(s[1]=createBaseVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[createBaseVNode("circle",{cx:"11",cy:"11",r:"8"}),createBaseVNode("path",{d:"M21 21l-4.35-4.35"})],-1)),withDirectives(createBaseVNode("input",{type:"text",class:"search-input","onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o),placeholder:r.placeholder||"Search..."},null,8,_hoisted_2$6),[[vModelText,e.value]])]))}}),SearchBox=_export_sfc(_sfc_main$b,[["__scopeId","data-v-003c4be9"]]),_sfc_main$a=defineComponent({__name:"MethodBadge",props:{method:{}},setup(r){return(e,n)=>(openBlock(),createElementBlock("span",{class:normalizeClass(["method-badge",r.method])},toDisplayString(r.method),3))}}),MethodBadge=_export_sfc(_sfc_main$a,[["__scopeId","data-v-5ac0a434"]]),_sfc_main$9=defineComponent({__name:"ToggleSwitch",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(r){const e=useModel(r,"modelValue");return(n,s)=>(openBlock(),createElementBlock("label",{class:"toggle",onClick:s[1]||(s[1]=withModifiers(()=>{},["stop"]))},[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o)},null,512),[[vModelCheckbox,e.value]]),s[2]||(s[2]=createBaseVNode("span",{class:"toggle-track"},null,-1)),s[3]||(s[3]=createBaseVNode("span",{class:"toggle-thumb"},null,-1))]))}}),ToggleSwitch=_export_sfc(_sfc_main$9,[["__scopeId","data-v-581fc0ab"]]),_hoisted_1$8={key:0,value:""},_sfc_main$8=defineComponent({__name:"MethodSelect",props:mergeModels({showAll:{type:Boolean}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const e=useModel(r,"modelValue");return(n,s)=>withDirectives((openBlock(),createElementBlock("select",{class:"method-select","onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o)},[r.showAll?(openBlock(),createElementBlock("option",_hoisted_1$8,"All Methods")):createCommentVNode("",!0),s[1]||(s[1]=createStaticVNode('<option value="GET" data-v-ad85a28b>GET</option><option value="POST" data-v-ad85a28b>POST</option><option value="PUT" data-v-ad85a28b>PUT</option><option value="DELETE" data-v-ad85a28b>DELETE</option><option value="PATCH" data-v-ad85a28b>PATCH</option>',5))],512)),[[vModelSelect,e.value]])}}),MethodSelect=_export_sfc(_sfc_main$8,[["__scopeId","data-v-ad85a28b"]]);let rangeFrom=[],rangeTo=[];(()=>{let r="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<r.length;e++)(e%2?rangeTo:rangeFrom).push(n=n+r[e])})();function isExtendingChar(r){if(r<768)return!1;for(let e=0,n=rangeFrom.length;;){let s=e+n>>1;if(r<rangeFrom[s])n=s;else if(r>=rangeTo[s])e=s+1;else return!0;if(e==n)return!1}}function isRegionalIndicator(r){return r>=127462&&r<=127487}const ZWJ=8205;function findClusterBreak$1(r,e,n=!0,s=!0){return(n?nextClusterBreak:prevClusterBreak)(r,e,s)}function nextClusterBreak(r,e,n){if(e==r.length)return e;e&&surrogateLow$1(r.charCodeAt(e))&&surrogateHigh$1(r.charCodeAt(e-1))&&e--;let s=codePointAt$1(r,e);for(e+=codePointSize$1(s);e<r.length;){let o=codePointAt$1(r,e);if(s==ZWJ||o==ZWJ||n&&isExtendingChar(o))e+=codePointSize$1(o),s=o;else if(isRegionalIndicator(o)){let l=0,a=e-2;for(;a>=0&&isRegionalIndicator(codePointAt$1(r,a));)l++,a-=2;if(l%2==0)break;e+=2}else break}return e}function prevClusterBreak(r,e,n){for(;e>0;){let s=nextClusterBreak(r,e-2,n);if(s<e)return s;e--}return 0}function codePointAt$1(r,e){let n=r.charCodeAt(e);if(!surrogateHigh$1(n)||e+1==r.length)return n;let s=r.charCodeAt(e+1);return surrogateLow$1(s)?(n-55296<<10)+(s-56320)+65536:n}function surrogateLow$1(r){return r>=56320&&r<57344}function surrogateHigh$1(r){return r>=55296&&r<56320}function codePointSize$1(r){return r<65536?1:2}class Text{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,s){[e,n]=clip(this,e,n);let o=[];return this.decompose(0,e,o,2),s.length&&s.decompose(0,s.length,o,3),this.decompose(n,this.length,o,1),TextNode.from(o,this.length-(n-e)+s.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=clip(this,e,n);let s=[];return this.decompose(e,n,s,0),TextNode.from(s,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),s=this.length-this.scanIdentical(e,-1),o=new RawTextCursor(this),l=new RawTextCursor(e);for(let a=n,c=n;;){if(o.next(a),l.next(a),a=0,o.lineBreak!=l.lineBreak||o.done!=l.done||o.value!=l.value)return!1;if(c+=o.value.length,o.done||c>=s)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,n=this.length){return new PartialTextCursor(this,e,n)}iterLines(e,n){let s;if(e==null)s=this.iter();else{n==null&&(n=this.lines+1);let o=this.line(e).from;s=this.iterRange(o,Math.max(o,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new LineCursor(s)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Text.empty:e.length<=32?new TextLeaf(e):TextNode.from(TextLeaf.split(e,[]))}}class TextLeaf extends Text{constructor(e,n=textLength(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,s,o){for(let l=0;;l++){let a=this.text[l],c=o+a.length;if((n?s:c)>=e)return new Line(o,c,s,a);o=c+1,s++}}decompose(e,n,s,o){let l=e<=0&&n>=this.length?this:new TextLeaf(sliceText(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(o&1){let a=s.pop(),c=appendText(l.text,a.text.slice(),0,l.length);if(c.length<=32)s.push(new TextLeaf(c,a.length+l.length));else{let u=c.length>>1;s.push(new TextLeaf(c.slice(0,u)),new TextLeaf(c.slice(u)))}}else s.push(l)}replace(e,n,s){if(!(s instanceof TextLeaf))return super.replace(e,n,s);[e,n]=clip(this,e,n);let o=appendText(this.text,appendText(s.text,sliceText(this.text,0,e)),n),l=this.length+s.length-(n-e);return o.length<=32?new TextLeaf(o,l):TextNode.from(TextLeaf.split(o,[]),l)}sliceString(e,n=this.length,s=`
`){[e,n]=clip(this,e,n);let o="";for(let l=0,a=0;l<=n&&a<this.text.length;a++){let c=this.text[a],u=l+c.length;l>e&&a&&(o+=s),e<u&&n>l&&(o+=c.slice(Math.max(0,e-l),n-l)),l=u+1}return o}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let s=[],o=-1;for(let l of e)s.push(l),o+=l.length+1,s.length==32&&(n.push(new TextLeaf(s,o)),s=[],o=-1);return o>-1&&n.push(new TextLeaf(s,o)),n}}class TextNode extends Text{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let s of e)this.lines+=s.lines}lineInner(e,n,s,o){for(let l=0;;l++){let a=this.children[l],c=o+a.length,u=s+a.lines-1;if((n?u:c)>=e)return a.lineInner(e,n,s,o);o=c+1,s=u+1}}decompose(e,n,s,o){for(let l=0,a=0;a<=n&&l<this.children.length;l++){let c=this.children[l],u=a+c.length;if(e<=u&&n>=a){let f=o&((a<=e?1:0)|(u>=n?2:0));a>=e&&u<=n&&!f?s.push(c):c.decompose(e-a,n-a,s,f)}a=u+1}}replace(e,n,s){if([e,n]=clip(this,e,n),s.lines<this.lines)for(let o=0,l=0;o<this.children.length;o++){let a=this.children[o],c=l+a.length;if(e>=l&&n<=c){let u=a.replace(e-l,n-l,s),f=this.lines-a.lines+u.lines;if(u.lines<f>>4&&u.lines>f>>6){let d=this.children.slice();return d[o]=u,new TextNode(d,this.length-(n-e)+s.length)}return super.replace(l,c,u)}l=c+1}return super.replace(e,n,s)}sliceString(e,n=this.length,s=`
`){[e,n]=clip(this,e,n);let o="";for(let l=0,a=0;l<this.children.length&&a<=n;l++){let c=this.children[l],u=a+c.length;a>e&&l&&(o+=s),e<u&&n>a&&(o+=c.sliceString(e-a,n-a,s)),a=u+1}return o}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof TextNode))return 0;let s=0,[o,l,a,c]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;o+=n,l+=n){if(o==a||l==c)return s;let u=this.children[o],f=e.children[l];if(u!=f)return s+u.scanIdentical(f,n);s+=u.length+1}}static from(e,n=e.reduce((s,o)=>s+o.length+1,-1)){let s=0;for(let v of e)s+=v.lines;if(s<32){let v=[];for(let k of e)k.flatten(v);return new TextLeaf(v,n)}let o=Math.max(32,s>>5),l=o<<1,a=o>>1,c=[],u=0,f=-1,d=[];function g(v){let k;if(v.lines>l&&v instanceof TextNode)for(let A of v.children)g(A);else v.lines>a&&(u>a||!u)?(m(),c.push(v)):v instanceof TextLeaf&&u&&(k=d[d.length-1])instanceof TextLeaf&&v.lines+k.lines<=32?(u+=v.lines,f+=v.length+1,d[d.length-1]=new TextLeaf(k.text.concat(v.text),k.length+1+v.length)):(u+v.lines>o&&m(),u+=v.lines,f+=v.length+1,d.push(v))}function m(){u!=0&&(c.push(d.length==1?d[0]:TextNode.from(d,f)),f=-1,u=d.length=0)}for(let v of e)g(v);return m(),c.length==1?c[0]:new TextNode(c,n)}}Text.empty=new TextLeaf([""],0);function textLength(r){let e=-1;for(let n of r)e+=n.length+1;return e}function appendText(r,e,n=0,s=1e9){for(let o=0,l=0,a=!0;l<r.length&&o<=s;l++){let c=r[l],u=o+c.length;u>=n&&(u>s&&(c=c.slice(0,s-o)),o<n&&(c=c.slice(n-o)),a?(e[e.length-1]+=c,a=!1):e.push(c)),o=u+1}return e}function sliceText(r,e,n){return appendText(r,[""],e,n)}class RawTextCursor{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let s=this.nodes.length-1,o=this.nodes[s],l=this.offsets[s],a=l>>1,c=o instanceof TextLeaf?o.text.length:o.children.length;if(a==(n>0?c:0)){if(s==0)return this.done=!0,this.value="",this;n>0&&this.offsets[s-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(n>0?0:1)){if(this.offsets[s]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(o instanceof TextLeaf){let u=o.text[a+(n<0?-1:0)];if(this.offsets[s]+=n,u.length>Math.max(0,e))return this.value=e==0?u:n>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=o.children[a+(n<0?-1:0)];e>u.length?(e-=u.length,this.offsets[s]+=n):(n<0&&this.offsets[s]--,this.nodes.push(u),this.offsets.push(n>0?1:(u instanceof TextLeaf?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,n,s){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,n>s?-1:1),this.pos=n>s?e.length:0,this.from=Math.min(n,s),this.to=Math.max(n,s)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let s=n<0?this.pos-this.from:this.to-this.pos;e>s&&(e=s),s-=e;let{value:o}=this.cursor.next(e);return this.pos+=(o.length+e)*n,this.value=o.length<=s?o:n<0?o.slice(o.length-s):o.slice(0,s),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:s,value:o}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):s?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(e,n,s,o){this.from=e,this.to=n,this.number=s,this.text=o}get length(){return this.to-this.from}}function clip(r,e,n){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,n))]}function findClusterBreak(r,e,n=!0,s=!0){return findClusterBreak$1(r,e,n,s)}function surrogateLow(r){return r>=56320&&r<57344}function surrogateHigh(r){return r>=55296&&r<56320}function codePointAt(r,e){let n=r.charCodeAt(e);if(!surrogateHigh(n)||e+1==r.length)return n;let s=r.charCodeAt(e+1);return surrogateLow(s)?(n-55296<<10)+(s-56320)+65536:n}function fromCodePoint(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function codePointSize(r){return r<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let s=this.sections[n+1];e+=s<0?this.sections[n]:s}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,s=0,o=0;n<this.sections.length;){let l=this.sections[n++],a=this.sections[n++];a<0?(e(s,o,l),o+=l):o+=a,s+=l}}iterChangedRanges(e,n=!1){iterChanges(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?e.push(s,o):e.push(o,s)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,n=!1){return e.empty?this:mapSet(this,e,n)}mapPos(e,n=-1,s=MapMode.Simple){let o=0,l=0;for(let a=0;a<this.sections.length;){let c=this.sections[a++],u=this.sections[a++],f=o+c;if(u<0){if(f>e)return l+(e-o);l+=c}else{if(s!=MapMode.Simple&&f>=e&&(s==MapMode.TrackDel&&o<e&&f>e||s==MapMode.TrackBefore&&o<e||s==MapMode.TrackAfter&&f>e))return null;if(f>e||f==e&&n<0&&!c)return e==o||n<0?l:l+u;l+=u}o=f}if(e>o)throw new RangeError(`Position ${e} is out of range for changeset of length ${o}`);return l}touchesRange(e,n=e){for(let s=0,o=0;s<this.sections.length&&o<=n;){let l=this.sections[s++],a=this.sections[s++],c=o+l;if(a>=0&&o<=n&&c>=e)return o<e&&c>n?"cover":!0;o=c}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];e+=(e?" ":"")+s+(o>=0?":"+o:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(n,s,o,l,a)=>e=e.replace(o,o+(s-n),a),!1),e}mapDesc(e,n=!1){return mapSet(this,e,n,!0)}invert(e){let n=this.sections.slice(),s=[];for(let o=0,l=0;o<n.length;o+=2){let a=n[o],c=n[o+1];if(c>=0){n[o]=c,n[o+1]=a;let u=o>>1;for(;s.length<u;)s.push(Text.empty);s.push(a?e.slice(l,l+a):Text.empty)}l+=a}return new ChangeSet(n,s)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,n=!1){return e.empty?this:mapSet(this,e,n,!0)}iterChanges(e,n=!1){iterChanges(this,e,n)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let n=[],s=[],o=[],l=new SectionIter(this);e:for(let a=0,c=0;;){let u=a==e.length?1e9:e[a++];for(;c<u||c==u&&l.len==0;){if(l.done)break e;let d=Math.min(l.len,u-c);addSection(o,d,-1);let g=l.ins==-1?-1:l.off==0?l.ins:0;addSection(n,d,g),g>0&&addInsert(s,n,l.text),l.forward(d),c+=d}let f=e[a++];for(;c<f;){if(l.done)break e;let d=Math.min(l.len,f-c);addSection(n,d,-1),addSection(o,d,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(d),c+=d}}return{changes:new ChangeSet(n,s),filtered:ChangeDesc.create(o)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let s=this.sections[n],o=this.sections[n+1];o<0?e.push(s):o==0?e.push([s]):e.push([s].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,s){let o=[],l=[],a=0,c=null;function u(d=!1){if(!d&&!o.length)return;a<n&&addSection(o,n-a,-1);let g=new ChangeSet(o,l);c=c?c.compose(g.map(c)):g,o=[],l=[],a=0}function f(d){if(Array.isArray(d))for(let g of d)f(g);else if(d instanceof ChangeSet){if(d.length!=n)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${n})`);u(),c=c?c.compose(d.map(c)):d}else{let{from:g,to:m=g,insert:v}=d;if(g>m||g<0||m>n)throw new RangeError(`Invalid change range ${g} to ${m} (in doc of length ${n})`);let k=v?typeof v=="string"?Text.of(v.split(s||DefaultSplit)):v:Text.empty,A=k.length;if(g==m&&A==0)return;g<a&&u(),g>a&&addSection(o,g-a,-1),addSection(o,m-g,A),addInsert(l,o,k),a=m}}return f(e),u(!c),c}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],s=[];for(let o=0;o<e.length;o++){let l=e[o];if(typeof l=="number")n.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((a,c)=>c&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)n.push(l[0],0);else{for(;s.length<o;)s.push(Text.empty);s[o]=Text.of(l.slice(1)),n.push(l[0],s[o].length)}}}return new ChangeSet(n,s)}static createSet(e,n){return new ChangeSet(e,n)}}function addSection(r,e,n,s=!1){if(e==0&&n<=0)return;let o=r.length-2;o>=0&&n<=0&&n==r[o+1]?r[o]+=e:o>=0&&e==0&&r[o]==0?r[o+1]+=n:s?(r[o]+=e,r[o+1]+=n):r.push(e,n)}function addInsert(r,e,n){if(n.length==0)return;let s=e.length-2>>1;if(s<r.length)r[r.length-1]=r[r.length-1].append(n);else{for(;r.length<s;)r.push(Text.empty);r.push(n)}}function iterChanges(r,e,n){let s=r.inserted;for(let o=0,l=0,a=0;a<r.sections.length;){let c=r.sections[a++],u=r.sections[a++];if(u<0)o+=c,l+=c;else{let f=o,d=l,g=Text.empty;for(;f+=c,d+=u,u&&s&&(g=g.append(s[a-2>>1])),!(n||a==r.sections.length||r.sections[a+1]<0);)c=r.sections[a++],u=r.sections[a++];e(o,f,l,d,g),o=f,l=d}}}function mapSet(r,e,n,s=!1){let o=[],l=s?[]:null,a=new SectionIter(r),c=new SectionIter(e);for(let u=-1;;){if(a.done&&c.len||c.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&c.ins==-1){let f=Math.min(a.len,c.len);addSection(o,f,-1),a.forward(f),c.forward(f)}else if(c.ins>=0&&(a.ins<0||u==a.i||a.off==0&&(c.len<a.len||c.len==a.len&&!n))){let f=c.len;for(addSection(o,c.ins,-1);f;){let d=Math.min(a.len,f);a.ins>=0&&u<a.i&&a.len<=d&&(addSection(o,0,a.ins),l&&addInsert(l,o,a.text),u=a.i),a.forward(d),f-=d}c.next()}else if(a.ins>=0){let f=0,d=a.len;for(;d;)if(c.ins==-1){let g=Math.min(d,c.len);f+=g,d-=g,c.forward(g)}else if(c.ins==0&&c.len<d)d-=c.len,c.next();else break;addSection(o,f,u<a.i?a.ins:0),l&&u<a.i&&addInsert(l,o,a.text),u=a.i,a.forward(a.len-d)}else{if(a.done&&c.done)return l?ChangeSet.createSet(o,l):ChangeDesc.create(o);throw new Error("Mismatched change set lengths")}}}function composeSets(r,e,n=!1){let s=[],o=n?[]:null,l=new SectionIter(r),a=new SectionIter(e);for(let c=!1;;){if(l.done&&a.done)return o?ChangeSet.createSet(s,o):ChangeDesc.create(s);if(l.ins==0)addSection(s,l.len,0,c),l.next();else if(a.len==0&&!a.done)addSection(s,0,a.ins,c),o&&addInsert(o,s,a.text),a.next();else{if(l.done||a.done)throw new Error("Mismatched change set lengths");{let u=Math.min(l.len2,a.len),f=s.length;if(l.ins==-1){let d=a.ins==-1?-1:a.off?0:a.ins;addSection(s,u,d,c),o&&d&&addInsert(o,s,a.text)}else a.ins==-1?(addSection(s,l.off?0:l.len,u,c),o&&addInsert(o,s,l.textBit(u))):(addSection(s,l.off?0:l.len,a.off?0:a.ins,c),o&&!a.off&&addInsert(o,s,a.text));c=(l.ins>u||a.ins>=0&&a.len>u)&&(c||s.length>f),l.forward2(u),a.forward(u)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Text.empty:e[n]}textBit(e){let{inserted:n}=this.set,s=this.i-2>>1;return s>=n.length&&!e?Text.empty:n[s].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,n,s){this.from=e,this.to=n,this.flags=s}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let s,o;return this.empty?s=o=e.mapPos(this.from,n):(s=e.mapPos(this.from,1),o=e.mapPos(this.to,-1)),s==this.from&&o==this.to?this:new SelectionRange(s,o,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return EditorSelection.range(e,n);let s=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return EditorSelection.range(this.anchor,s)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,n,s){return new SelectionRange(e,n,s)}}class EditorSelection{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:EditorSelection.create(this.ranges.map(s=>s.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let s=0;s<this.ranges.length;s++)if(!this.ranges[s].eq(e.ranges[s],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(e,n=!0){return EditorSelection.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let s=this.ranges.slice();return s[n]=e,EditorSelection.create(s,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map(n=>SelectionRange.fromJSON(n)),e.main)}static single(e,n=e){return new EditorSelection([EditorSelection.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let s=0,o=0;o<e.length;o++){let l=e[o];if(l.empty?l.from<=s:l.from<s)return EditorSelection.normalized(e.slice(),n);s=l.to}return new EditorSelection(e,n)}static cursor(e,n=0,s,o){return SelectionRange.create(e,e,(n==0?0:n<0?8:16)|(s==null?7:Math.min(6,s))|(o??16777215)<<6)}static range(e,n,s,o){let l=(s??16777215)<<6|(o==null?7:Math.min(6,o));return n<e?SelectionRange.create(n,e,48|l):SelectionRange.create(e,n,(n>e?8:0)|l)}static normalized(e,n=0){let s=e[n];e.sort((o,l)=>o.from-l.from),n=e.indexOf(s);for(let o=1;o<e.length;o++){let l=e[o],a=e[o-1];if(l.empty?l.from<=a.to:l.from<a.to){let c=a.from,u=Math.max(l.to,a.to);o<=n&&n--,e.splice(--o,2,l.anchor>l.head?EditorSelection.range(u,c):EditorSelection.range(c,u))}}return new EditorSelection(e,n)}}function checkSelection(r,e){for(let n of r.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,n,s,o,l){this.combine=e,this.compareInput=n,this.compare=s,this.isStatic=o,this.id=nextID++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new Facet(e.combine||(n=>n),e.compareInput||((n,s)=>n===s),e.compare||(e.combine?(n,s)=>n===s:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,n)}from(e,n){return n||(n=s=>s),this.compute([e],s=>n(s.field(e)))}}function sameArray$1(r,e){return r==e||r.length==e.length&&r.every((n,s)=>n===e[s])}class FacetProvider{constructor(e,n,s,o){this.dependencies=e,this.facet=n,this.type=s,this.value=o,this.id=nextID++}dynamicSlot(e){var n;let s=this.value,o=this.facet.compareInput,l=this.id,a=e[l]>>1,c=this.type==2,u=!1,f=!1,d=[];for(let g of this.dependencies)g=="doc"?u=!0:g=="selection"?f=!0:((n=e[g.id])!==null&&n!==void 0?n:1)&1||d.push(e[g.id]);return{create(g){return g.values[a]=s(g),1},update(g,m){if(u&&m.docChanged||f&&(m.docChanged||m.selection)||ensureAll(g,d)){let v=s(g);if(c?!compareArray(v,g.values[a],o):!o(v,g.values[a]))return g.values[a]=v,1}return 0},reconfigure:(g,m)=>{let v,k=m.config.address[l];if(k!=null){let A=getAddr(m,k);if(this.dependencies.every(E=>E instanceof Facet?m.facet(E)===g.facet(E):E instanceof StateField?m.field(E,!1)==g.field(E,!1):!0)||(c?compareArray(v=s(g),A,o):o(v=s(g),A)))return g.values[a]=A,0}else v=s(g);return g.values[a]=v,1}}}}function compareArray(r,e,n){if(r.length!=e.length)return!1;for(let s=0;s<r.length;s++)if(!n(r[s],e[s]))return!1;return!0}function ensureAll(r,e){let n=!1;for(let s of e)ensureAddr(r,s)&1&&(n=!0);return n}function dynamicFacetSlot(r,e,n){let s=n.map(u=>r[u.id]),o=n.map(u=>u.type),l=s.filter(u=>!(u&1)),a=r[e.id]>>1;function c(u){let f=[];for(let d=0;d<s.length;d++){let g=getAddr(u,s[d]);if(o[d]==2)for(let m of g)f.push(m);else f.push(g)}return e.combine(f)}return{create(u){for(let f of s)ensureAddr(u,f);return u.values[a]=c(u),1},update(u,f){if(!ensureAll(u,l))return 0;let d=c(u);return e.compare(d,u.values[a])?0:(u.values[a]=d,1)},reconfigure(u,f){let d=ensureAll(u,s),g=f.config.facets[e.id],m=f.facet(e);if(g&&!d&&sameArray$1(n,g))return u.values[a]=m,0;let v=c(u);return e.compare(v,m)?(u.values[a]=m,0):(u.values[a]=v,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,n,s,o,l){this.id=e,this.createF=n,this.updateF=s,this.compareF=o,this.spec=l,this.provides=void 0}static define(e){let n=new StateField(nextID++,e.create,e.update,e.compare||((s,o)=>s===o),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(initField).find(s=>s.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:s=>(s.values[n]=this.create(s),1),update:(s,o)=>{let l=s.values[n],a=this.updateF(l,o);return this.compareF(l,a)?0:(s.values[n]=a,1)},reconfigure:(s,o)=>{let l=s.facet(initField),a=o.facet(initField),c;return(c=l.find(u=>u.field==this))&&c!=a.find(u=>u.field==this)?(s.values[n]=c.create(s),1):o.config.address[this.id]!=null?(s.values[n]=o.field(this),0):(s.values[n]=this.create(s),1)}}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(r){return e=>new PrecExtension(e,r)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,n){this.inner=e,this.prec=n}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,n){this.compartment=e,this.inner=n}}class Configuration{constructor(e,n,s,o,l,a){for(this.base=e,this.compartments=n,this.dynamicSlots=s,this.address=o,this.staticValues=l,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,s){let o=[],l=Object.create(null),a=new Map;for(let m of flatten(e,n,a))m instanceof StateField?o.push(m):(l[m.facet.id]||(l[m.facet.id]=[])).push(m);let c=Object.create(null),u=[],f=[];for(let m of o)c[m.id]=f.length<<1,f.push(v=>m.slot(v));let d=s==null?void 0:s.config.facets;for(let m in l){let v=l[m],k=v[0].facet,A=d&&d[m]||[];if(v.every(E=>E.type==0))if(c[k.id]=u.length<<1|1,sameArray$1(A,v))u.push(s.facet(k));else{let E=k.combine(v.map(N=>N.value));u.push(s&&k.compare(E,s.facet(k))?s.facet(k):E)}else{for(let E of v)E.type==0?(c[E.id]=u.length<<1|1,u.push(E.value)):(c[E.id]=f.length<<1,f.push(N=>E.dynamicSlot(N)));c[k.id]=f.length<<1,f.push(E=>dynamicFacetSlot(E,k,v))}}let g=f.map(m=>m(c));return new Configuration(e,a,g,c,u,l)}}function flatten(r,e,n){let s=[[],[],[],[],[]],o=new Map;function l(a,c){let u=o.get(a);if(u!=null){if(u<=c)return;let f=s[u].indexOf(a);f>-1&&s[u].splice(f,1),a instanceof CompartmentInstance&&n.delete(a.compartment)}if(o.set(a,c),Array.isArray(a))for(let f of a)l(f,c);else if(a instanceof CompartmentInstance){if(n.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let f=e.get(a.compartment)||a.inner;n.set(a.compartment,f),l(f,c)}else if(a instanceof PrecExtension)l(a.inner,a.prec);else if(a instanceof StateField)s[c].push(a),a.provides&&l(a.provides,c);else if(a instanceof FacetProvider)s[c].push(a),a.facet.extensions&&l(a.facet.extensions,Prec_.default);else{let f=a.extension;if(!f)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(f,c)}}return l(r,Prec_.default),s.reduce((a,c)=>a.concat(c))}function ensureAddr(r,e){if(e&1)return 2;let n=e>>1,s=r.status[n];if(s==4)throw new Error("Cyclic dependency between fields and/or facets");if(s&2)return s;r.status[n]=4;let o=r.computeSlot(r,r.config.dynamicSlots[n]);return r.status[n]=2|o}function getAddr(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:r=>r.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:r=>r.length?r[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:r=>r.length?r[0]:!1});class Annotation{constructor(e,n){this.type=e,this.value=n}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new StateEffect(this.type,n)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let s=[];for(let o of e){let l=o.map(n);l&&s.push(l)}return s}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,n,s,o,l,a){this.startState=e,this.changes=n,this.selection=s,this.effects=o,this.annotations=l,this.scrollIntoView=a,this._doc=null,this._state=null,s&&checkSelection(s,n.newLength),l.some(c=>c.type==Transaction.time)||(this.annotations=l.concat(Transaction.time.of(Date.now())))}static create(e,n,s,o,l,a){return new Transaction(e,n,s,o,l,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Transaction.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(r,e){let n=[];for(let s=0,o=0;;){let l,a;if(s<r.length&&(o==e.length||e[o]>=r[s]))l=r[s++],a=r[s++];else if(o<e.length)l=e[o++],a=e[o++];else return n;!n.length||n[n.length-1]<l?n.push(l,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function mergeTransaction(r,e,n){var s;let o,l,a;return n?(o=e.changes,l=ChangeSet.empty(e.changes.length),a=r.changes.compose(e.changes)):(o=e.changes.map(r.changes),l=r.changes.mapDesc(e.changes,!0),a=r.changes.compose(o)),{changes:a,selection:e.selection?e.selection.map(l):(s=r.selection)===null||s===void 0?void 0:s.map(o),effects:StateEffect.mapEffects(r.effects,o).concat(StateEffect.mapEffects(e.effects,l)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(r,e,n){let s=e.selection,o=asArray$1(e.annotations);return e.userEvent&&(o=o.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],n,r.facet(lineSeparator)),selection:s&&(s instanceof EditorSelection?s:EditorSelection.single(s.anchor,s.head)),effects:asArray$1(e.effects),annotations:o,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(r,e,n){let s=resolveTransactionInner(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(n=!1);let a=!!e[l].sequential;s=mergeTransaction(s,resolveTransactionInner(r,e[l],a?s.changes.newLength:r.doc.length),a)}let o=Transaction.create(r,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return extendTransaction(n?filterTransaction(o):o)}function filterTransaction(r){let e=r.startState,n=!0;for(let o of e.facet(changeFilter)){let l=o(r);if(l===!1){n=!1;break}Array.isArray(l)&&(n=n===!0?l:joinRanges(n,l))}if(n!==!0){let o,l;if(n===!1)l=r.changes.invertedDesc,o=ChangeSet.empty(e.doc.length);else{let a=r.changes.filter(n);o=a.changes,l=a.filtered.mapDesc(a.changes).invertedDesc}r=Transaction.create(e,o,r.selection&&r.selection.map(l),StateEffect.mapEffects(r.effects,l),r.annotations,r.scrollIntoView)}let s=e.facet(transactionFilter);for(let o=s.length-1;o>=0;o--){let l=s[o](r);l instanceof Transaction?r=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Transaction?r=l[0]:r=resolveTransaction(e,asArray$1(l),!1)}return r}function extendTransaction(r){let e=r.startState,n=e.facet(transactionExtender),s=r;for(let o=n.length-1;o>=0;o--){let l=n[o](r);l&&Object.keys(l).length&&(s=mergeTransaction(s,resolveTransactionInner(e,l,r.changes.newLength),!0))}return s==r?r:Transaction.create(e,r.changes,r.selection,s.effects,s.annotations,s.scrollIntoView)}const none$2=[];function asArray$1(r){return r==null?none$2:Array.isArray(r)?r:[r]}var CharCategory=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(r){if(wordChar)return wordChar.test(r);for(let e=0;e<r.length;e++){let n=r[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||nonASCIISingleCaseWordChar.test(n)))return!0}return!1}function makeCategorizer(r){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let n=0;n<r.length;n++)if(e.indexOf(r[n])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(e,n,s,o,l,a){this.config=e,this.doc=n,this.selection=s,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=l,a&&(a._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)ensureAddr(this,c<<1);this.computeSlot=null}field(e,n=!0){let s=this.config.address[e.id];if(s==null){if(n)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,s),getAddr(this,s)}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let n=this.config,{base:s,compartments:o}=n;for(let c of e.effects)c.is(Compartment.reconfigure)?(n&&(o=new Map,n.compartments.forEach((u,f)=>o.set(f,u)),n=null),o.set(c.value.compartment,c.value.extension)):c.is(StateEffect.reconfigure)?(n=null,s=c.value):c.is(StateEffect.appendConfig)&&(n=null,s=asArray$1(s).concat(c.value));let l;n?l=e.startState.values.slice():(n=Configuration.resolve(s,o,this),l=new EditorState(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(u,f)=>f.reconfigure(u,this),null).values);let a=e.startState.facet(allowMultipleSelections)?e.newSelection:e.newSelection.asSingle();new EditorState(n,e.newDoc,a,l,(c,u)=>u.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:EditorSelection.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,s=e(n.ranges[0]),o=this.changes(s.changes),l=[s.range],a=asArray$1(s.effects);for(let c=1;c<n.ranges.length;c++){let u=e(n.ranges[c]),f=this.changes(u.changes),d=f.map(o);for(let m=0;m<c;m++)l[m]=l[m].map(d);let g=o.mapDesc(f,!0);l.push(u.range.map(g)),o=o.compose(d),a=StateEffect.mapEffects(a,d).concat(StateEffect.mapEffects(asArray$1(u.effects),g))}return{changes:o,selection:EditorSelection.create(l,n.mainIndex),effects:a}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ensureAddr(this,n),getAddr(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let s in e){let o=e[s];o instanceof StateField&&this.config.address[o.id]!=null&&(n[s]=o.spec.toJSON(this.field(e[s]),this))}return n}static fromJSON(e,n={},s){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(s){for(let l in s)if(Object.prototype.hasOwnProperty.call(e,l)){let a=s[l],c=e[l];o.push(a.init(u=>a.spec.fromJSON(c,u)))}}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:n.extensions?o.concat([n.extensions]):o})}static create(e={}){let n=Configuration.resolve(e.extensions||[],new Map),s=e.doc instanceof Text?e.doc:Text.of((e.doc||"").split(n.staticFacet(EditorState.lineSeparator)||DefaultSplit)),o=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(o,s.length),n.staticFacet(allowMultipleSelections)||(o=o.asSingle()),new EditorState(n,s,o,n.dynamicSlots.map(()=>null),(l,a)=>a.create(l),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(e,...n){for(let s of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(s,e)){e=s[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(s,o)=>{if(o=="$")return"$";let l=+(o||1);return!l||l>n.length?s:n[l-1]})),e}languageDataAt(e,n,s=-1){let o=[];for(let l of this.facet(languageData))for(let a of l(this,n,s))Object.prototype.hasOwnProperty.call(a,e)&&o.push(a[e]);return o}charCategorizer(e){return makeCategorizer(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:s,length:o}=this.doc.lineAt(e),l=this.charCategorizer(e),a=e-s,c=e-s;for(;a>0;){let u=findClusterBreak(n,a,!1);if(l(n.slice(u,a))!=CharCategory.Word)break;a=u}for(;c<o;){let u=findClusterBreak(n,c);if(l(n.slice(c,u))!=CharCategory.Word)break;c=u}return a==c?null:EditorSelection.range(a+s,c+s)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:r=>r.length?r[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(r,e){let n=Object.keys(r),s=Object.keys(e);return n.length==s.length&&n.every(o=>r[o]==e[o])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(r,e,n={}){let s={};for(let o of r)for(let l of Object.keys(o)){let a=o[l],c=s[l];if(c===void 0)s[l]=a;else if(!(c===a||a===void 0))if(Object.hasOwnProperty.call(n,l))s[l]=n[l](c,a);else throw new Error("Config merge conflict for field "+l)}for(let o in e)s[o]===void 0&&(s[o]=e[o]);return s}class RangeValue{eq(e){return this==e}range(e,n=e){return Range$1.create(e,n,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class ei{constructor(e,n,s){this.from=e,this.to=n,this.value=s}static create(e,n,s){return new ei(e,n,s)}};function cmpRange(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class Chunk{constructor(e,n,s,o){this.from=e,this.to=n,this.value=s,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(e,n,s,o=0){let l=s?this.to:this.from;for(let a=o,c=l.length;;){if(a==c)return a;let u=a+c>>1,f=l[u]-e||(s?this.value[u].endSide:this.value[u].startSide)-n;if(u==a)return f>=0?a:c;f>=0?c=u:a=u+1}}between(e,n,s,o){for(let l=this.findIndex(n,-1e9,!0),a=this.findIndex(s,1e9,!1,l);l<a;l++)if(o(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,n){let s=[],o=[],l=[],a=-1,c=-1;for(let u=0;u<this.value.length;u++){let f=this.value[u],d=this.from[u]+e,g=this.to[u]+e,m,v;if(d==g){let k=n.mapPos(d,f.startSide,f.mapMode);if(k==null||(m=v=k,f.startSide!=f.endSide&&(v=n.mapPos(d,f.endSide),v<m)))continue}else if(m=n.mapPos(d,f.startSide),v=n.mapPos(g,f.endSide),m>v||m==v&&f.startSide>0&&f.endSide<=0)continue;(v-m||f.endSide-f.startSide)<0||(a<0&&(a=m),f.point&&(c=Math.max(c,v-m)),s.push(f),o.push(m-a),l.push(v-a))}return{mapped:s.length?new Chunk(o,l,s,c):null,pos:a}}}class RangeSet{constructor(e,n,s,o){this.chunkPos=e,this.chunk=n,this.nextLayer=s,this.maxPoint=o}static create(e,n,s,o){return new RangeSet(e,n,s,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:s=!1,filterFrom:o=0,filterTo:l=this.length}=e,a=e.filter;if(n.length==0&&!a)return this;if(s&&(n=n.slice().sort(cmpRange)),this.isEmpty)return n.length?RangeSet.of(n):this;let c=new LayerCursor(this,null,-1).goto(0),u=0,f=[],d=new RangeSetBuilder;for(;c.value||u<n.length;)if(u<n.length&&(c.from-n[u].from||c.startSide-n[u].value.startSide)>=0){let g=n[u++];d.addInner(g.from,g.to,g.value)||f.push(g)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(u==n.length||this.chunkEnd(c.chunkIndex)<n[u].from)&&(!a||o>this.chunkEnd(c.chunkIndex)||l<this.chunkPos[c.chunkIndex])&&d.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!a||o>c.to||l<c.from||a(c.from,c.to,c.value))&&(d.addInner(c.from,c.to,c.value)||f.push(Range$1.create(c.from,c.to,c.value))),c.next());return d.finishInner(this.nextLayer.isEmpty&&!f.length?RangeSet.empty:this.nextLayer.update({add:f,filter:a,filterFrom:o,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],s=[],o=-1;for(let a=0;a<this.chunk.length;a++){let c=this.chunkPos[a],u=this.chunk[a],f=e.touchesRange(c,c+u.length);if(f===!1)o=Math.max(o,u.maxPoint),n.push(u),s.push(e.mapPos(c));else if(f===!0){let{mapped:d,pos:g}=u.map(c,e);d&&(o=Math.max(o,d.maxPoint),n.push(d),s.push(g))}}let l=this.nextLayer.map(e);return n.length==0?l:new RangeSet(s,n,l||RangeSet.empty,o)}between(e,n,s){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o];if(n>=l&&e<=l+a.length&&a.between(l,e-l,n-l,s)===!1)return}this.nextLayer.between(e,n,s)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return HeapCursor.from(e).goto(n)}static compare(e,n,s,o,l=-1){let a=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=l),c=n.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=l),u=findSharedChunks(a,c,s),f=new SpanCursor(a,u,l),d=new SpanCursor(c,u,l);s.iterGaps((g,m,v)=>compare(f,g,d,m,v,o)),s.empty&&s.length==0&&compare(f,0,d,0,0,o)}static eq(e,n,s=0,o){o==null&&(o=999999999);let l=e.filter(d=>!d.isEmpty&&n.indexOf(d)<0),a=n.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(l.length!=a.length)return!1;if(!l.length)return!0;let c=findSharedChunks(l,a),u=new SpanCursor(l,c,0).goto(s),f=new SpanCursor(a,c,0).goto(s);for(;;){if(u.to!=f.to||!sameValues(u.active,f.active)||u.point&&(!f.point||!u.point.eq(f.point)))return!1;if(u.to>o)return!0;u.next(),f.next()}}static spans(e,n,s,o,l=-1){let a=new SpanCursor(e,null,l).goto(n),c=n,u=a.openStart;for(;;){let f=Math.min(a.to,s);if(a.point){let d=a.activeForPoint(a.to),g=a.pointFrom<n?d.length+1:a.point.startSide<0?d.length:Math.min(d.length,u);o.point(c,f,a.point,d,g,a.pointRank),u=Math.min(a.openEnd(f),d.length)}else f>c&&(o.span(c,f,a.active,u),u=a.openEnd(f));if(a.to>s)return u+(a.point&&a.to>s?1:0);c=a.to,a.next()}}static of(e,n=!1){let s=new RangeSetBuilder;for(let o of e instanceof Range$1?[e]:n?lazySort(e):e)s.add(o.from,o.to,o.value);return s.finish()}static join(e){if(!e.length)return RangeSet.empty;let n=e[e.length-1];for(let s=e.length-2;s>=0;s--)for(let o=e[s];o!=RangeSet.empty;o=o.nextLayer)n=new RangeSet(o.chunkPos,o.chunk,n,Math.max(o.maxPoint,n.maxPoint));return n}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(r){if(r.length>1)for(let e=r[0],n=1;n<r.length;n++){let s=r[n];if(cmpRange(e,s)>0)return r.slice().sort(cmpRange);e=s}return r}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,s){this.addInner(e,n,s)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,n,s)}addInner(e,n,s){let o=e-this.lastTo||s.startSide-this.last.endSide;if(o<=0&&(e-this.lastFrom||s.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return o<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=s,this.lastFrom=e,this.lastTo=n,this.value.push(s),s.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let s=n.value.length-1;return this.last=n.value[s],this.lastFrom=n.from[s]+e,this.lastTo=n.to[s]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function findSharedChunks(r,e,n){let s=new Map;for(let l of r)for(let a=0;a<l.chunk.length;a++)l.chunk[a].maxPoint<=0&&s.set(l.chunk[a],l.chunkPos[a]);let o=new Set;for(let l of e)for(let a=0;a<l.chunk.length;a++){let c=s.get(l.chunk[a]);c!=null&&(n?n.mapPos(c):c)==l.chunkPos[a]&&!(n!=null&&n.touchesRange(c,c+l.chunk[a].length))&&o.add(l.chunk[a])}return o}class LayerCursor{constructor(e,n,s,o=0){this.layer=e,this.skip=n,this.minPoint=s,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,s){for(;this.chunkIndex<this.layer.chunk.length;){let o=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(o)||this.layer.chunkEnd(this.chunkIndex)<e||o.maxPoint<this.minPoint))break;this.chunkIndex++,s=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!s||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],s=e+n.from[this.rangeIndex];if(this.from=s,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,n=null,s=-1){let o=[];for(let l=0;l<e.length;l++)for(let a=e[l];!a.isEmpty;a=a.nextLayer)a.maxPoint>=s&&o.push(new LayerCursor(a,n,s,l));return o.length==1?o[0]:new HeapCursor(o)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let s of this.heap)s.goto(e,n);for(let s=this.heap.length>>1;s>=0;s--)heapBubble(this.heap,s);return this.next(),this}forward(e,n){for(let s of this.heap)s.forward(e,n);for(let s=this.heap.length>>1;s>=0;s--)heapBubble(this.heap,s);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(r,e){for(let n=r[e];;){let s=(e<<1)+1;if(s>=r.length)break;let o=r[s];if(s+1<r.length&&o.compare(r[s+1])>=0&&(o=r[s+1],s++),n.compare(o)<0)break;r[s]=n,r[e]=o,e=s}}class SpanCursor{constructor(e,n,s){this.minPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,n,s)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let n=0,{value:s,to:o,rank:l}=this.cursor;for(;n<this.activeRank.length&&(l-this.activeRank[n]||o-this.activeTo[n])>0;)n++;insert(this.active,n,s),insert(this.activeTo,n,o),insert(this.activeRank,n,l),e&&insert(e,n,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let s=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),s&&remove(s,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(s),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(s){this.openStart=0;for(let o=s.length-1;o>=0&&s[o]<e;o--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let s=this.active.length-1;s>=0&&!(this.activeRank[s]<this.pointRank);s--)(this.activeTo[s]>e||this.activeTo[s]==e&&this.active[s].endSide>=this.point.endSide)&&n.push(this.active[s]);return n.reverse()}openEnd(e){let n=0;for(let s=this.activeTo.length-1;s>=0&&this.activeTo[s]>e;s--)n++;return n}}function compare(r,e,n,s,o,l){r.goto(e),n.goto(s);let a=s+o,c=s,u=s-e;for(;;){let f=r.to+u-n.to,d=f||r.endSide-n.endSide,g=d<0?r.to+u:n.to,m=Math.min(g,a);if(r.point||n.point?r.point&&n.point&&(r.point==n.point||r.point.eq(n.point))&&sameValues(r.activeForPoint(r.to),n.activeForPoint(n.to))||l.comparePoint(c,m,r.point,n.point):m>c&&!sameValues(r.active,n.active)&&l.compareRange(c,m,r.active,n.active),g>a)break;(f||r.openEnd!=n.openEnd)&&l.boundChange&&l.boundChange(g),c=g,d<=0&&r.next(),d>=0&&n.next()}}function sameValues(r,e){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!=e[n]&&!r[n].eq(e[n]))return!1;return!0}function remove(r,e){for(let n=e,s=r.length-1;n<s;n++)r[n]=r[n+1];r.pop()}function insert(r,e,n){for(let s=r.length-1;s>=e;s--)r[s+1]=r[s];r[e]=n}function findMinIndex(r,e){let n=-1,s=1e9;for(let o=0;o<e.length;o++)(e[o]-s||r[o].endSide-r[n].endSide)<0&&(n=o,s=e[o]);return n}function countColumn(r,e,n=r.length){let s=0;for(let o=0;o<n&&o<r.length;)r.charCodeAt(o)==9?(s+=e-s%e,o++):(s++,o=findClusterBreak(r,o));return s}function findColumn(r,e,n,s){for(let o=0,l=0;;){if(l>=e)return o;if(o==r.length)break;l+=r.charCodeAt(o)==9?n-l%n:1,o=findClusterBreak(r,o)}return s===!0?-1:r.length}const C$1="",COUNT=typeof Symbol>"u"?"__"+C$1:Symbol.for(C$1),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(e,n){this.rules=[];let{finish:s}=n||{};function o(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function l(a,c,u,f){let d=[],g=/^@(\w+)\b/.exec(a[0]),m=g&&g[1]=="keyframes";if(g&&c==null)return u.push(a[0]+";");for(let v in c){let k=c[v];if(/&/.test(v))l(v.split(/,\s*/).map(A=>a.map(E=>A.replace(/&/,E))).reduce((A,E)=>A.concat(E)),k,u);else if(k&&typeof k=="object"){if(!g)throw new RangeError("The value of a property ("+v+") should be a primitive value.");l(o(v),k,d,m)}else k!=null&&d.push(v.replace(/_.*/,"").replace(/[A-Z]/g,A=>"-"+A.toLowerCase())+": "+k+";")}(d.length||m)&&u.push((s&&!g&&!f?a.map(s):a).join(", ")+" {"+d.join(" ")+"}")}for(let a in e)l(o(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C$1+e.toString(36)}static mount(e,n,s){let o=e[SET],l=s&&s.nonce;o?l&&o.setNonce(l):o=new StyleSet(e,l),o.mount(Array.isArray(n)?n:[n],e)}}let adoptedSet=new Map;class StyleSet{constructor(e,n){let s=e.ownerDocument||e,o=s.defaultView;if(!e.head&&e.adoptedStyleSheets&&o.CSSStyleSheet){let l=adoptedSet.get(s);if(l)return e[SET]=l;this.sheet=new o.CSSStyleSheet,adoptedSet.set(s,this)}else this.styleTag=s.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[SET]=this}mount(e,n){let s=this.sheet,o=0,l=0;for(let a=0;a<e.length;a++){let c=e[a],u=this.modules.indexOf(c);if(u<l&&u>-1&&(this.modules.splice(u,1),l--,u=-1),u==-1){if(this.modules.splice(l++,0,c),s)for(let f=0;f<c.rules.length;f++)s.insertRule(c.rules[f],o++)}else{for(;l<u;)o+=this.modules[l++].rules.length;o+=c.rules.length,l++}}if(s)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let a="";for(let u=0;u<this.modules.length;u++)a+=this.modules[u].getRules()+`
`;this.styleTag.textContent=a;let c=n.head||n;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(r){var e=mac&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||ie$1&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",n=!e&&r.key||(r.shiftKey?shift:base)[r.keyCode]||r.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function crelt(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){var o=n[s];typeof o=="string"?r.setAttribute(s,o):o!=null&&(r[s]=o)}e++}for(;e<arguments.length;e++)add(r,arguments[e]);return r}function add(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)add(r,e[n]);else throw new RangeError("Unsupported child node: "+e)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,safari,safari_version:safari?+(/\bVersion\/(\d+(\.\d+)?)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function combineAttrs(r,e){for(let n in r)n=="class"&&e.class?e.class+=" "+r.class:n=="style"&&e.style?e.style+=";"+r.style:e[n]=r[n];return e}const noAttrs$1=Object.create(null);function attrsEq(r,e,n){if(r==e)return!0;r||(r=noAttrs$1),e||(e=noAttrs$1);let s=Object.keys(r),o=Object.keys(e);if(s.length-0!=o.length-0)return!1;for(let l of s)if(l!=n&&(o.indexOf(l)==-1||r[l]!==e[l]))return!1;return!0}function setAttrs(r,e){for(let n=r.attributes.length-1;n>=0;n--){let s=r.attributes[n].name;e[s]==null&&r.removeAttribute(s)}for(let n in e){let s=e[n];n=="style"?r.style.cssText=s:r.getAttribute(n)!=s&&r.setAttribute(n,s)}}function updateAttrs(r,e,n){let s=!1;if(e)for(let o in e)n&&o in n||(s=!0,o=="style"?r.style.cssText="":r.removeAttribute(o));if(n)for(let o in n)e&&e[o]==n[o]||(s=!0,o=="style"?r.style.cssText=n[o]:r.setAttribute(o,n[o]));return s}function getAttrs(r){let e=Object.create(null);for(let n=0;n<r.attributes.length;n++){let s=r.attributes[n];e[s.name]=s.value}return e}class WidgetType{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,s){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var BlockType=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,n,s,o){super(),this.startSide=e,this.endSide=n,this.widget=s,this.spec=o}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),s=!!e.block;return n+=s&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new PointDecoration(e,n,n,s,e.widget||null,!1)}static replace(e){let n=!!e.block,s,o;if(e.isBlockGap)s=-5e8,o=4e8;else{let{start:l,end:a}=getInclusive(e,n);s=(l?n?-3e8:-1:5e8)-1,o=(a?n?2e8:1:-6e8)+1}return new PointDecoration(e,s,o,n,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,n=!1){return RangeSet.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:n,end:s}=getInclusive(e);super(n?-1:5e8,s?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?combineAttrs(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||noAttrs$1}eq(e){return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&attrsEq(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,n,s,o,l,a){super(n,s,l,e),this.block=o,this.isReplace=a,this.mapMode=o?n<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}PointDecoration.prototype.point=!0;function getInclusive(r,e=!1){let{inclusiveStart:n,inclusiveEnd:s}=r;return n==null&&(n=r.inclusive),s==null&&(s=r.inclusive),{start:n??e,end:s??e}}function widgetsEq(r,e){return r==e||!!(r&&e&&r.compare(e))}function addRange(r,e,n,s=0){let o=n.length-1;o>=0&&n[o]+s>=r?n[o]=Math.max(n[o],e):n.push(r,e)}class BlockWrapper extends RangeValue{constructor(e,n){super(),this.tagName=e,this.attributes=n}eq(e){return e==this||e instanceof BlockWrapper&&this.tagName==e.tagName&&attrsEq(this.attributes,e.attributes)}static create(e){return new BlockWrapper(e.tagName,e.attributes||noAttrs$1)}static set(e,n=!1){return RangeSet.of(e,n)}}BlockWrapper.prototype.startSide=BlockWrapper.prototype.endSide=-1;function getSelection(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function contains(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function hasSelection(r,e){if(!e.anchorNode)return!1;try{return contains(r,e.anchorNode)}catch{return!1}}function clientRectsFor(r){return r.nodeType==3?textRange(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function isEquivalentPosition(r,e,n,s){return n?scanFor(r,e,n,s,-1)||scanFor(r,e,n,s,1):!1}function domIndex(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function isBlockElement(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function scanFor(r,e,n,s,o){for(;;){if(r==n&&e==s)return!0;if(e==(o<0?0:maxOffset(r))){if(r.nodeName=="DIV")return!1;let l=r.parentNode;if(!l||l.nodeType!=1)return!1;e=domIndex(r)+(o<0?0:1),r=l}else if(r.nodeType==1){if(r=r.childNodes[e+(o<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=o<0?maxOffset(r):0}else return!1}}function maxOffset(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function flattenRect(r,e){let n=e?r.left:r.right;return{left:n,right:n,top:r.top,bottom:r.bottom}}function windowRect(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function getScale(r,e){let n=e.width/r.offsetWidth,s=e.height/r.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-r.offsetWidth)<1)&&(n=1),(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.height-r.offsetHeight)<1)&&(s=1),{scaleX:n,scaleY:s}}function scrollRectIntoView(r,e,n,s,o,l,a,c){let u=r.ownerDocument,f=u.defaultView||window;for(let d=r,g=!1;d&&!g;)if(d.nodeType==1){let m,v=d==u.body,k=1,A=1;if(v)m=windowRect(f);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(g=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let V=d.getBoundingClientRect();({scaleX:k,scaleY:A}=getScale(d,V)),m={left:V.left,right:V.left+d.clientWidth*k,top:V.top,bottom:V.top+d.clientHeight*A}}let E=0,N=0;if(o=="nearest")e.top<m.top?(N=e.top-(m.top+a),n>0&&e.bottom>m.bottom+N&&(N=e.bottom-m.bottom+a)):e.bottom>m.bottom&&(N=e.bottom-m.bottom+a,n<0&&e.top-N<m.top&&(N=e.top-(m.top+a)));else{let V=e.bottom-e.top,q=m.bottom-m.top;N=(o=="center"&&V<=q?e.top+V/2-q/2:o=="start"||o=="center"&&n<0?e.top-a:e.bottom-q+a)-m.top}if(s=="nearest"?e.left<m.left?(E=e.left-(m.left+l),n>0&&e.right>m.right+E&&(E=e.right-m.right+l)):e.right>m.right&&(E=e.right-m.right+l,n<0&&e.left<m.left+E&&(E=e.left-(m.left+l))):E=(s=="center"?e.left+(e.right-e.left)/2-(m.right-m.left)/2:s=="start"==c?e.left-l:e.right-(m.right-m.left)+l)-m.left,E||N)if(v)f.scrollBy(E,N);else{let V=0,q=0;if(N){let W=d.scrollTop;d.scrollTop+=N/A,q=(d.scrollTop-W)*A}if(E){let W=d.scrollLeft;d.scrollLeft+=E/k,V=(d.scrollLeft-W)*k}e={left:e.left-V,top:e.top-q,right:e.right-V,bottom:e.bottom-q},V&&Math.abs(V-E)<1&&(s="nearest"),q&&Math.abs(q-N)<1&&(o="nearest")}if(v)break;(e.top<m.top||e.bottom>m.bottom||e.left<m.left||e.right>m.right)&&(e={left:Math.max(e.left,m.left),right:Math.min(e.right,m.right),top:Math.max(e.top,m.top),bottom:Math.min(e.bottom,m.bottom)}),d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function scrollableParents(r){let e=r.ownerDocument,n,s;for(let o=r.parentNode;o&&!(o==e.body||n&&s);)if(o.nodeType==1)!s&&o.scrollHeight>o.clientHeight&&(s=o),!n&&o.scrollWidth>o.clientWidth&&(n=o),o=o.assignedSlot||o.parentNode;else if(o.nodeType==11)o=o.host;else break;return{x:n,y:s}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:s}=e;this.set(n,Math.min(e.anchorOffset,n?maxOffset(n):0),s,Math.min(e.focusOffset,s?maxOffset(s):0))}set(e,n,s,o){this.anchorNode=e,this.anchorOffset=n,this.focusNode=s,this.focusOffset=o}}let preventScrollSupported=null;browser.safari&&browser.safari_version>=26&&(preventScrollSupported=!1);function focusPreventScroll(r){if(r.setActive)return r.setActive();if(preventScrollSupported)return r.focus(preventScrollSupported);let e=[];for(let n=r;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(r.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let n=0;n<e.length;){let s=e[n++],o=e[n++],l=e[n++];s.scrollTop!=o&&(s.scrollTop=o),s.scrollLeft!=l&&(s.scrollLeft=l)}}}let scratchRange;function textRange(r,e,n=e){let s=scratchRange||(scratchRange=document.createRange());return s.setEnd(r,n),s.setStart(r,e),s}function dispatchKey(r,e,n,s){let o={key:e,code:e,keyCode:n,which:n,cancelable:!0};s&&({altKey:o.altKey,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,metaKey:o.metaKey}=s);let l=new KeyboardEvent("keydown",o);l.synthetic=!0,r.dispatchEvent(l);let a=new KeyboardEvent("keyup",o);return a.synthetic=!0,r.dispatchEvent(a),l.defaultPrevented||a.defaultPrevented}function getRoot(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function atElementStart(r,e){let n=e.focusNode,s=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=s)return!1;for(s=Math.min(s,maxOffset(n));;)if(s){if(n.nodeType!=1)return!1;let o=n.childNodes[s-1];o.contentEditable=="false"?s--:(n=o,s=maxOffset(n))}else{if(n==r)return!0;s=domIndex(n),n=n.parentNode}}function isScrolledToBottom(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function textNodeBefore(r,e){for(let n=r,s=e;;){if(n.nodeType==3&&s>0)return{node:n,offset:s};if(n.nodeType==1&&s>0){if(n.contentEditable=="false")return null;n=n.childNodes[s-1],s=maxOffset(n)}else if(n.parentNode&&!isBlockElement(n))s=domIndex(n),n=n.parentNode;else return null}}function textNodeAfter(r,e){for(let n=r,s=e;;){if(n.nodeType==3&&s<n.nodeValue.length)return{node:n,offset:s};if(n.nodeType==1&&s<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[s],s=0}else if(n.parentNode&&!isBlockElement(n))s=domIndex(n)+1,n=n.parentNode;else return null}}class DOMPos{constructor(e,n,s=!0){this.node=e,this.offset=n,this.precise=s}static before(e,n){return new DOMPos(e.parentNode,domIndex(e),n)}static after(e,n){return new DOMPos(e.parentNode,domIndex(e)+1,n)}}var Direction=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(r){let e=[];for(let n=0;n<r.length;n++)e.push(1<<+r[n]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),n=r.charCodeAt(1);Brackets[e]=n,Brackets[n]=-e}function charType(r){return r<=247?LowTypes[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?ArabicTypes[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(e,n,s){this.from=e,this.to=n,this.level=s}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,s,o){let l=-1;for(let a=0;a<e.length;a++){let c=e[a];if(c.from<=n&&c.to>=n){if(c.level==s)return a;(l<0||(o!=0?o<0?c.from<n:c.to>n:e[l].level>c.level))&&(l=a)}}if(l<0)throw new RangeError("Index out of range");return l}}function isolatesEq(r,e){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++){let s=r[n],o=e[n];if(s.from!=o.from||s.to!=o.to||s.direction!=o.direction||!isolatesEq(s.inner,o.inner))return!1}return!0}const types=[];function computeCharTypes(r,e,n,s,o){for(let l=0;l<=s.length;l++){let a=l?s[l-1].to:e,c=l<s.length?s[l].from:n,u=l?256:o;for(let f=a,d=u,g=u;f<c;f++){let m=charType(r.charCodeAt(f));m==512?m=d:m==8&&g==4&&(m=16),types[f]=m==4?2:m,m&7&&(g=m),d=m}for(let f=a,d=u,g=u;f<c;f++){let m=types[f];if(m==128)f<c-1&&d==types[f+1]&&d&24?m=types[f]=d:types[f]=256;else if(m==64){let v=f+1;for(;v<c&&types[v]==64;)v++;let k=f&&d==8||v<n&&types[v]==8?g==1?1:8:256;for(let A=f;A<v;A++)types[A]=k;f=v-1}else m==8&&g==1&&(types[f]=1);d=m,m&7&&(g=m)}}}function processBracketPairs(r,e,n,s,o){let l=o==1?2:1;for(let a=0,c=0,u=0;a<=s.length;a++){let f=a?s[a-1].to:e,d=a<s.length?s[a].from:n;for(let g=f,m,v,k;g<d;g++)if(v=Brackets[m=r.charCodeAt(g)])if(v<0){for(let A=c-3;A>=0;A-=3)if(BracketStack[A+1]==-v){let E=BracketStack[A+2],N=E&2?o:E&4?E&1?l:o:0;N&&(types[g]=types[BracketStack[A]]=N),c=A;break}}else{if(BracketStack.length==189)break;BracketStack[c++]=g,BracketStack[c++]=m,BracketStack[c++]=u}else if((k=types[g])==2||k==1){let A=k==o;u=A?0:1;for(let E=c-3;E>=0;E-=3){let N=BracketStack[E+2];if(N&2)break;if(A)BracketStack[E+2]|=2;else{if(N&4)break;BracketStack[E+2]|=4}}}}}function processNeutrals(r,e,n,s){for(let o=0,l=s;o<=n.length;o++){let a=o?n[o-1].to:r,c=o<n.length?n[o].from:e;for(let u=a;u<c;){let f=types[u];if(f==256){let d=u+1;for(;;)if(d==c){if(o==n.length)break;d=n[o++].to,c=o<n.length?n[o].from:e}else if(types[d]==256)d++;else break;let g=l==1,m=(d<e?types[d]:s)==1,v=g==m?g?1:2:s;for(let k=d,A=o,E=A?n[A-1].to:r;k>u;)k==E&&(k=n[--A].from,E=A?n[A-1].to:r),types[--k]=v;u=d}else l=f,u++}}}function emitSpans(r,e,n,s,o,l,a){let c=s%2?2:1;if(s%2==o%2)for(let u=e,f=0;u<n;){let d=!0,g=!1;if(f==l.length||u<l[f].from){let A=types[u];A!=c&&(d=!1,g=A==16)}let m=!d&&c==1?[]:null,v=d?s:s+1,k=u;e:for(;;)if(f<l.length&&k==l[f].from){if(g)break e;let A=l[f];if(!d)for(let E=A.to,N=f+1;;){if(E==n)break e;if(N<l.length&&l[N].from==E)E=l[N++].to;else{if(types[E]==c)break e;break}}if(f++,m)m.push(A);else{A.from>u&&a.push(new BidiSpan(u,A.from,v));let E=A.direction==LTR!=!(v%2);computeSectionOrder(r,E?s+1:s,o,A.inner,A.from,A.to,a),u=A.to}k=A.to}else{if(k==n||(d?types[k]!=c:types[k]==c))break;k++}m?emitSpans(r,u,k,s+1,o,m,a):u<k&&a.push(new BidiSpan(u,k,v)),u=k}else for(let u=n,f=l.length;u>e;){let d=!0,g=!1;if(!f||u>l[f-1].to){let A=types[u-1];A!=c&&(d=!1,g=A==16)}let m=!d&&c==1?[]:null,v=d?s:s+1,k=u;e:for(;;)if(f&&k==l[f-1].to){if(g)break e;let A=l[--f];if(!d)for(let E=A.from,N=f;;){if(E==e)break e;if(N&&l[N-1].to==E)E=l[--N].from;else{if(types[E-1]==c)break e;break}}if(m)m.push(A);else{A.to<u&&a.push(new BidiSpan(A.to,u,v));let E=A.direction==LTR!=!(v%2);computeSectionOrder(r,E?s+1:s,o,A.inner,A.from,A.to,a),u=A.from}k=A.from}else{if(k==e||(d?types[k-1]!=c:types[k-1]==c))break;k--}m?emitSpans(r,k,u,s+1,o,m,a):k<u&&a.push(new BidiSpan(k,u,v)),u=k}}function computeSectionOrder(r,e,n,s,o,l,a){let c=e%2?2:1;computeCharTypes(r,o,l,s,c),processBracketPairs(r,o,l,s,c),processNeutrals(o,l,s,c),emitSpans(r,o,l,e,n,s,a)}function computeOrder(r,e,n){if(!r)return[new BidiSpan(0,0,e==RTL?1:0)];if(e==LTR&&!n.length&&!BidiRE.test(r))return trivialOrder(r.length);if(n.length)for(;r.length>types.length;)types[types.length]=256;let s=[],o=e==LTR?0:1;return computeSectionOrder(r,o,o,n,0,r.length,s),s}function trivialOrder(r){return[new BidiSpan(0,r,0)]}let movedOver="";function moveVisually(r,e,n,s,o){var l;let a=s.head-r.from,c=BidiSpan.find(e,a,(l=s.bidiLevel)!==null&&l!==void 0?l:-1,s.assoc),u=e[c],f=u.side(o,n);if(a==f){let m=c+=o?1:-1;if(m<0||m>=e.length)return null;u=e[c=m],a=u.side(!o,n),f=u.side(o,n)}let d=findClusterBreak(r.text,a,u.forward(o,n));(d<u.from||d>u.to)&&(d=f),movedOver=r.text.slice(Math.min(a,d),Math.max(a,d));let g=c==(o?e.length-1:0)?null:e[c+(o?1:-1)];return g&&d==f&&g.level+(o?0:1)<u.level?EditorSelection.cursor(g.side(!o,n)+r.from,g.forward(o,n)?1:-1,g.level):EditorSelection.cursor(d+r.from,u.forward(o,n)?-1:1,u.level)}function autoDirection(r,e,n){for(let s=e;s<n;s++){let o=charType(r.charCodeAt(s));if(o==1)return LTR;if(o==2||o==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:r=>r.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:r=>r.some(e=>e)}),scrollHandler=Facet.define();class ScrollTarget{constructor(e,n="nearest",s="nearest",o=5,l=5,a=!1){this.range=e,this.y=n,this.x=s,this.yMargin=o,this.xMargin=l,this.isSnapshot=a}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ScrollTarget(EditorSelection.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(r,e)=>r.map(e)}),setEditContextFormatting=StateEffect.define();function logException(r,e,n){let s=r.facet(exceptionSink);s.length?s[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const editable=Facet.define({combine:r=>r.length?r[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define({combine(r){return r.filter((e,n)=>{for(let s=0;s<n;s++)if(r[s].plugin==e.plugin)return!1;return!0})}});class ViewPlugin{constructor(e,n,s,o,l){this.id=e,this.create=n,this.domEventHandlers=s,this.domEventObservers=o,this.baseExtensions=l(this),this.extension=this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:s,eventObservers:o,provide:l,decorations:a}=n||{};return new ViewPlugin(nextPluginID++,e,s,o,c=>{let u=[];return a&&u.push(decorations.of(f=>{let d=f.plugin(c);return d?a(d):Decoration.none})),l&&u.push(l(c)),u})}static fromClass(e,n){return ViewPlugin.define((s,o)=>new e(s,o),n)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(s){if(logException(n.state,s,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){logException(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(s){logException(e.state,s,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),blockWrappers=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(r,e){let n=r.state.facet(bidiIsolatedRanges);if(!n.length)return n;let s=n.map(l=>l instanceof Function?l(r):l),o=[];return RangeSet.spans(s,e.from,e.to,{point(){},span(l,a,c,u){let f=l-e.from,d=a-e.from,g=o;for(let m=c.length-1;m>=0;m--,u--){let v=c[m].spec.bidiIsolate,k;if(v==null&&(v=autoDirection(e.text,f,d)),u>0&&g.length&&(k=g[g.length-1]).to==f&&k.direction==v)k.to=d,g=k.inner;else{let A={from:f,to:d,direction:v,inner:[]};g.push(A),g=A.inner}}}}),o}const scrollMargins=Facet.define();function getScrollMargins(r){let e=0,n=0,s=0,o=0;for(let l of r.state.facet(scrollMargins)){let a=l(r);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(n=Math.max(n,a.right)),a.top!=null&&(s=Math.max(s,a.top)),a.bottom!=null&&(o=Math.max(o,a.bottom)))}return{left:e,right:n,top:s,bottom:o}}const styleModule=Facet.define();class ChangedRange{constructor(e,n,s,o){this.fromA=e,this.toA=n,this.fromB=s,this.toB=o}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,s=this;for(;n>0;n--){let o=e[n-1];if(!(o.fromA>s.toA)){if(o.toA<s.fromA)break;s=s.join(o),e.splice(n-1,1)}}return e.splice(n,0,s),e}static extendWithRanges(e,n){if(n.length==0)return e;let s=[];for(let o=0,l=0,a=0;;){let c=o<e.length?e[o].fromB:1e9,u=l<n.length?n[l]:1e9,f=Math.min(c,u);if(f==1e9)break;let d=f+a,g=f,m=d;for(;;)if(l<n.length&&n[l]<=g){let v=n[l+1];l+=2,g=Math.max(g,v);for(let k=o;k<e.length&&e[k].fromB<=g;k++)a=e[k].toA-e[k].toB;m=Math.max(m,v+a)}else if(o<e.length&&e[o].fromB<=g){let v=e[o++];g=Math.max(g,v.toB),m=Math.max(m,v.toA),a=v.toA-v.toB}else break;s.push(new ChangedRange(d,m,f,g))}return s}}class ViewUpdate{constructor(e,n,s){this.view=e,this.state=n,this.transactions=s,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let l of s)this.changes=this.changes.compose(l.changes);let o=[];this.changes.iterChangedRanges((l,a,c,u)=>o.push(new ChangedRange(l,a,c,u))),this.changedRanges=o}static create(e,n,s){return new ViewUpdate(e,n,s)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const noChildren=[];class Tile{constructor(e,n,s=0){this.dom=e,this.length=n,this.flags=s,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return noChildren}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let n=this.domAttrs;n&&setAttrs(this.dom,n)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,n=this.posAtStart){let s=n;for(let o of this.children){if(o==e)return s;s+=o.length+o.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,n){return null}domPosFor(e,n){let s=domIndex(this.dom),o=this.length?e>0:n>0;return new DOMPos(this.parent.dom,s+(o?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof DocTile)return e;return null}static get(e){return e.cmTile}}class CompositeTile extends Tile{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let n=this.dom,s=null,o,l=(e==null?void 0:e.node)==n?e:null,a=0;for(let c of this.children){if(c.sync(e),a+=c.length+c.breakAfter,o=s?s.nextSibling:n.firstChild,l&&o!=c.dom&&(l.written=!0),c.dom.parentNode==n)for(;o&&o!=c.dom;)o=rm$1(o);else n.insertBefore(c.dom,o);s=c.dom}for(o=s?s.nextSibling:n.firstChild,l&&o&&(l.written=!0);o;)o=rm$1(o);this.length=a}}function rm$1(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class DocTile extends CompositeTile{constructor(e,n){super(n),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let n=Tile.get(e);if(n&&this.owns(n))return n;e=e.parentNode}}blockTiles(e){for(let n=[],s=this,o=0,l=0;;)if(o==s.children.length){if(!n.length)return;s=s.parent,s.breakAfter&&l++,o=n.pop()}else{let a=s.children[o++];if(a instanceof BlockWrapperTile)n.push(o),s=a,o=0;else{let c=l+a.length,u=e(a,l);if(u!==void 0)return u;l=c+a.breakAfter}}}resolveBlock(e,n){let s,o=-1,l,a=-1;if(this.blockTiles((c,u)=>{let f=u+c.length;if(e>=u&&e<=f){if(c.isWidget()&&n>=-1&&n<=1){if(c.flags&32)return!0;c.flags&16&&(s=void 0)}(u<e||e==f&&(n<-1?c.length:c.covers(1)))&&(!s||!c.isWidget()&&s.isWidget())&&(s=c,o=e-u),(f>e||e==u&&(n>1?c.length:c.covers(-1)))&&(!l||!c.isWidget()&&l.isWidget())&&(l=c,a=e-u)}}),!s&&!l)throw new Error("No tile at position "+e);return s&&n<0||!l?{tile:s,offset:o}:{tile:l,offset:a}}}class BlockWrapperTile extends CompositeTile{constructor(e,n){super(e),this.wrapper=n}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,n){let s=new BlockWrapperTile(n||document.createElement(e.tagName),e);return n||(s.flags|=4),s}}class LineTile extends CompositeTile{constructor(e,n){super(e),this.attrs=n}isLine(){return!0}static start(e,n,s){let o=new LineTile(n||document.createElement("div"),e);return(!n||!s)&&(o.flags|=4),o}get domAttrs(){return this.attrs}resolveInline(e,n,s){let o=null,l=-1,a=null,c=-1;function u(d,g){for(let m=0,v=0;m<d.children.length&&v<=g;m++){let k=d.children[m],A=v+k.length;A>=g&&(k.isComposite()?u(k,g-v):(!a||a.isHidden&&(n>0||s&&onSameLine(a,k)))&&(A>g||k.flags&32)?(a=k,c=g-v):(v<g||k.flags&16&&!k.isHidden)&&(o=k,l=g-v)),v=A}}u(this,e);let f=(n<0?o:a)||o||a;return f?{tile:f,offset:f==o?l:c}:null}coordsIn(e,n){let s=this.resolveInline(e,n,!0);return s?s.tile.coordsIn(Math.max(0,s.offset),n):fallbackRect(this)}domIn(e,n){let s=this.resolveInline(e,n);if(s){let{tile:o,offset:l}=s;if(this.dom.contains(o.dom))return o.isText()?new DOMPos(o.dom,Math.min(o.dom.nodeValue.length,l)):o.domPosFor(l,o.flags&16?1:o.flags&32?-1:n);let a=s.tile.parent,c=!1;for(let u of a.children){if(c)return new DOMPos(u.dom,0);u==s.tile&&(c=!0)}}return new DOMPos(this.dom,0)}}function fallbackRect(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let n=clientRectsFor(e);return n[n.length-1]||null}function onSameLine(r,e){let n=r.coordsIn(0,1),s=e.coordsIn(0,1);return n&&s&&s.top<n.bottom}class MarkTile extends CompositeTile{constructor(e,n){super(e),this.mark=n}get domAttrs(){return this.mark.attrs}static of(e,n){let s=new MarkTile(n||document.createElement(e.tagName),e);return n||(s.flags|=4),s}}class TextTile extends Tile{constructor(e,n){super(e,n.length),this.text=n}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,n){let s=this.dom.nodeValue.length;e>s&&(e=s);let o=e,l=e,a=0;e==0&&n<0||e==s&&n>=0?browser.chrome||browser.gecko||(e?(o--,a=1):l<s&&(l++,a=-1)):n<0?o--:l<s&&l++;let c=textRange(this.dom,o,l).getClientRects();if(!c.length)return null;let u=c[(a?a<0:n>=0)?0:c.length-1];return browser.safari&&!a&&u.width==0&&(u=Array.prototype.find.call(c,f=>f.width)||u),a?flattenRect(u,a<0):u||null}static of(e,n){let s=new TextTile(n||document.createTextNode(e),e);return n||(s.flags|=2),s}}class WidgetTile extends Tile{constructor(e,n,s,o){super(e,n,o),this.widget=s}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,n){return this.coordsInWidget(e,n,!1)}coordsInWidget(e,n,s){let o=this.widget.coordsAt(this.dom,e,n);if(o)return o;if(s)return flattenRect(this.dom.getBoundingClientRect(),this.length?e==0:n<=0);{let l=this.dom.getClientRects(),a=null;if(!l.length)return null;let c=this.flags&16?!0:this.flags&32?!1:e>0;for(let u=c?l.length-1:0;a=l[u],!(e>0?u==0:u==l.length-1||a.top<a.bottom);u+=c?-1:1);return flattenRect(a,!c)}}get overrideDOMText(){if(!this.length)return Text.empty;let{root:e}=this;if(!e)return Text.empty;let n=this.posAtStart;return e.view.state.doc.slice(n,n+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,n,s,o,l){return l||(l=e.toDOM(n),e.editable||(l.contentEditable="false")),new WidgetTile(l,s,e,o)}}class WidgetBufferTile extends Tile{constructor(e){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),super(n,0,e)}get isHidden(){return!1}get overrideDOMText(){return Text.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class TilePointer{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,n,s){let{tile:o,index:l,beforeBreak:a,parents:c}=this;for(;e||n>0;)if(o.isComposite())if(a){if(!e)break;s&&s.break(),e--,a=!1}else if(l==o.children.length){if(!e&&!c.length)break;s&&s.leave(o),a=!!o.breakAfter,{tile:o,index:l}=c.pop(),l++}else{let u=o.children[l],f=u.breakAfter;(n>0?u.length<=e:u.length<e)&&(!s||s.skip(u,0,u.length)!==!1||!u.isComposite)?(a=!!f,l++,e-=u.length):(c.push({tile:o,index:l}),o=u,l=0,s&&u.isComposite()&&s.enter(u))}else if(l==o.length)a=!!o.breakAfter,{tile:o,index:l}=c.pop(),l++;else if(e){let u=Math.min(e,o.length-l);s&&s.skip(o,l,l+u),e-=u,l+=u}else break;return this.tile=o,this.index=l,this.beforeBreak=a,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class OpenWrapper{constructor(e,n,s,o){this.from=e,this.to=n,this.wrapper=s,this.rank=o}}class TileBuilder{constructor(e,n,s){this.cache=e,this.root=n,this.blockWrappers=s,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,n,s,o){var l;this.flushBuffer();let a=this.ensureMarks(n,s),c=a.lastChild;if(c&&c.isText()&&!(c.flags&8)){this.cache.reused.set(c,2);let u=a.children[a.children.length-1]=new TextTile(c.dom,c.text+e);u.parent=a}else a.append(o||TextTile.of(e,(l=this.cache.find(TextTile))===null||l===void 0?void 0:l.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,n){let s=this.curLine;s.dom!=n.line.dom&&(s.setDOM(this.cache.reused.has(n.line)?freeNode(n.line.dom):n.line.dom),this.cache.reused.set(n.line,2));let o=s;for(let a=n.marks.length-1;a>=0;a--){let c=n.marks[a],u=o.lastChild;if(u instanceof MarkTile&&u.mark.eq(c.mark))u.dom!=c.dom&&u.setDOM(freeNode(c.dom)),o=u;else{if(this.cache.reused.get(c)){let d=Tile.get(c.dom);d&&d.setDOM(freeNode(c.dom))}let f=MarkTile.of(c.mark,c.dom);o.append(f),o=f}this.cache.reused.set(c,2)}let l=new TextTile(e.text,e.text.nodeValue);l.flags|=8,o.append(l)}addInlineWidget(e,n,s){let o=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);o||this.flushBuffer();let l=this.ensureMarks(n,s);!o&&!(e.flags&16)&&l.append(this.getBuffer(1)),l.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,n,s){this.flushBuffer(),this.ensureMarks(n,s).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let n=this.afterWidget||this.lastBlock;n.length+=e,this.pos+=e}addLineStart(e,n){var s;e||(e=lineBaseAttrs);let o=LineTile.start(e,n||((s=this.cache.find(LineTile))===null||s===void 0?void 0:s.dom),!!n);this.getBlockPos().append(this.lastBlock=this.curLine=o)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,n){var s;let o=this.curLine;for(let l=e.length-1;l>=0;l--){let a=e[l],c;if(n>0&&(c=o.lastChild)&&c instanceof MarkTile&&c.mark.eq(a))o=c,n--;else{let u=MarkTile.of(a,(s=this.cache.find(MarkTile,f=>f.mark.eq(a)))===null||s===void 0?void 0:s.dom);o.append(u),o=u,n=0}}return o}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!hasContent(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(browser.ios&&hasContent(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(BreakWidget,0,32)||new WidgetTile(BreakWidget.toDOM(),0,BreakWidget,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let n=new OpenWrapper(e.from,e.to,e.value,e.rank),s=this.wrappers.length;for(;s>0&&(this.wrappers[s-1].rank-n.rank||this.wrappers[s-1].to-n.to)<0;)s--;this.wrappers.splice(s,0,n)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let n=this.root;for(let s of this.wrappers){let o=n.lastChild;if(s.from<this.pos&&o instanceof BlockWrapperTile&&o.wrapper.eq(s.wrapper))n=o;else{let l=BlockWrapperTile.of(s.wrapper,(e=this.cache.find(BlockWrapperTile,a=>a.wrapper.eq(s.wrapper)))===null||e===void 0?void 0:e.dom);n.append(l),n=l}}return n}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let n=2|(e<0?16:32),s=this.cache.find(WidgetBufferTile,void 0,1);return s&&(s.flags=n),s||new WidgetBufferTile(n)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class TextStream{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skipCount);if(this.skipCount=0,a)throw new Error("Ran out of text content when drawing inline views");this.text=o;let c=this.textOff=Math.min(e,o.length);return l?null:o.slice(0,c)}let n=Math.min(this.text.length,this.textOff+e),s=this.text.slice(this.textOff,n);return this.textOff=n,s}}const buckets=[WidgetTile,LineTile,TextTile,MarkTile,WidgetBufferTile,BlockWrapperTile,DocTile];for(let r=0;r<buckets.length;r++)buckets[r].bucket=r;class TileCache{constructor(e){this.view=e,this.buckets=buckets.map(()=>[]),this.index=buckets.map(()=>0),this.reused=new Map}add(e){let n=e.constructor.bucket,s=this.buckets[n];s.length<6?s.push(e):s[this.index[n]=(this.index[n]+1)%6]=e}find(e,n,s=2){let o=e.bucket,l=this.buckets[o],a=this.index[o];for(let c=l.length-1;c>=0;c--){let u=(c+a)%l.length,f=l[u];if((!n||n(f))&&!this.reused.has(f))return l.splice(u,1),u<a&&this.index[o]--,this.reused.set(f,s),f}return null}findWidget(e,n,s){let o=this.buckets[0];if(o.length)for(let l=0,a=0;;l++){if(l==o.length){if(a)return null;a=1,l=0}let c=o[l];if(!this.reused.has(c)&&(a==0?c.widget.compare(e):c.widget.constructor==e.constructor&&e.updateDOM(c.dom,this.view)))return o.splice(l,1),l<this.index[0]&&this.index[0]--,this.reused.set(c,1),c.length=n,c.flags=c.flags&-498|s,c}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,n=2){if(!this.reused.has(e))return this.reused.set(e,n),e.dom}}class TileUpdate{constructor(e,n,s,o,l){this.view=e,this.decorations=o,this.disallowBlockEffectsFor=l,this.openWidget=!1,this.openMarks=0,this.cache=new TileCache(e),this.text=new TextStream(e.state.doc),this.builder=new TileBuilder(this.cache,new DocTile(e,e.contentDOM),RangeSet.iter(s)),this.cache.reused.set(n,2),this.old=new TilePointer(n)}run(e,n){let s=n&&this.getCompositionContext(n.text);for(let o=0,l=0,a=0;;){let c=a<e.length?e[a++]:null,u=c?c.fromA:this.old.root.length;if(u>o){let f=u-o;this.preserve(f,!a,!c),o=u,l+=f}if(!c)break;this.forward(c.fromA,c.toA),n&&c.fromA<=n.range.fromA&&c.toA>=n.range.toA?(this.emit(l,n.range.fromB),this.builder.addComposition(n,s),this.emit(n.range.toB,c.toB)):this.emit(l,c.toB),l=c.toB,o=c.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,n,s){let o=getMarks(this.old),l=this.openMarks;this.old.advance(e,s?1:-1,{skip:(a,c,u)=>{if(a.isWidget())if(this.openWidget)this.builder.continueWidget(u-c);else{let f=u>0||c<a.length?WidgetTile.of(a.widget,this.view,u-c,a.flags&496,this.cache.maybeReuse(a)):this.cache.reuse(a);f.flags&256?(f.flags&=-2,this.builder.addBlockWidget(f)):(this.builder.ensureLine(null),this.builder.addInlineWidget(f,o,l),l=o.length)}else if(a.isText())this.builder.ensureLine(null),!c&&u==a.length?this.builder.addText(a.text,o,l,this.cache.reuse(a)):(this.cache.add(a),this.builder.addText(a.text.slice(c,u),o,l)),l=o.length;else if(a.isLine())a.flags&=-2,this.cache.reused.set(a,1),this.builder.addLine(a);else if(a instanceof WidgetBufferTile)this.cache.add(a);else if(a instanceof MarkTile)this.builder.ensureLine(null),this.builder.addMark(a,o,l),this.cache.reused.set(a,1),l=o.length;else return!1;this.openWidget=!1},enter:a=>{a.isLine()?this.builder.addLineStart(a.attrs,this.cache.maybeReuse(a)):(this.cache.add(a),a instanceof MarkTile&&o.unshift(a.mark)),this.openWidget=!1},leave:a=>{a.isLine()?o.length&&(o.length=l=0):a instanceof MarkTile&&(o.shift(),l=Math.min(l,o.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,n){let s=null,o=this.builder,l=0,a=RangeSet.spans(this.decorations,e,n,{point:(c,u,f,d,g,m)=>{if(f instanceof PointDecoration){if(this.disallowBlockEffectsFor[m]){if(f.block)throw new RangeError("Block decorations may not be specified via plugins");if(u>this.view.state.doc.lineAt(c).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(l=d.length,g>d.length)o.continueWidget(u-c);else{let v=f.widget||(f.block?NullWidget.block:NullWidget.inline),k=widgetFlags(f),A=this.cache.findWidget(v,u-c,k)||WidgetTile.of(v,this.view,u-c,k);f.block?(f.startSide>0&&o.addLineStartIfNotCovered(s),o.addBlockWidget(A)):(o.ensureLine(s),o.addInlineWidget(A,d,g))}s=null}else s=addLineDeco(s,f);u>c&&this.text.skip(u-c)},span:(c,u,f,d)=>{for(let g=c;g<u;){let m=this.text.next(Math.min(512,u-g));m==null?(o.addLineStartIfNotCovered(s),o.addBreak(),g++):(o.ensureLine(s),o.addText(m,f,d),g+=m.length),s=null}}});o.addLineStartIfNotCovered(s),this.openWidget=a>l,this.openMarks=a}forward(e,n){this.old.advance(n-e,1,{skip:(s,o,l)=>{(s.isText()||l==s.length)&&this.cache.add(s)},enter:s=>this.cache.add(s),leave:()=>{},break:()=>{}})}getCompositionContext(e){let n=[],s=null;for(let o=e.parentNode;;o=o.parentNode){let l=Tile.get(o);if(o==this.view.contentDOM)break;l instanceof MarkTile?n.push(l):l!=null&&l.isLine()?s=l:o.nodeName=="DIV"&&!s&&o!=this.view.contentDOM?s=new LineTile(o,lineBaseAttrs):n.push(MarkTile.of(new MarkDecoration({tagName:o.nodeName.toLowerCase(),attributes:getAttrs(o)}),o))}return{line:s,marks:n}}}function hasContent(r,e){let n=s=>{for(let o of s.children)if((e?o.isText():o.length)||n(o))return!0;return!1};return n(r)}function widgetFlags(r){let e=r.isReplace?(r.startSide<0?64:0)|(r.endSide>0?128:0):r.startSide>0?32:16;return r.block&&(e|=256),e}const lineBaseAttrs={class:"cm-line"};function addLineDeco(r,e){let n=e.spec.attributes,s=e.spec.class;return!n&&!s||(r||(r={class:"cm-line"}),n&&combineAttrs(n,r),s&&(r.class+=" "+s)),r}function getMarks(r){let e=[];for(let n=r.parents.length;n>1;n--){let s=n==r.parents.length?r.tile:r.parents[n].tile;s instanceof MarkTile&&e.push(s.mark)}return e}function freeNode(r){let e=Tile.get(r);return e&&e.setDOM(r.cloneNode()),r}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");const BreakWidget=new class extends WidgetType{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class DocView{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new DocTile(e,e.contentDOM),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],null)}update(e){var n;let s=e.changedRanges;this.minWidth>0&&s.length&&(s.every(({fromA:d,toA:g})=>g<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let o=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?o=this.domChanged.newSel.head:!touchesComposition(e.changes,this.hasComposition)&&!e.selectionSet&&(o=e.state.selection.main.head));let l=o>-1?findCompositionRange(this.view,e.changes,o):null;if(this.domChanged=null,this.hasComposition){let{from:d,to:g}=this.hasComposition;s=new ChangedRange(d,g,e.changes.mapPos(d,-1),e.changes.mapPos(g,1)).addToSet(s.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(browser.ie||browser.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,c=this.blockWrappers;this.updateDeco();let u=findChangedDeco(a,this.decorations,e.changes);u.length&&(s=ChangedRange.extendWithRanges(s,u));let f=findChangedWrappers(c,this.blockWrappers,e.changes);return f.length&&(s=ChangedRange.extendWithRanges(s,f)),l&&!s.some(d=>d.fromA<=l.range.fromA&&d.toA>=l.range.toA)&&(s=l.range.addToSet(s.slice())),this.tile.flags&2&&s.length==0?!1:(this.updateInner(s,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0;let{observer:s}=this.view;s.ignore(()=>{if(n||e.length){let a=this.tile,c=new TileUpdate(this.view,a,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=c.run(e,n),destroyDropped(a,c.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=browser.chrome||browser.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(l),l&&(l.written||s.selectionRange.focusNode!=l.node||!this.tile.dom.contains(l.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.tile.children)l.isWidget()&&l.widget instanceof BlockGapWidget&&o.push(l.dom);s.updateGaps(o)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let s of n.effects)s.is(setEditContextFormatting)&&(this.editContextFormatting=s.value)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:s}=this.tile,o=this.view.root.activeElement,l=o==s,a=!l&&!(this.view.state.facet(editable)||s.tabIndex>-1)&&hasSelection(s,this.view.observer.selectionRange)&&!(o&&s.contains(o));if(!(l||n||a))return;let c=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,f,d;if(u.empty?d=f=this.inlineDOMNearPos(u.anchor,u.assoc||1):(d=this.inlineDOMNearPos(u.head,u.head==u.from?1:-1),f=this.inlineDOMNearPos(u.anchor,u.anchor==u.from?1:-1)),browser.gecko&&u.empty&&!this.hasComposition&&betweenUneditable(f)){let m=document.createTextNode("");this.view.observer.ignore(()=>f.node.insertBefore(m,f.node.childNodes[f.offset]||null)),f=d=new DOMPos(m,0),c=!0}let g=this.view.observer.selectionRange;(c||!g.focusNode||(!isEquivalentPosition(f.node,f.offset,g.anchorNode,g.anchorOffset)||!isEquivalentPosition(d.node,d.offset,g.focusNode,g.focusOffset))&&!this.suppressWidgetCursorChange(g,u))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&s.contains(g.focusNode)&&inUneditable(g.focusNode,s)&&(s.blur(),s.focus({preventScroll:!0}));let m=getSelection(this.view.root);if(m)if(u.empty){if(browser.gecko){let v=nextToUneditable(f.node,f.offset);if(v&&v!=3){let k=(v==1?textNodeBefore:textNodeAfter)(f.node,f.offset);k&&(f=new DOMPos(k.node,k.offset))}}m.collapse(f.node,f.offset),u.bidiLevel!=null&&m.caretBidiLevel!==void 0&&(m.caretBidiLevel=u.bidiLevel)}else if(m.extend){m.collapse(f.node,f.offset);try{m.extend(d.node,d.offset)}catch{}}else{let v=document.createRange();u.anchor>u.head&&([f,d]=[d,f]),v.setEnd(d.node,d.offset),v.setStart(f.node,f.offset),m.removeAllRanges(),m.addRange(v)}a&&this.view.root.activeElement==s&&(s.blur(),o&&o.focus())}),this.view.observer.setSelectionRange(f,d)),this.impreciseAnchor=f.precise?null:new DOMPos(g.anchorNode,g.anchorOffset),this.impreciseHead=d.precise?null:new DOMPos(g.focusNode,g.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,s=getSelection(e.root),{anchorNode:o,anchorOffset:l}=e.observer.selectionRange;if(!s||!n.empty||!n.assoc||!s.modify)return;let a=this.lineAt(n.head,n.assoc);if(!a)return;let c=a.posAtStart;if(n.head==c||n.head==c+a.length)return;let u=this.coordsAt(n.head,-1),f=this.coordsAt(n.head,1);if(!u||!f||u.bottom>f.top)return;let d=this.domAtPos(n.head+n.assoc,n.assoc);s.collapse(d.node,d.offset),s.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=n.from&&s.collapse(o,l)}posFromDOM(e,n){let s=this.tile.nearest(e);if(!s)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let o=s.posAtStart;if(s.isComposite()){let l;if(e==s.dom)l=s.dom.childNodes[n];else{let a=maxOffset(e)==0?0:n==0?-1:1;for(;;){let c=e.parentNode;if(c==s.dom)break;a==0&&c.firstChild!=c.lastChild&&(e==c.firstChild?a=-1:a=1),e=c}a<0?l=e:l=e.nextSibling}if(l==s.dom.firstChild)return o;for(;l&&!Tile.get(l);)l=l.nextSibling;if(!l)return o+s.length;for(let a=0,c=o;;a++){let u=s.children[a];if(u.dom==l)return c;c+=u.length+u.breakAfter}}else return s.isText()?e==s.dom?o+n:o+(n?s.length:0):o}domAtPos(e,n){let{tile:s,offset:o}=this.tile.resolveBlock(e,n);return s.isWidget()?s.domPosFor(e,n):s.domIn(o,n)}inlineDOMNearPos(e,n){let s,o=-1,l=!1,a,c=-1,u=!1;return this.tile.blockTiles((f,d)=>{if(f.isWidget()){if(f.flags&32&&d>=e)return!0;f.flags&16&&(l=!0)}else{let g=d+f.length;if(d<=e&&(s=f,o=e-d,l=g<e),g>=e&&!a&&(a=f,c=e-d,u=d>e),d>e&&a)return!0}}),!s&&!a?this.domAtPos(e,n):(l&&a?s=null:u&&s&&(a=null),s&&n<0||!a?s.domIn(o,n):a.domIn(c,n))}coordsAt(e,n){let{tile:s,offset:o}=this.tile.resolveBlock(e,n);return s.isWidget()?s.widget instanceof BlockGapWidget?null:s.coordsInWidget(o,n,!0):s.coordsIn(o,n)}lineAt(e,n){let{tile:s}=this.tile.resolveBlock(e,n);return s.isLine()?s:null}coordsForChar(e){let{tile:n,offset:s}=this.tile.resolveBlock(e,1);if(!n.isLine())return null;function o(l,a){if(l.isComposite())for(let c of l.children){if(c.length>=a){let u=o(c,a);if(u)return u}if(a-=c.length,a<0)break}else if(l.isText()&&a<l.length){let c=findClusterBreak(l.text,a);if(c==a)return null;let u=textRange(l.dom,a,c).getClientRects();for(let f=0;f<u.length;f++){let d=u[f];if(f==u.length-1||d.top<d.bottom&&d.left<d.right)return d}}return null}return o(n,s)}measureVisibleLineHeights(e){let n=[],{from:s,to:o}=e,l=this.view.contentDOM.clientWidth,a=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,u=this.view.textDirection==Direction.LTR,f=0,d=(g,m,v)=>{for(let k=0;k<g.children.length&&!(m>o);k++){let A=g.children[k],E=m+A.length,N=A.dom.getBoundingClientRect(),{height:V}=N;if(v&&!k&&(f+=N.top-v.top),A instanceof BlockWrapperTile)E>s&&d(A,m,N);else if(m>=s&&(f>0&&n.push(-f),n.push(V+f),f=0,a)){let q=A.dom.lastChild,W=q?clientRectsFor(q):[];if(W.length){let H=W[W.length-1],$=u?H.right-N.left:N.right-H.left;$>c&&(c=$,this.minWidth=l,this.minWidthFrom=m,this.minWidthTo=E)}}v&&k==g.children.length-1&&(f+=v.bottom-N.bottom),m=E+A.breakAfter}};return d(this.tile,0,null),n}textDirectionAt(e){let{tile:n}=this.tile.resolveBlock(e,1);return getComputedStyle(n.dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){let e=this.tile.blockTiles(a=>{if(a.isLine()&&a.children.length&&a.length<=20){let c=0,u;for(let f of a.children){if(!f.isText()||/[^ -~]/.test(f.text))return;let d=clientRectsFor(f.dom);if(d.length!=1)return;c+=d[0].width,u=d[0].height}if(c)return{lineHeight:a.dom.getBoundingClientRect().height,charWidth:c/a.length,textHeight:u}}});if(e)return e;let n=document.createElement("div"),s,o,l;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(n);let a=clientRectsFor(n.firstChild)[0];s=n.getBoundingClientRect().height,o=a&&a.width?a.width/27:7,l=a&&a.height?a.height:s,n.remove()}),{lineHeight:s,charWidth:o,textHeight:l}}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let s=0,o=0;;o++){let l=o==n.viewports.length?null:n.viewports[o],a=l?l.from-1:this.view.state.doc.length;if(a>s){let c=(n.lineBlockAt(a).bottom-n.lineBlockAt(s).top)/this.view.scaleY;e.push(Decoration.replace({widget:new BlockGapWidget(c),block:!0,inclusive:!0,isBlockGap:!0}).range(s,a))}if(!l)break;s=l.to+1}return Decoration.set(e)}updateDeco(){let e=1,n=this.view.state.facet(decorations).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),s=!1,o=this.view.state.facet(outerDecorations).map((l,a)=>{let c=typeof l=="function";return c&&(s=!0),c?l(this.view):l});for(o.length&&(this.dynamicDecorationMap[e++]=s,n.push(RangeSet.join(o))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(blockWrappers).map(l=>typeof l=="function"?l(this.view):l)}scrollIntoView(e){if(e.isSnapshot){let f=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=f.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let f of this.view.state.facet(scrollHandler))try{if(f(this.view,e.range,e))return!0}catch(d){logException(this.view.state,d,"scroll handler")}let{range:n}=e,s=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),o;if(!s)return;!n.empty&&(o=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(s={left:Math.min(s.left,o.left),top:Math.min(s.top,o.top),right:Math.max(s.right,o.right),bottom:Math.max(s.bottom,o.bottom)});let l=getScrollMargins(this.view),a={left:s.left-l.left,top:s.top-l.top,right:s.right+l.right,bottom:s.bottom+l.bottom},{offsetWidth:c,offsetHeight:u}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,a,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==Direction.LTR)}lineHasWidget(e){let n=s=>s.isWidget()||s.children.some(n);return n(this.tile.resolveBlock(e,1).tile)}destroy(){destroyDropped(this.tile)}}function destroyDropped(r,e){let n=e==null?void 0:e.get(r);if(n!=1){n==null&&r.destroy();for(let s of r.children)destroyDropped(s,e)}}function betweenUneditable(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}function findCompositionNode(r,e){let n=r.observer.selectionRange;if(!n.focusNode)return null;let s=textNodeBefore(n.focusNode,n.focusOffset),o=textNodeAfter(n.focusNode,n.focusOffset),l=s||o;if(o&&s&&o.node!=s.node){let c=Tile.get(o.node);if(!c||c.isText()&&c.text!=o.node.nodeValue)l=o;else if(r.docView.lastCompositionAfterCursor){let u=Tile.get(s.node);!u||u.isText()&&u.text!=s.node.nodeValue||(l=o)}}if(r.docView.lastCompositionAfterCursor=l!=s,!l)return null;let a=e-l.offset;return{from:a,to:a+l.node.nodeValue.length,node:l.node}}function findCompositionRange(r,e,n){let s=findCompositionNode(r,n);if(!s)return null;let{node:o,from:l,to:a}=s,c=o.nodeValue;if(/[\n\r]/.test(c)||r.state.doc.sliceString(s.from,s.to)!=c)return null;let u=e.invertedDesc;return{range:new ChangedRange(u.mapPos(l),u.mapPos(a),l,a),text:o}}function nextToUneditable(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(e,n){addRange(e,n,this.changes)}comparePoint(e,n){addRange(e,n,this.changes)}boundChange(e){addRange(e,e,this.changes)}};function findChangedDeco(r,e,n){let s=new DecorationComparator$1;return RangeSet.compare(r,e,n,s),s.changes}class WrapperComparator{constructor(){this.changes=[]}compareRange(e,n){addRange(e,n,this.changes)}comparePoint(){}boundChange(e){addRange(e,e,this.changes)}}function findChangedWrappers(r,e,n){let s=new WrapperComparator;return RangeSet.compare(r,e,n,s),s.changes}function inUneditable(r,e){for(let n=r;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function touchesComposition(r,e){let n=!1;return e&&r.iterChangedRanges((s,o)=>{s<e.to&&o>e.from&&(n=!0)}),n}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function groupAt(r,e,n=1){let s=r.charCategorizer(e),o=r.doc.lineAt(e),l=e-o.from;if(o.length==0)return EditorSelection.cursor(e);l==0?n=1:l==o.length&&(n=-1);let a=l,c=l;n<0?a=findClusterBreak(o.text,l,!1):c=findClusterBreak(o.text,l);let u=s(o.text.slice(a,c));for(;a>0;){let f=findClusterBreak(o.text,a,!1);if(s(o.text.slice(f,a))!=u)break;a=f}for(;c<o.length;){let f=findClusterBreak(o.text,c);if(s(o.text.slice(c,f))!=u)break;c=f}return EditorSelection.range(a+o.from,c+o.from)}function posAtCoordsImprecise(r,e,n,s,o){let l=Math.round((s-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&n.height>r.defaultLineHeight*1.5){let c=r.viewState.heightOracle.textHeight,u=Math.floor((o-n.top-(r.defaultLineHeight-c)*.5)/c);l+=u*r.viewState.heightOracle.lineLength}let a=r.state.sliceDoc(n.from,n.to);return n.from+findColumn(a,l,r.state.tabSize)}function blockAt(r,e,n){let s=r.lineBlockAt(e);if(Array.isArray(s.type)){let o;for(let l of s.type){if(l.from>e)break;if(!(l.to<e)){if(l.from<e&&l.to>e)return l;(!o||l.type==BlockType.Text&&(o.type!=l.type||(n<0?l.from<e:l.to>e)))&&(o=l)}}return o||s}return s}function moveToLineBoundary(r,e,n,s){let o=blockAt(r,e.head,e.assoc||-1),l=!s||o.type!=BlockType.Text||!(r.lineWrapping||o.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>o.from?e.head-1:e.head);if(l){let a=r.dom.getBoundingClientRect(),c=r.textDirectionAt(o.from),u=r.posAtCoords({x:n==(c==Direction.LTR)?a.right-1:a.left+1,y:(l.top+l.bottom)/2});if(u!=null)return EditorSelection.cursor(u,n?-1:1)}return EditorSelection.cursor(n?o.to:o.from,n?-1:1)}function moveByChar(r,e,n,s){let o=r.state.doc.lineAt(e.head),l=r.bidiSpans(o),a=r.textDirectionAt(o.from);for(let c=e,u=null;;){let f=moveVisually(o,l,a,c,n),d=movedOver;if(!f){if(o.number==(n?r.state.doc.lines:1))return c;d=`
`,o=r.state.doc.line(o.number+(n?1:-1)),l=r.bidiSpans(o),f=r.visualLineSide(o,!n)}if(u){if(!u(d))return c}else{if(!s)return f;u=s(d)}c=f}}function byGroup(r,e,n){let s=r.state.charCategorizer(e),o=s(n);return l=>{let a=s(l);return o==CharCategory.Space&&(o=a),o==a}}function moveVertically(r,e,n,s){let o=e.head,l=n?1:-1;if(o==(n?r.state.doc.length:0))return EditorSelection.cursor(o,e.assoc);let a=e.goalColumn,c,u=r.contentDOM.getBoundingClientRect(),f=r.coordsAtPos(o,e.assoc||-1),d=r.documentTop;if(f)a==null&&(a=f.left-u.left),c=l<0?f.top:f.bottom;else{let v=r.viewState.lineBlockAt(o);a==null&&(a=Math.min(u.right-u.left,r.defaultCharacterWidth*(o-v.from))),c=(l<0?v.top:v.bottom)+d}let g=u.left+a,m=s??r.viewState.heightOracle.textHeight>>1;for(let v=0;;v+=10){let k=c+(m+v)*l,A=posAtCoords(r,{x:g,y:k},!1,l);return EditorSelection.cursor(A.pos,A.assoc,void 0,a)}}function skipAtomicRanges(r,e,n){for(;;){let s=0;for(let o of r)o.between(e-1,e+1,(l,a,c)=>{if(e>l&&e<a){let u=s||n||(e-l<a-e?-1:1);e=u<0?l:a,s=u}});if(!s)return e}}function skipAtomsForSelection(r,e){let n=null;for(let s=0;s<e.ranges.length;s++){let o=e.ranges[s],l=null;if(o.empty){let a=skipAtomicRanges(r,o.from,0);a!=o.from&&(l=EditorSelection.cursor(a,-1))}else{let a=skipAtomicRanges(r,o.from,-1),c=skipAtomicRanges(r,o.to,1);(a!=o.from||c!=o.to)&&(l=EditorSelection.range(o.from==o.anchor?a:c,o.from==o.head?a:c))}l&&(n||(n=e.ranges.slice()),n[s]=l)}return n?EditorSelection.create(n,e.mainIndex):e}function skipAtoms(r,e,n){let s=skipAtomicRanges(r.state.facet(atomicRanges).map(o=>o(r)),n.from,e.head>n.from?-1:1);return s==n.from?n:EditorSelection.cursor(s,s<n.from?1:-1)}class PosAssoc{constructor(e,n){this.pos=e,this.assoc=n}}function posAtCoords(r,e,n,s){let o=r.contentDOM.getBoundingClientRect(),l=o.top+r.viewState.paddingTop,{x:a,y:c}=e,u=c-l,f;for(;;){if(u<0)return new PosAssoc(0,1);if(u>r.viewState.docHeight)return new PosAssoc(r.state.doc.length,-1);if(f=r.elementAtHeight(u),s==null)break;if(f.type==BlockType.Text){let m=r.docView.coordsAt(s<0?f.from:f.to,s);if(m&&(s<0?m.top<=u+l:m.bottom>=u+l))break}let g=r.viewState.heightOracle.textHeight/2;u=s>0?f.bottom+g:f.top-g}if(r.viewport.from>=f.to||r.viewport.to<=f.from){if(n)return null;if(f.type==BlockType.Text){let g=posAtCoordsImprecise(r,o,f,a,c);return new PosAssoc(g,g==f.from?1:-1)}}if(f.type!=BlockType.Text)return u<(f.top+f.bottom)/2?new PosAssoc(f.from,1):new PosAssoc(f.to,-1);let d=r.docView.lineAt(f.from,2);return(!d||d.length!=f.length)&&(d=r.docView.lineAt(f.from,-2)),posAtCoordsInline(r,d,f.from,a,c)}function posAtCoordsInline(r,e,n,s,o){let l=-1,a=null,c=1e9,u=1e9,f=o,d=o,g=(m,v)=>{for(let k=0;k<m.length;k++){let A=m[k];if(A.top==A.bottom)continue;let E=A.left>s?A.left-s:A.right<s?s-A.right:0,N=A.top>o?A.top-o:A.bottom<o?o-A.bottom:0;A.top<=d&&A.bottom>=f&&(f=Math.min(A.top,f),d=Math.max(A.bottom,d),N=0),(l<0||(N-u||E-c)<0)&&(l>=0&&u&&c<E&&a.top<=d-2&&a.bottom>=f+2?u=0:(l=v,c=E,u=N,a=A))}};if(e.isText()){for(let v=0;v<e.length;){let k=findClusterBreak(e.text,v);if(g(textRange(e.dom,v,k).getClientRects(),v),!c&&!u)break;v=k}return s>(a.left+a.right)/2==(dirAt(r,l+n)==Direction.LTR)?new PosAssoc(n+findClusterBreak(e.text,l),-1):new PosAssoc(n+l,1)}else{if(!e.length)return new PosAssoc(n,1);for(let A=0;A<e.children.length;A++){let E=e.children[A];if(E.flags&48)continue;let N=(E.dom.nodeType==1?E.dom:textRange(E.dom,0,E.length)).getClientRects();if(g(N,A),!c&&!u)break}let m=e.children[l],v=e.posBefore(m,n);return m.isComposite()||m.isText()?posAtCoordsInline(r,m,v,Math.max(a.left,Math.min(a.right,s)),o):s>(a.left+a.right)/2==(dirAt(r,l+n)==Direction.LTR)?new PosAssoc(v+m.length,-1):new PosAssoc(v,1)}}function dirAt(r,e){let n=r.state.doc.lineAt(e);return r.bidiSpans(n)[BidiSpan.find(r.bidiSpans(n),e-n.from,-1,1)].dir}const LineBreakPlaceholder="";class DOMReader{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,n){if(!e)return this;let s=e.parentNode;for(let o=e;;){this.findPointBefore(s,o);let l=this.text.length;this.readNode(o);let a=Tile.get(o),c=o.nextSibling;if(c==n){a!=null&&a.breakAfter&&!c&&this.lineBreak();break}let u=Tile.get(c);(a&&u?a.breakAfter:(a?a.breakAfter:isBlockElement(o))||isBlockElement(c)&&(o.nodeName!="BR"||a!=null&&a.isWidget())&&this.text.length>l)&&!isEmptyToEnd(c,n)&&this.lineBreak(),o=c}return this.findPointBefore(s,n),this}readTextNode(e){let n=e.nodeValue;for(let s of this.points)s.node==e&&(s.pos=this.text.length+Math.min(s.offset,n.length));for(let s=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,a=1,c;if(this.lineSeparator?(l=n.indexOf(this.lineSeparator,s),a=this.lineSeparator.length):(c=o.exec(n))&&(l=c.index,a=c[0].length),this.append(n.slice(s,l<0?n.length:l)),l<0)break;if(this.lineBreak(),a>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=a-1);s=l+a}}readNode(e){let n=Tile.get(e),s=n&&n.overrideDOMText;if(s!=null){this.findPointInside(e,s.length);for(let o=s.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let s of this.points)s.node==e&&e.childNodes[s.offset]==n&&(s.pos=this.text.length)}findPointInside(e,n){for(let s of this.points)(e.nodeType==3?s.node==e:e.contains(s.node))&&(s.pos=this.text.length+(isAtEnd(e,s.node,s.offset)?n:0))}}function isAtEnd(r,e,n){for(;;){if(!e||n<maxOffset(e))return!1;if(e==r)return!0;n=domIndex(e)+1,e=e.parentNode}}function isEmptyToEnd(r,e){let n;for(;!(r==e||!r);r=r.nextSibling){let s=Tile.get(r);if(!(s!=null&&s.isWidget()))return!1;s&&(n||(n=[])).push(s)}if(n)for(let s of n){let o=s.overrideDOMText;if(o!=null&&o.length)return!1}return!0}class DOMPoint{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class DOMChange{constructor(e,n,s,o){this.typeOver=o,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:l,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=domBoundsAround(e.docView.tile,n,s,0))){let c=l||a?[]:selectionPoints(e),u=new DOMReader(c,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=selectionFromPoints(c,this.bounds.from)}else{let c=e.observer.selectionRange,u=l&&l.node==c.focusNode&&l.offset==c.focusOffset||!contains(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),f=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!contains(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),d=e.viewport;if((browser.ios||browser.chrome)&&e.state.selection.main.empty&&u!=f&&(d.from>0||d.to<e.state.doc.length)){let g=Math.min(u,f),m=Math.max(u,f),v=d.from-g,k=d.to-m;(v==0||v==1||g==0)&&(k==0||k==-1||m==e.state.doc.length)&&(u=0,f=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(EditorSelection.range(f,u)):this.newSel=EditorSelection.single(f,u)}}}function domBoundsAround(r,e,n,s){if(r.isComposite()){let o=-1,l=-1,a=-1,c=-1;for(let u=0,f=s,d=s;u<r.children.length;u++){let g=r.children[u],m=f+g.length;if(f<e&&m>n)return domBoundsAround(g,e,n,f);if(m>=e&&o==-1&&(o=u,l=f),f>n&&g.dom.parentNode==r.dom){a=u,c=d;break}d=m,f=m+g.breakAfter}return{from:l,to:c<0?s+r.length:c,startDOM:(o?r.children[o-1].dom.nextSibling:null)||r.dom.firstChild,endDOM:a<r.children.length&&a>=0?r.children[a].dom:null}}else return r.isText()?{from:s,to:s+r.length,startDOM:r.dom,endDOM:r.dom.nextSibling}:null}function applyDOMChange(r,e){let n,{newSel:s}=e,o=r.state.selection.main,l=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:c}=e.bounds,u=o.from,f=null;(l===8||browser.android&&e.text.length<c-a)&&(u=o.to,f="end");let d=findDiff(r.state.doc.sliceString(a,c,LineBreakPlaceholder),e.text,u-a,f);d&&(browser.chrome&&l==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&d.toB--,n={from:a+d.from,to:a+d.toA,insert:Text.of(e.text.slice(d.from,d.toB).split(LineBreakPlaceholder))})}else s&&(!r.hasFocus&&r.state.facet(editable)||s.main.eq(o))&&(s=null);if(!n&&!s)return!1;if(!n&&e.typeOver&&!o.empty&&s&&s.main.empty?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,o.to)}:(browser.mac||browser.android)&&n&&n.from==n.to&&n.from==o.head-1&&/^\. ?$/.test(n.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(s&&n.insert.length==2&&(s=EditorSelection.single(s.main.anchor-1,s.main.head-1)),n={from:n.from,to:n.to,insert:Text.of([n.insert.toString().replace("."," ")])}):n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:r.state.doc.slice(o.from,n.from).append(n.insert).append(r.state.doc.slice(n.to,o.to))}:r.state.doc.lineAt(o.from).to<o.to&&r.docView.lineHasWidget(o.to)&&r.inputState.insertingTextAt>Date.now()-50?n={from:o.from,to:o.to,insert:r.state.toText(r.inputState.insertingText)}:browser.chrome&&n&&n.from==n.to&&n.from==o.head&&n.insert.toString()==`
 `&&r.lineWrapping&&(s&&(s=EditorSelection.single(s.main.anchor-1,s.main.head-1)),n={from:o.from,to:o.to,insert:Text.of([" "])}),n)return applyDOMChangeInner(r,n,s,l);if(s&&!s.main.eq(o)){let a=!1,c="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(a=!0),c=r.inputState.lastSelectionOrigin,c=="select.pointer"&&(s=skipAtomsForSelection(r.state.facet(atomicRanges).map(u=>u(r)),s))),r.dispatch({selection:s,scrollIntoView:a,userEvent:c}),!0}else return!1}function applyDOMChangeInner(r,e,n,s=-1){if(browser.ios&&r.inputState.flushIOSKey(e))return!0;let o=r.state.selection.main;if(browser.android&&(e.to==o.to&&(e.from==o.from||e.from==o.from-1&&r.state.sliceDoc(e.from,o.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&dispatchKey(r.contentDOM,"Enter",13)||(e.from==o.from-1&&e.to==o.to&&e.insert.length==0||s==8&&e.insert.length<e.to-e.from&&e.to>o.head)&&dispatchKey(r.contentDOM,"Backspace",8)||e.from==o.from&&e.to==o.to+1&&e.insert.length==0&&dispatchKey(r.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let a,c=()=>a||(a=applyDefaultInsert(r,e,n));return r.state.facet(inputHandler$1).some(u=>u(r,e.from,e.to,l,c))||r.dispatch(c()),!0}function applyDefaultInsert(r,e,n){let s,o=r.state,l=o.selection.main,a=-1;if(e.from==e.to&&e.from<l.from||e.from>l.to){let u=e.from<l.from?-1:1,f=u<0?l.from:l.to,d=skipAtomicRanges(o.facet(atomicRanges).map(g=>g(r)),f,u);e.from==d&&(a=d)}if(a>-1)s={changes:e,selection:EditorSelection.cursor(e.from+e.insert.length,-1)};else if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let u=l.from<e.from?o.sliceDoc(l.from,e.from):"",f=l.to>e.to?o.sliceDoc(e.to,l.to):"";s=o.replaceSelection(r.state.toText(u+e.insert.sliceString(0,void 0,r.state.lineBreak)+f))}else{let u=o.changes(e),f=n&&n.main.to<=u.newLength?n.main:void 0;if(o.selection.ranges.length>1&&(r.inputState.composing>=0||r.inputState.compositionPendingChange)&&e.to<=l.to+10&&e.to>=l.to-10){let d=r.state.sliceDoc(e.from,e.to),g,m=n&&findCompositionNode(r,n.main.head);if(m){let k=e.insert.length-(e.to-e.from);g={from:m.from,to:m.to-k}}else g=r.state.doc.lineAt(l.head);let v=l.to-e.to;s=o.changeByRange(k=>{if(k.from==l.from&&k.to==l.to)return{changes:u,range:f||k.map(u)};let A=k.to-v,E=A-d.length;if(r.state.sliceDoc(E,A)!=d||A>=g.from&&E<=g.to)return{range:k};let N=o.changes({from:E,to:A,insert:e.insert}),V=k.to-l.to;return{changes:N,range:f?EditorSelection.range(Math.max(0,f.anchor+V),Math.max(0,f.head+V)):k.map(N)}})}else s={changes:u,selection:f&&o.selection.replaceRange(f)}}let c="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,c+=".compose",r.inputState.compositionFirstChange&&(c+=".start",r.inputState.compositionFirstChange=!1)),o.update(s,{userEvent:c,scrollIntoView:!0})}function findDiff(r,e,n,s){let o=Math.min(r.length,e.length),l=0;for(;l<o&&r.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==o&&r.length==e.length)return null;let a=r.length,c=e.length;for(;a>0&&c>0&&r.charCodeAt(a-1)==e.charCodeAt(c-1);)a--,c--;if(s=="end"){let u=Math.max(0,l-Math.min(a,c));n-=a+u-l}if(a<l&&r.length<e.length){let u=n<=l&&n>=a?l-n:0;l-=u,c=l+(c-a),a=l}else if(c<l){let u=n<=l&&n>=c?l-n:0;l-=u,a=l+(a-c),c=l}return{from:l,toA:a,toB:c}}function selectionPoints(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:n,anchorOffset:s,focusNode:o,focusOffset:l}=r.observer.selectionRange;return n&&(e.push(new DOMPoint(n,s)),(o!=n||l!=s)&&e.push(new DOMPoint(o,l))),e}function selectionFromPoints(r,e){if(r.length==0)return null;let n=r[0].pos,s=r.length==2?r[1].pos:n;return n>-1&&s>-1?EditorSelection.single(n+e,s+e):null}class InputState{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(e.contentDOM.ownerDocument)}handleEvent(e){!eventBelongsToEditor(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let s=this.handlers[e];if(s){for(let o of s.observers)o(this.view,n);for(let o of s.handlers){if(n.defaultPrevented)break;if(o(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=computeHandlers(e),s=this.handlers,o=this.view.contentDOM;for(let l in n)if(l!="scroll"){let a=!n[l].handlers.length,c=s[l];c&&a!=!c.handlers.length&&(o.removeEventListener(l,this.handleEvent),c=null),c||o.addEventListener(l,this.handleEvent,{passive:a})}for(let l in s)l!="scroll"&&!n[l]&&o.removeEventListener(l,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&modifierCodes.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return browser.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=PendingKeys.find(s=>s.keyCode==e.keyCode))&&!e.ctrlKey||EmacsyPendingKeys.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(r,e){return(n,s)=>{try{return e.call(r,s,n)}catch(o){logException(n.state,o)}}}function computeHandlers(r){let e=Object.create(null);function n(s){return e[s]||(e[s]={observers:[],handlers:[]})}for(let s of r){let o=s.spec,l=o&&o.plugin.domEventHandlers,a=o&&o.plugin.domEventObservers;if(l)for(let c in l){let u=l[c];u&&n(c).handlers.push(bindHandler(s.value,u))}if(a)for(let c in a){let u=a[c];u&&n(c).observers.push(bindHandler(s.value,u))}}for(let s in handlers)n(s).handlers.push(handlers[s]);for(let s in observers)n(s).observers.push(observers[s]);return e}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(r){return Math.max(0,r)*.7+8}function dist(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class MouseSelection{constructor(e,n,s,o){this.view=e,this.startEvent=n,this.style=s,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=scrollableParents(e.contentDOM),this.atoms=e.state.facet(atomicRanges).map(a=>a(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,n),this.dragging=isInPrimarySelection(e,n)&&getClickType(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,s=0,o=0,l=0,a=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:c}=this.scrollParents.y.getBoundingClientRect());let u=getScrollMargins(this.view);e.clientX-u.left<=o+dragScrollMargin?n=-dragScrollSpeed(o-e.clientX):e.clientX+u.right>=a-dragScrollMargin&&(n=dragScrollSpeed(e.clientX-a)),e.clientY-u.top<=l+dragScrollMargin?s=-dragScrollSpeed(l-e.clientY):e.clientY+u.bottom>=c-dragScrollMargin&&(s=dragScrollSpeed(e.clientY-c)),this.setScrollSpeed(n,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,s=skipAtomsForSelection(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!s.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:s,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(r,e){let n=r.state.facet(clickAddsSelectionRange);return n.length?n[0](e):browser.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(r,e){let n=r.state.facet(dragMovesSelection$1);return n.length?n[0](e):browser.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(r,e){let{main:n}=r.state.selection;if(n.empty)return!1;let s=getSelection(r.root);if(!s||s.rangeCount==0)return!0;let o=s.getRangeAt(0).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,s;n!=r.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(s=Tile.get(n))&&s.isWidget()&&!s.isHidden&&s.widget.ignoreEvent(e))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(r){let e=r.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{r.focus(),n.remove(),doPaste(r,n.value)},50)}function textFilter(r,e,n){for(let s of r.facet(e))n=s(n,r);return n}function doPaste(r,e){e=textFilter(r.state,clipboardInputFilter,e);let{state:n}=r,s,o=1,l=n.toText(e),a=l.lines==n.selection.ranges.length;if(lastLinewiseCopy!=null&&n.selection.ranges.every(u=>u.empty)&&lastLinewiseCopy==l.toString()){let u=-1;s=n.changeByRange(f=>{let d=n.doc.lineAt(f.from);if(d.from==u)return{range:f};u=d.from;let g=n.toText((a?l.line(o++).text:e)+n.lineBreak);return{changes:{from:d.from,insert:g},range:EditorSelection.cursor(f.from+g.length)}})}else a?s=n.changeByRange(u=>{let f=l.line(o++);return{changes:{from:u.from,to:u.to,insert:f.text},range:EditorSelection.cursor(u.from+f.length)}}):s=n.replaceSelection(l);r.dispatch(s,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};handlers.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let s of r.state.facet(mouseSelectionStyle))if(n=s(r,e),n)break;if(!n&&e.button==0&&(n=basicMouseSelection(r,e)),n){let s=!r.hasFocus;r.inputState.startMouseSelection(new MouseSelection(r,e,n,s)),s&&r.observer.ignore(()=>{focusPreventScroll(r.contentDOM);let l=r.root.activeElement;l&&!l.contains(r.contentDOM)&&l.blur()});let o=r.inputState.mouseSelection;if(o)return o.start(e),o.dragging===!1}else r.inputState.setSelectionOrigin("select.pointer");return!1};function rangeForClick(r,e,n,s){if(s==1)return EditorSelection.cursor(e,n);if(s==2)return groupAt(r.state,e,n);{let o=r.docView.lineAt(e,n),l=r.state.doc.lineAt(o?o.posAtEnd:e),a=o?o.posAtStart:l.from,c=o?o.posAtEnd:l.to;return c<r.state.doc.length&&c==l.to&&c++,EditorSelection.range(a,c)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(r){if(!BadMouseDetail)return r.detail;let e=lastMouseDown,n=lastMouseDownTime;return lastMouseDown=r,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||n>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(r,e){let n=r.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),s=getClickType(e),o=r.state.selection;return{update(l){l.docChanged&&(n.pos=l.changes.mapPos(n.pos),o=o.map(l.changes))},get(l,a,c){let u=r.posAndSideAtCoords({x:l.clientX,y:l.clientY},!1),f,d=rangeForClick(r,u.pos,u.assoc,s);if(n.pos!=u.pos&&!a){let g=rangeForClick(r,n.pos,n.assoc,s),m=Math.min(g.from,d.from),v=Math.max(g.to,d.to);d=m<d.from?EditorSelection.range(m,v):EditorSelection.range(v,m)}return a?o.replaceRange(o.main.extend(d.from,d.to)):c&&s==1&&o.ranges.length>1&&(f=removeRangeAround(o,u.pos))?f:c?o.addRange(d):EditorSelection.create([d])}}}function removeRangeAround(r,e){for(let n=0;n<r.ranges.length;n++){let{from:s,to:o}=r.ranges[n];if(s<=e&&o>=e)return EditorSelection.create(r.ranges.slice(0,n).concat(r.ranges.slice(n+1)),r.mainIndex==n?0:r.mainIndex-(r.mainIndex>n?1:0))}return null}handlers.dragstart=(r,e)=>{let{selection:{main:n}}=r.state;if(e.target.draggable){let o=r.docView.tile.nearest(e.target);if(o&&o.isWidget()){let l=o.posAtStart,a=l+o.length;(l>=n.to||a<=n.from)&&(n=EditorSelection.range(l,a))}}let{inputState:s}=r;return s.mouseSelection&&(s.mouseSelection.dragging=!0),s.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",textFilter(r.state,clipboardOutputFilter,r.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=r=>(r.inputState.draggedContent=null,!1);function dropText(r,e,n,s){if(n=textFilter(r.state,clipboardInputFilter,n),!n)return;let o=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=r.inputState,a=s&&l&&dragMovesSelection(r,e)?{from:l.from,to:l.to}:null,c={from:o,insert:n},u=r.state.changes(a?[a,c]:c);r.focus(),r.dispatch({changes:u,selection:{anchor:u.mapPos(o,-1),head:u.mapPos(o,1)},userEvent:a?"move.drop":"input.drop"}),r.inputState.draggedContent=null}handlers.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let s=Array(n.length),o=0,l=()=>{++o==n.length&&dropText(r,e,s.filter(a=>a!=null).join(r.state.lineBreak),!1)};for(let a=0;a<n.length;a++){let c=new FileReader;c.onerror=l,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(s[a]=c.result),l()},c.readAsText(n[a])}return!0}else{let s=e.dataTransfer.getData("Text");if(s)return dropText(r,e,s,!0),!0}return!1};handlers.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let n=brokenClipboardAPI?null:e.clipboardData;return n?(doPaste(r,n.getData("text/plain")||n.getData("text/uri-list")),!0):(capturePaste(r),!1)};function captureCopy(r,e){let n=r.dom.parentNode;if(!n)return;let s=n.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=e,s.focus(),s.selectionEnd=e.length,s.selectionStart=0,setTimeout(()=>{s.remove(),r.focus()},50)}function copiedRange(r){let e=[],n=[],s=!1;for(let o of r.selection.ranges)o.empty||(e.push(r.sliceDoc(o.from,o.to)),n.push(o));if(!e.length){let o=-1;for(let{from:l}of r.selection.ranges){let a=r.doc.lineAt(l);a.number>o&&(e.push(a.text),n.push({from:a.from,to:Math.min(r.doc.length,a.to+1)})),o=a.number}s=!0}return{text:textFilter(r,clipboardOutputFilter,e.join(r.lineBreak)),ranges:n,linewise:s}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(r,e)=>{let{text:n,ranges:s,linewise:o}=copiedRange(r.state);if(!n&&!o)return!1;lastLinewiseCopy=o?n:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"});let l=brokenClipboardAPI?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",n),!0):(captureCopy(r,n),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(r,e){let n=[];for(let s of r.facet(focusChangeEffect)){let o=s(r,e);o&&n.push(o)}return n.length?r.update({effects:n,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let n=focusChangeTransaction(r.state,e);n?r.dispatch(n):r.update([])}},10)}observers.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),updateForFocusChange(r)};observers.blur=r=>{r.observer.clearSelectionRange(),updateForFocusChange(r)};observers.compositionstart=observers.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};observers.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,browser.chrome&&browser.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};observers.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(r,e)=>{var n,s;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(r.inputState.insertingText=e.data,r.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&r.observer.editContext){let l=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),a=e.getTargetRanges();if(l&&a.length){let c=a[0],u=r.posAtDOM(c.startContainer,c.startOffset),f=r.posAtDOM(c.endContainer,c.endOffset);return applyDOMChangeInner(r,{from:u,to:f,insert:r.state.toText(l)},null),!0}}let o;if(browser.chrome&&browser.android&&(o=PendingKeys.find(l=>l.inputType==e.inputType))&&(r.observer.delayAndroidKey(o.key,o.keyCode),o.key=="Backspace"||o.key=="Delete")){let l=((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>l+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return browser.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),browser.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>observers.compositionend(r,e),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(r){appliedFirefoxHack.has(r)||(appliedFirefoxHack.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let s=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(s+=Math.max(0,Math.ceil((n-e-s*this.lineLength*.5)/this.lineLength))),this.lineHeight*s}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let s=0;s<e.length;s++){let o=e[s];o<0?s++:this.heightSamples[Math.floor(o*10)]||(n=!0,this.heightSamples[Math.floor(o*10)]=!0)}return n}refresh(e,n,s,o,l,a){let c=wrappingWhiteSpace.indexOf(e)>-1,u=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=n,this.charWidth=s,this.textHeight=o,this.lineLength=l,u){this.heightSamples={};for(let f=0;f<a.length;f++){let d=a[f];d<0?f++:this.heightSamples[Math.floor(d*10)]=!0}}return u}}class MeasuredHeights{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,n,s,o,l){this.from=e,this.length=n,this.top=s,this.height=o,this._content=l}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var QueryType$1=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(e,n,s=2){this.length=e,this.height=n,this.flags=s}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Epsilon&&(heightChangeFlag=!0),this.height=e)}replace(e,n,s){return HeightMap.of(s)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,s,o){let l=this,a=s.doc;for(let c=o.length-1;c>=0;c--){let{fromA:u,toA:f,fromB:d,toB:g}=o[c],m=l.lineAt(u,QueryType$1.ByPosNoHeight,s.setDoc(n),0,0),v=m.to>=f?m:l.lineAt(f,QueryType$1.ByPosNoHeight,s,0,0);for(g+=v.to-f,f=v.to;c>0&&m.from<=o[c-1].toA;)u=o[c-1].fromA,d=o[c-1].fromB,c--,u<m.from&&(m=l.lineAt(u,QueryType$1.ByPosNoHeight,s,0,0));d+=m.from-u,u=m.from;let k=NodeBuilder.build(s.setDoc(a),e,d,g);l=replace(l,l.replace(u,f,k))}return l.updateHeight(s,0)}static empty(){return new HeightMapText(0,0,0)}static of(e){if(e.length==1)return e[0];let n=0,s=e.length,o=0,l=0;for(;;)if(n==s)if(o>l*2){let c=e[n-1];c.break?e.splice(--n,1,c.left,null,c.right):e.splice(--n,1,c.left,c.right),s+=1+c.break,o-=c.size}else if(l>o*2){let c=e[s];c.break?e.splice(s,1,c.left,null,c.right):e.splice(s,1,c.left,c.right),s+=2+c.break,l-=c.size}else break;else if(o<l){let c=e[n++];c&&(o+=c.size)}else{let c=e[--s];c&&(l+=c.size)}let a=0;return e[n-1]==null?(a=1,n--):e[n]==null&&(a=1,s++),new HeightMapBranch(HeightMap.of(e.slice(0,n)),a,HeightMap.of(e.slice(s)))}}function replace(r,e){return r==e?r:(r.constructor!=e.constructor&&(heightChangeFlag=!0),e)}HeightMap.prototype.size=1;const SpaceDeco=Decoration.replace({});class HeightMapBlock extends HeightMap{constructor(e,n,s){super(e,n),this.deco=s,this.spaceAbove=0}mainBlock(e,n){return new BlockInfo(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,n,s,o){return this.spaceAbove&&e<s+this.spaceAbove?new BlockInfo(o,0,s,this.spaceAbove,SpaceDeco):this.mainBlock(s,o)}lineAt(e,n,s,o,l){let a=this.mainBlock(o,l);return this.spaceAbove?this.blockAt(0,s,o,l).join(a):a}forEachLine(e,n,s,o,l,a){e<=l+this.length&&n>=l&&a(this.lineAt(0,QueryType$1.ByPos,s,o,l))}setMeasuredHeight(e){let n=e.heights[e.index++];n<0?(this.spaceAbove=-n,n=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(n)}updateHeight(e,n=0,s=!1,o){return o&&o.from<=n&&o.more&&this.setMeasuredHeight(o),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,n,s){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=s}mainBlock(e,n){return new BlockInfo(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,n,s){let o=s[0];return s.length==1&&(o instanceof HeightMapText||o instanceof HeightMapGap&&o.flags&4)&&Math.abs(this.length-o.length)<10?(o instanceof HeightMapGap?o=new HeightMapText(o.length,this.height,this.spaceAbove):o.height=this.height,this.outdated||(o.outdated=!1),o):HeightMap.of(s)}updateHeight(e,n=0,s=!1,o){return o&&o.from<=n&&o.more?this.setMeasuredHeight(o):(s||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,n){let s=e.doc.lineAt(n).number,o=e.doc.lineAt(n+this.length).number,l=o-s+1,a,c=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*l);a=u/l,this.length>l+1&&(c=(this.height-u)/(this.length-l-1))}else a=this.height/l;return{firstLine:s,lastLine:o,perLine:a,perChar:c}}blockAt(e,n,s,o){let{firstLine:l,lastLine:a,perLine:c,perChar:u}=this.heightMetrics(n,o);if(n.lineWrapping){let f=o+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-s)/this.height))*this.length)),d=n.doc.lineAt(f),g=c+d.length*u,m=Math.max(s,e-g/2);return new BlockInfo(d.from,d.length,m,g,0)}else{let f=Math.max(0,Math.min(a-l,Math.floor((e-s)/c))),{from:d,length:g}=n.doc.line(l+f);return new BlockInfo(d,g,s+c*f,c,0)}}lineAt(e,n,s,o,l){if(n==QueryType$1.ByHeight)return this.blockAt(e,s,o,l);if(n==QueryType$1.ByPosNoHeight){let{from:v,to:k}=s.doc.lineAt(e);return new BlockInfo(v,k-v,0,0,0)}let{firstLine:a,perLine:c,perChar:u}=this.heightMetrics(s,l),f=s.doc.lineAt(e),d=c+f.length*u,g=f.number-a,m=o+c*g+u*(f.from-l-g);return new BlockInfo(f.from,f.length,Math.max(o,Math.min(m,o+this.height-d)),d,0)}forEachLine(e,n,s,o,l,a){e=Math.max(e,l),n=Math.min(n,l+this.length);let{firstLine:c,perLine:u,perChar:f}=this.heightMetrics(s,l);for(let d=e,g=o;d<=n;){let m=s.doc.lineAt(d);if(d==e){let k=m.number-c;g+=u*k+f*(e-l-k)}let v=u+f*m.length;a(new BlockInfo(m.from,m.length,g,v,0)),g+=v,d=m.to+1}}replace(e,n,s){let o=this.length-n;if(o>0){let l=s[s.length-1];l instanceof HeightMapGap?s[s.length-1]=new HeightMapGap(l.length+o):s.push(null,new HeightMapGap(o-1))}if(e>0){let l=s[0];l instanceof HeightMapGap?s[0]=new HeightMapGap(e+l.length):s.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(s)}decomposeLeft(e,n){n.push(new HeightMapGap(e-1),null)}decomposeRight(e,n){n.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,n=0,s=!1,o){let l=n+this.length;if(o&&o.from<=n+this.length&&o.more){let a=[],c=Math.max(n,o.from),u=-1;for(o.from>n&&a.push(new HeightMapGap(o.from-n-1).updateHeight(e,n));c<=l&&o.more;){let d=e.doc.lineAt(c).length;a.length&&a.push(null);let g=o.heights[o.index++],m=0;g<0&&(m=-g,g=o.heights[o.index++]),u==-1?u=g:Math.abs(g-u)>=Epsilon&&(u=-2);let v=new HeightMapText(d,g,m);v.outdated=!1,a.push(v),c+=d+1}c<=l&&a.push(null,new HeightMapGap(l-c).updateHeight(e,c));let f=HeightMap.of(a);return(u<0||Math.abs(f.height-this.height)>=Epsilon||Math.abs(u-this.heightMetrics(e,n).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,f)}else(s||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,n,s){super(e.length+n+s.length,e.height+s.height,n|(e.outdated||s.outdated?2:0)),this.left=e,this.right=s,this.size=e.size+s.size}get break(){return this.flags&1}blockAt(e,n,s,o){let l=s+this.left.height;return e<l?this.left.blockAt(e,n,s,o):this.right.blockAt(e,n,l,o+this.left.length+this.break)}lineAt(e,n,s,o,l){let a=o+this.left.height,c=l+this.left.length+this.break,u=n==QueryType$1.ByHeight?e<a:e<c,f=u?this.left.lineAt(e,n,s,o,l):this.right.lineAt(e,n,s,a,c);if(this.break||(u?f.to<c:f.from>c))return f;let d=n==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return u?f.join(this.right.lineAt(c,d,s,a,c)):this.left.lineAt(c,d,s,o,l).join(f)}forEachLine(e,n,s,o,l,a){let c=o+this.left.height,u=l+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,n,s,o,l,a),n>=u&&this.right.forEachLine(e,n,s,c,u,a);else{let f=this.lineAt(u,QueryType$1.ByPos,s,o,l);e<f.from&&this.left.forEachLine(e,f.from-1,s,o,l,a),f.to>=e&&f.from<=n&&a(f),n>f.to&&this.right.forEachLine(f.to+1,n,s,c,u,a)}}replace(e,n,s){let o=this.left.length+this.break;if(n<o)return this.balanced(this.left.replace(e,n,s),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,n-o,s));let l=[];e>0&&this.decomposeLeft(e,l);let a=l.length;for(let c of s)l.push(c);if(e>0&&mergeGaps(l,a-1),n<this.length){let c=l.length;this.decomposeRight(n,l),mergeGaps(l,c)}return HeightMap.of(l)}decomposeLeft(e,n){let s=this.left.length;if(e<=s)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(s++,e>=s&&n.push(null)),e>s&&this.right.decomposeLeft(e-s,n)}decomposeRight(e,n){let s=this.left.length,o=s+this.break;if(e>=o)return this.right.decomposeRight(e-o,n);e<s&&this.left.decomposeRight(e,n),this.break&&e<o&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?HeightMap.of(this.break?[e,null,n]:[e,n]):(this.left=replace(this.left,e),this.right=replace(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,s=!1,o){let{left:l,right:a}=this,c=n+l.length+this.break,u=null;return o&&o.from<=n+l.length&&o.more?u=l=l.updateHeight(e,n,s,o):l.updateHeight(e,n,s),o&&o.from<=c+a.length&&o.more?u=a=a.updateHeight(e,c,s,o):a.updateHeight(e,c,s),u?this.balanced(l,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(r,e){let n,s;r[e]==null&&(n=r[e-1])instanceof HeightMapGap&&(s=r[e+1])instanceof HeightMapGap&&r.splice(e-1,3,new HeightMapGap(n.length+1+s.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let s=Math.min(n,this.lineEnd),o=this.nodes[this.nodes.length-1];o instanceof HeightMapText?o.length+=s-this.pos:(s>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(s-this.pos,-1,0)),this.writtenTo=s,n>s&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,s){if(e<n||s.heightRelevant){let o=s.widget?s.widget.estimatedHeight:0,l=s.widget?s.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let a=n-e;s.block?this.addBlock(new HeightMapBlock(a,o,s)):(a||l||o>=relevantWidgetHeight)&&this.addLineDeco(o,l,a)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,n){let s=new HeightMapGap(n-e);return this.oracle.doc.lineAt(e).to==n&&(s.flags|=4),s}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let n=new HeightMapText(0,-1,0);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,s){let o=this.ensureLine();o.length+=s,o.collapsed+=s,o.widgetHeight=Math.max(o.widgetHeight,e),o.breaks+=n,this.writtenTo=this.pos=this.pos+s}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1,0)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let s=e;for(let o of this.nodes)o instanceof HeightMapText&&o.updateHeight(this.oracle,s),s+=o?o.length:1;return this.nodes}static build(e,n,s,o){let l=new NodeBuilder(s,e);return RangeSet.spans(n,s,o,l,0),l.finish(s)}}function heightRelevantDecoChanges(r,e,n){let s=new DecorationComparator;return RangeSet.compare(r,e,n,s,0),s.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,s,o){(e<n||s&&s.heightRelevant||o&&o.heightRelevant)&&addRange(e,n,this.changes,5)}}function visiblePixelRange(r,e){let n=r.getBoundingClientRect(),s=r.ownerDocument,o=s.defaultView||window,l=Math.max(0,n.left),a=Math.min(o.innerWidth,n.right),c=Math.max(0,n.top),u=Math.min(o.innerHeight,n.bottom);for(let f=r.parentNode;f&&f!=s.body;)if(f.nodeType==1){let d=f,g=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&g.overflow!="visible"){let m=d.getBoundingClientRect();l=Math.max(l,m.left),a=Math.min(a,m.right),c=Math.max(c,m.top),u=Math.min(f==r.parentNode?o.innerHeight:u,m.bottom)}f=g.position=="absolute"||g.position=="fixed"?d.offsetParent:d.parentNode}else if(f.nodeType==11)f=f.host;else break;return{left:l-n.left,right:Math.max(l,a)-n.left,top:c-(n.top+e),bottom:Math.max(c,u)-(n.top+e)}}function inWindow(r){let e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function fullPixelRange(r,e){let n=r.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class LineGap{constructor(e,n,s,o){this.from=e,this.to=n,this.size=s,this.displaySize=o}static same(e,n){if(e.length!=n.length)return!1;for(let s=0;s<e.length;s++){let o=e[s],l=n[s];if(o.from!=l.from||o.to!=l.to||o.size!=l.size)return!1}return!0}draw(e,n){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(contentAttributes).some(s=>typeof s!="function"&&s.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(n),this.stateDeco=e.facet(decorations).filter(s=>typeof s!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]);for(let s=0;s<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());s++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(s=>s.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let s=0;s<=1;s++){let o=s?n.head:n.anchor;if(!e.some(({from:l,to:a})=>o>=l&&o<=a)){let{from:l,to:a}=this.lineBlockAt(o);e.push(new Viewport(l,a))}}return this.viewports=e.sort((s,o)=>s.from-o.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(scaleBlock(e,this.scaler))})}update(e,n=null){this.state=e.state;let s=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(d=>typeof d!="function");let o=e.changedRanges,l=ChangedRange.extendWithRanges(o,heightRelevantDecoChanges(s,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),a=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=a||heightChangeFlag)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let u=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<u.from||n.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,n));let f=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(f||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,s=window.getComputedStyle(n),o=this.heightOracle,l=s.whiteSpace;this.defaultTextDirection=s.direction=="rtl"?Direction.RTL:Direction.LTR;let a=this.heightOracle.mustRefreshForWrapping(l),c=n.getBoundingClientRect(),u=a||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let f=0,d=0;if(c.width&&c.height){let{scaleX:W,scaleY:H}=getScale(n,c);(W>.005&&Math.abs(this.scaleX-W)>.005||H>.005&&Math.abs(this.scaleY-H)>.005)&&(this.scaleX=W,this.scaleY=H,f|=16,a=u=!0)}let g=(parseInt(s.paddingTop)||0)*this.scaleY,m=(parseInt(s.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=m)&&(this.paddingTop=g,this.paddingBottom=m,f|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,f|=16);let v=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=v&&(this.scrollAnchorHeight=-1,this.scrollTop=v),this.scrolledToBottom=isScrolledToBottom(e.scrollDOM);let k=(this.printing?fullPixelRange:visiblePixelRange)(n,this.paddingTop),A=k.top-this.pixelViewport.top,E=k.bottom-this.pixelViewport.bottom;this.pixelViewport=k;let N=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(N!=this.inView&&(this.inView=N,N&&(u=!0)),!this.inView&&!this.scrollTarget&&!inWindow(e.dom))return 0;let V=c.width;if((this.contentDOMWidth!=V||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,f|=16),u){let W=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(W)&&(a=!0),a||o.lineWrapping&&Math.abs(V-this.contentDOMWidth)>o.charWidth){let{lineHeight:H,charWidth:$,textHeight:L}=e.docView.measureTextSize();a=H>0&&o.refresh(l,H,$,L,Math.max(5,V/$),W),a&&(e.docView.minWidth=0,f|=16)}A>0&&E>0?d=Math.max(A,E):A<0&&E<0&&(d=Math.min(A,E)),clearHeightChangeFlag();for(let H of this.viewports){let $=H.from==this.viewport.from?W:e.docView.measureVisibleLineHeights(H);this.heightMap=(a?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,a,new MeasuredHeights(H.from,$))}heightChangeFlag&&(f|=2)}let q=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return q&&(f&2&&(f|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),f|=this.updateForViewport()),(f&2||q)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),f|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),f}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let s=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,l=this.heightOracle,{visibleTop:a,visibleBottom:c}=this,u=new Viewport(o.lineAt(a-s*1e3,QueryType$1.ByHeight,l,0,0).from,o.lineAt(c+(1-s)*1e3,QueryType$1.ByHeight,l,0,0).to);if(n){let{head:f}=n.range;if(f<u.from||f>u.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=o.lineAt(f,QueryType$1.ByPos,l,0,0),m;n.y=="center"?m=(g.top+g.bottom)/2-d/2:n.y=="start"||n.y=="nearest"&&f<u.from?m=g.top:m=g.bottom-d,u=new Viewport(o.lineAt(m-1e3/2,QueryType$1.ByHeight,l,0,0).from,o.lineAt(m+d+1e3/2,QueryType$1.ByHeight,l,0,0).to)}}return u}mapViewport(e,n){let s=n.mapPos(e.from,-1),o=n.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(s,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},s=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(n,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:c}=this;return(e==0||o<=a-Math.max(10,Math.min(-s,250)))&&(n==this.state.doc.length||l>=c+Math.max(10,Math.min(s,250)))&&o>a-2*1e3&&l<c+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let s=[];for(let o of e)n.touchesRange(o.from,o.to)||s.push(new LineGap(n.mapPos(o.from),n.mapPos(o.to),o.size,o.displaySize));return s}ensureLineGaps(e,n){let s=this.heightOracle.lineWrapping,o=s?1e4:2e3,l=o>>1,a=o<<1;if(this.defaultTextDirection!=Direction.LTR&&!s)return[];let c=[],u=(d,g,m,v)=>{if(g-d<l)return;let k=this.state.selection.main,A=[k.from];k.empty||A.push(k.to);for(let N of A)if(N>d&&N<g){u(d,N-10,m,v),u(N+10,g,m,v);return}let E=find(e,N=>N.from>=m.from&&N.to<=m.to&&Math.abs(N.from-d)<l&&Math.abs(N.to-g)<l&&!A.some(V=>N.from<V&&N.to>V));if(!E){if(g<m.to&&n&&s&&n.visibleRanges.some(q=>q.from<=g&&q.to>=g)){let q=n.moveToLineBoundary(EditorSelection.cursor(g),!1,!0).head;q>d&&(g=q)}let N=this.gapSize(m,d,g,v),V=s||N<2e6?N:2e6;E=new LineGap(d,g,N,V)}c.push(E)},f=d=>{if(d.length<a||d.type!=BlockType.Text)return;let g=lineStructure(d.from,d.to,this.stateDeco);if(g.total<a)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,v,k;if(s){let A=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,E,N;if(m!=null){let V=findFraction(g,m),q=((this.visibleBottom-this.visibleTop)/2+A)/d.height;E=V-q,N=V+q}else E=(this.visibleTop-d.top-A)/d.height,N=(this.visibleBottom-d.top+A)/d.height;v=findPosition(g,E),k=findPosition(g,N)}else{let A=g.total*this.heightOracle.charWidth,E=o*this.heightOracle.charWidth,N=0;if(A>2e6)for(let $ of e)$.from>=d.from&&$.from<d.to&&$.size!=$.displaySize&&$.from*this.heightOracle.charWidth+N<this.pixelViewport.left&&(N=$.size-$.displaySize);let V=this.pixelViewport.left+N,q=this.pixelViewport.right+N,W,H;if(m!=null){let $=findFraction(g,m),L=((q-V)/2+E)/A;W=$-L,H=$+L}else W=(V-E)/A,H=(q+E)/A;v=findPosition(g,W),k=findPosition(g,H)}v>d.from&&u(d.from,v,d,g),k<d.to&&u(k,d.to,d,g)};for(let d of this.viewportLines)Array.isArray(d.type)?d.type.forEach(f):f(d);return c}gapSize(e,n,s,o){let l=findFraction(o,s)-findFraction(o,n);return this.heightOracle.lineWrapping?e.height*l:o.total*this.heightOracle.charWidth*l}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let s=[];RangeSet.spans(n,this.viewport.from,this.viewport.to,{span(l,a){s.push({from:l,to:a})},point(){}},20);let o=0;if(s.length!=this.visibleRanges.length)o=12;else for(let l=0;l<s.length&&!(o&8);l++){let a=this.visibleRanges[l],c=s[l];(a.from!=c.from||a.to!=c.to)&&(o|=4,e&&e.mapPos(a.from,-1)==c.from&&e.mapPos(a.to,1)==c.to||(o|=8))}return this.visibleRanges=s,o}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,n){this.from=e,this.to=n}}function lineStructure(r,e,n){let s=[],o=r,l=0;return RangeSet.spans(n,r,e,{span(){},point(a,c){a>o&&(s.push({from:o,to:a}),l+=a-o),o=c}},20),o<e&&(s.push({from:o,to:e}),l+=e-o),{total:l,ranges:s}}function findPosition({total:r,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let s=Math.floor(r*n);for(let o=0;;o++){let{from:l,to:a}=e[o],c=a-l;if(s<=c)return l+s;s-=c}}function findFraction(r,e){let n=0;for(let{from:s,to:o}of r.ranges){if(e<=o){n+=e-s;break}n+=o-s}return n/r.total}function find(r,e){for(let n of r)if(e(n))return n}const IdScaler={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}};class BigScaler{constructor(e,n,s){let o=0,l=0,a=0;this.viewports=s.map(({from:c,to:u})=>{let f=n.lineAt(c,QueryType$1.ByPos,e,0,0).top,d=n.lineAt(u,QueryType$1.ByPos,e,0,0).bottom;return o+=d-f,{from:c,to:u,top:f,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-o)/(n.height-o);for(let c of this.viewports)c.domTop=a+(c.top-l)*this.scale,a=c.domBottom=c.domTop+(c.bottom-c.top),l=c.bottom}toDOM(e){for(let n=0,s=0,o=0;;n++){let l=n<this.viewports.length?this.viewports[n]:null;if(!l||e<l.top)return o+(e-s)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);s=l.bottom,o=l.domBottom}}fromDOM(e){for(let n=0,s=0,o=0;;n++){let l=n<this.viewports.length?this.viewports[n]:null;if(!l||e<l.domTop)return s+(e-o)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);s=l.bottom,o=l.domBottom}}eq(e){return e instanceof BigScaler?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,s)=>n.from==e.viewports[s].from&&n.to==e.viewports[s].to):!1}}function scaleBlock(r,e){if(e.scale==1)return r;let n=e.toDOM(r.top),s=e.toDOM(r.bottom);return new BlockInfo(r.from,r.length,n,s-n,Array.isArray(r._content)?r._content.map(o=>scaleBlock(o,e)):r._content)}const theme=Facet.define({combine:r=>r.join(" ")}),darkTheme=Facet.define({combine:r=>r.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(r,e,n){return new StyleModule(e,{finish(s){return/&/.test(s)?s.replace(/&\w*/,o=>{if(o=="&")return r;if(!n||!n[o])throw new RangeError(`Unsupported selector: ${o}`);return n[o]}):r+" "+s}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let s of n)this.queue.push(s);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&browser.android&&e.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(e),e.state.facet(editable)&&(e.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,s)=>n!=e[s]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:s}=this,o=this.selectionRange;if(s.state.facet(editable)?s.root.activeElement!=this.dom:!hasSelection(this.dom,o))return;let l=o.anchorNode&&s.docView.tile.nearest(o.anchorNode);if(l&&l.isWidget()&&l.widget.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!s.state.selection.main.empty&&o.focusNode&&isEquivalentPosition(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=getSelection(e.root);if(!n)return!1;let s=browser.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,n)||n;if(!s||this.selectionRange.eq(s))return!1;let o=hasSelection(this.dom,s);return o&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,s)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(s),o&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let s=this.dom;s;)if(s.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==s?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);for(let s of this.scrollTargets=n)s.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var s;if(!this.delayedAndroidKey){let o=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&dispatchKey(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((s=this.delayedAndroidKey)===null||s===void 0)&&s.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,s=-1,o=!1;for(let l of e){let a=this.readMutation(l);a&&(a.typeOver&&(o=!0),n==-1?{from:n,to:s}=a:(n=Math.min(a.from,n),s=Math.max(a.to,s)))}return{from:n,to:s,typeOver:o}}readChange(){let{from:e,to:n,typeOver:s}=this.processRecords(),o=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(e<0&&!o)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new DOMChange(this.view,e,n,s);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let s=this.view.state,o=applyDOMChange(this.view,n);return this.view.state==s&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),o}readMutation(e){let n=this.view.docView.tile.nearest(e.target);if(!n||n.isWidget())return null;if(n.markDirty(e.type=="attributes"),e.type=="childList"){let s=findChild(n,e.previousSibling||e.target.previousSibling,-1),o=findChild(n,e.nextSibling||e.target.nextSibling,1);return{from:s?n.posAfter(s):n.posAtStart,to:o?n.posBefore(o):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(editable)!=e.state.facet(editable)&&(e.view.contentDOM.editContext=e.state.facet(editable)?this.editContext.editContext:null))}destroy(){var e,n,s;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(s=this.resizeScroll)===null||s===void 0||s.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(r,e,n){for(;e;){let s=Tile.get(e);if(s&&s.parent==r)return s;let o=e.parentNode;e=o!=r.dom?o:n>0?e.nextSibling:e.previousSibling}return null}function buildSelectionRangeFromRange(r,e){let n=e.startContainer,s=e.startOffset,o=e.endContainer,l=e.endOffset,a=r.docView.domAtPos(r.state.selection.main.anchor,1);return isEquivalentPosition(a.node,a.offset,o,l)&&([n,s,o,l]=[o,l,n,s]),{anchorNode:n,anchorOffset:s,focusNode:o,focusOffset:l}}function safariSelectionRangeHack(r,e){if(e.getComposedRanges){let o=e.getComposedRanges(r.root)[0];if(o)return buildSelectionRangeFromRange(r,o)}let n=null;function s(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",s,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",s,!0),n?buildSelectionRangeFromRange(r,n):null}class EditContextManager{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=s=>{let o=e.state.selection.main,{anchor:l,head:a}=o,c=this.toEditorPos(s.updateRangeStart),u=this.toEditorPos(s.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:s.updateRangeStart,editorBase:c,drifted:!1});let f=u-c>s.text.length;c==this.from&&l<this.from?c=l:u==this.to&&l>this.to&&(u=l);let d=findDiff(e.state.sliceDoc(c,u),s.text,(f?o.from:o.to)-c,f?"end":null);if(!d){let m=EditorSelection.single(this.toEditorPos(s.selectionStart),this.toEditorPos(s.selectionEnd));m.main.eq(o)||e.dispatch({selection:m,userEvent:"select"});return}let g={from:d.from+c,to:d.toA+c,insert:Text.of(s.text.slice(d.from,d.toB).split(`
`))};if((browser.mac||browser.android)&&g.from==a-1&&/^\. ?$/.test(s.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(g={from:c,to:u,insert:Text.of([s.text.replace("."," ")])}),this.pendingContextChange=g,!e.state.readOnly){let m=this.to-this.from+(g.to-g.from+g.insert.length);applyDOMChangeInner(e,g,EditorSelection.single(this.toEditorPos(s.selectionStart,m),this.toEditorPos(s.selectionEnd,m)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),g.from<g.to&&!g.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,s.updateRangeStart-1),Math.min(n.text.length,s.updateRangeStart+1)))&&this.handlers.compositionend(s)},this.handlers.characterboundsupdate=s=>{let o=[],l=null;for(let a=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);a<c;a++){let u=e.coordsForChar(a);l=u&&new DOMRect(u.left,u.top,u.right-u.left,u.bottom-u.top)||l||new DOMRect,o.push(l)}n.updateCharacterBounds(s.rangeStart,o)},this.handlers.textformatupdate=s=>{let o=[];for(let l of s.getTextFormats()){let a=l.underlineStyle,c=l.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(c)){let u=this.toEditorPos(l.rangeStart),f=this.toEditorPos(l.rangeEnd);if(u<f){let d=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;o.push(Decoration.mark({attributes:{style:d}}).range(u,f))}}}e.dispatch({effects:setEditContextFormatting.of(Decoration.set(o))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:s}=this.composing;this.composing=null,s&&this.reset(e.state)}};for(let s in this.handlers)n.addEventListener(s,this.handlers[s]);this.measureReq={read:s=>{this.editContext.updateControlBounds(s.contentDOM.getBoundingClientRect());let o=getSelection(s.root);o&&o.rangeCount&&this.editContext.updateSelectionBounds(o.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,s=!1,o=this.pendingContextChange;return e.changes.iterChanges((l,a,c,u,f)=>{if(s)return;let d=f.length-(a-l);if(o&&a>=o.to)if(o.from==l&&o.to==a&&o.insert.eq(f)){o=this.pendingContextChange=null,n+=d,this.to+=d;return}else o=null,this.revertPending(e.state);if(l+=n,a+=n,a<=this.from)this.from+=d,this.to+=d;else if(l<this.to){if(l<this.from||a>this.to||this.to-this.from+f.length>3e4){s=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(a),f.toString()),this.to+=d}n+=d}),o&&!s&&this.revertPending(e.state),!s}update(e){let n=this.pendingContextChange,s=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(s.from,s.to)&&e.transactions.some(o=>!o.isUserEvent("input.type")&&o.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,s=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),o=this.toContextPos(n.head);(this.editContext.selectionStart!=s||this.editContext.selectionEnd!=o)&&this.editContext.updateSelection(s,o)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let s=this.composing;return s&&s.drifted?s.editorBase+(e-s.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:s}=e;this.dispatchTransactions=e.dispatchTransactions||s&&(o=>o.forEach(l=>s(l,this)))||(o=>this.update(o)),this.dispatch=this.dispatch.bind(this),this._root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),e.scrollTo&&e.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(o=>new PluginInstance(o));for(let o of this.plugins)o.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Transaction?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,s=!1,o,l=this.state;for(let m of e){if(m.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=m.state}if(this.destroyed){this.viewState.state=l;return}let a=this.hasFocus,c=0,u=null;e.some(m=>m.annotation(isFocusChange))?(this.inputState.notifiedFocused=a,c=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,u=focusChangeTransaction(l,a),u||(c=1));let f=this.observer.delayedAndroidKey,d=null;if(f?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(d=null)):this.observer.clear(),l.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(l);o=ViewUpdate.create(this,l,e),o.flags|=c;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(g&&(g=g.map(m.changes)),m.scrollIntoView){let{main:v}=m.state.selection;g=new ScrollTarget(v.empty?v:EditorSelection.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of m.effects)v.is(scrollIntoView$1)&&(g=v.value.clip(this.state))}this.viewState.update(o,g),this.bidiCache=CachedOrder.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),n=this.docView.update(o),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(theme)!=o.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(n||s||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!o.empty)for(let m of this.state.facet(updateListener))try{m(o)}catch(v){logException(this.state,v,"update listener")}(u||d)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),d&&!applyDOMChange(this,d)&&f.force&&dispatchKey(this.contentDOM,f.key,f.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map(s=>new PluginInstance(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(viewPlugin),s=e.state.facet(viewPlugin);if(n!=s){let o=[];for(let l of s){let a=n.indexOf(l);if(a<0)o.push(new PluginInstance(l));else{let c=this.plugins[a];c.mustUpdate=e,o.push(c)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=o,this.pluginMap.clear()}else for(let o of this.plugins)o.mustUpdate=e;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this);n!=s&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(s){logException(this.state,s,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,s=this.scrollDOM,o=s.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:a}=this.viewState;Math.abs(o-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(a<0)if(isScrolledToBottom(s))l=-1,a=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(o);l=v.from,a=v.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];u&4||([this.measureRequests,f]=[f,this.measureRequests]);let d=f.map(v=>{try{return v.read(this)}catch(k){return logException(this.state,k),BadMeasure}}),g=ViewUpdate.create(this,this.state,[]),m=!1;g.flags|=u,n?n.flags|=u:n=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),m=this.docView.update(g),m&&this.docViewUpdate());for(let v=0;v<f.length;v++)if(d[v]!=BadMeasure)try{let k=f[v];k.write&&k.write(d[v],this)}catch(k){logException(this.state,k)}if(m&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let k=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-a;if(k>1||k<-1){o=o+k,s.scrollTop=o/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let c of this.state.facet(updateListener))c(n)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,n);let s=this.observer.ignore(()=>{let o=updateAttrs(this.contentDOM,this.contentAttrs,n),l=updateAttrs(this.dom,this.editorAttrs,e);return o||l});return this.editorAttrs=e,this.contentAttrs=n,s}showAnnouncements(e){let n=!0;for(let s of e)for(let o of s.effects)if(o.is(EditorView.announce)){n&&(this.announceDOM.textContent=""),n=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let e=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(s=>s.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,s){return skipAtoms(this,e,moveByChar(this,e,n,s))}moveByGroup(e,n){return skipAtoms(this,e,moveByChar(this,e,n,s=>byGroup(this,e.head,s)))}visualLineSide(e,n){let s=this.bidiSpans(e),o=this.textDirectionAt(e.from),l=s[n?s.length-1:0];return EditorSelection.cursor(l.side(n,o)+e.from,l.forward(!n,o)?1:-1)}moveToLineBoundary(e,n,s=!0){return moveToLineBoundary(this,e,n,s)}moveVertically(e,n,s){return skipAtoms(this,e,moveVertically(this,e,n,s))}domAtPos(e,n=1){return this.docView.domAtPos(e,n)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){this.readMeasured();let s=posAtCoords(this,e,n);return s&&s.pos}posAndSideAtCoords(e,n=!0){return this.readMeasured(),posAtCoords(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let s=this.docView.coordsAt(e,n);if(!s||s.left==s.right)return s;let o=this.state.doc.lineAt(e),l=this.bidiSpans(o),a=l[BidiSpan.find(l,e-o.from,-1,n)];return flattenRect(s,a.dir==Direction.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let n=this.textDirectionAt(e.from),s;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==n&&(l.fresh||isolatesEq(l.isolates,s=getIsolatedRanges(this,e))))return l.order;s||(s=getIsolatedRanges(this,e));let o=computeOrder(e.text,n,s);return this.bidiCache.push(new CachedOrder(e.from,e.to,n,s,!0,o)),o}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return scrollIntoView$1.of(new ScrollTarget(typeof e=="number"?EditorSelection.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,s=this.viewState.scrollAnchorAt(e);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(s.from),"start","start",s.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ViewPlugin.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ViewPlugin.define(()=>({}),{eventObservers:e})}static theme(e,n){let s=StyleModule.newName(),o=[theme.of(s),styleModule.of(buildTheme(`.${s}`,e))];return n&&n.dark&&o.push(darkTheme.of(!0)),o}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var n;let s=e.querySelector(".cm-content"),o=s&&Tile.get(s)||Tile.get(e);return((n=o==null?void 0:o.root)===null||n===void 0?void 0:n.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.clipboardInputFilter=clipboardInputFilter;EditorView.clipboardOutputFilter=clipboardOutputFilter;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.blockWrappers=blockWrappers;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:r=>r.length?r[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,n,s,o,l,a){this.from=e,this.to=n,this.dir=s,this.isolates=o,this.fresh=l,this.order=a}static update(e,n){if(n.empty&&!e.some(l=>l.fresh))return e;let s=[],o=e.length?e[e.length-1].dir:Direction.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let a=e[l];a.dir==o&&!n.touchesRange(a.from,a.to)&&s.push(new CachedOrder(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return s}}function attrsFromFacet(r,e,n){for(let s=r.state.facet(e),o=s.length-1;o>=0;o--){let l=s[o],a=typeof l=="function"?l(r):l;a&&combineAttrs(a,n)}return n}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(r,e){const n=r.split(/-(?!$)/);let s=n[n.length-1];s=="Space"&&(s=" ");let o,l,a,c;for(let u=0;u<n.length-1;++u){const f=n[u];if(/^(cmd|meta|m)$/i.test(f))c=!0;else if(/^a(lt)?$/i.test(f))o=!0;else if(/^(c|ctrl|control)$/i.test(f))l=!0;else if(/^s(hift)?$/i.test(f))a=!0;else if(/^mod$/i.test(f))e=="mac"?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+f)}return o&&(s="Alt-"+s),l&&(s="Ctrl-"+s),c&&(s="Meta-"+s),a&&(s="Shift-"+s),s}function modifiers(r,e,n){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),n!==!1&&e.shiftKey&&(r="Shift-"+r),r}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(r,e){return runHandlers(getKeymap(e.state),r,e,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(r){let e=r.facet(keymap),n=Keymaps.get(e);return n||Keymaps.set(e,n=buildKeymap(e.reduce((s,o)=>s.concat(o),[]))),n}function runScopeHandlers(r,e,n){return runHandlers(getKeymap(r.state),e,r,n)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(r,e=currentPlatform){let n=Object.create(null),s=Object.create(null),o=(a,c)=>{let u=s[a];if(u==null)s[a]=c;else if(u!=c)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},l=(a,c,u,f,d)=>{var g,m;let v=n[a]||(n[a]=Object.create(null)),k=c.split(/ (?!$)/).map(N=>normalizeKeyName(N,e));for(let N=1;N<k.length;N++){let V=k.slice(0,N).join(" ");o(V,!0),v[V]||(v[V]={preventDefault:!0,stopPropagation:!1,run:[q=>{let W=storedPrefix={view:q,prefix:V,scope:a};return setTimeout(()=>{storedPrefix==W&&(storedPrefix=null)},PrefixTimeout),!0}]})}let A=k.join(" ");o(A,!1);let E=v[A]||(v[A]={preventDefault:!1,stopPropagation:!1,run:((m=(g=v._any)===null||g===void 0?void 0:g.run)===null||m===void 0?void 0:m.slice())||[]});u&&E.run.push(u),f&&(E.preventDefault=!0),d&&(E.stopPropagation=!0)};for(let a of r){let c=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let f of c){let d=n[f]||(n[f]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:g}=a;for(let m in d)d[m].run.push(v=>g(v,currentKeyEvent))}let u=a[e]||a.key;if(u)for(let f of c)l(f,u,a.run,a.preventDefault,a.stopPropagation),a.shift&&l(f,"Shift-"+u,a.shift,a.preventDefault,a.stopPropagation)}return n}let currentKeyEvent=null;function runHandlers(r,e,n,s){currentKeyEvent=e;let o=keyName(e),l=codePointAt(o,0),a=codePointSize(l)==o.length&&o!=" ",c="",u=!1,f=!1,d=!1;storedPrefix&&storedPrefix.view==n&&storedPrefix.scope==s&&(c=storedPrefix.prefix+" ",modifierCodes.indexOf(e.keyCode)<0&&(f=!0,storedPrefix=null));let g=new Set,m=E=>{if(E){for(let N of E.run)if(!g.has(N)&&(g.add(N),N(n)))return E.stopPropagation&&(d=!0),!0;E.preventDefault&&(E.stopPropagation&&(d=!0),f=!0)}return!1},v=r[s],k,A;return v&&(m(v[c+modifiers(o,e,!a)])?u=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(browser.windows&&e.ctrlKey&&e.altKey)&&!(browser.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(k=base[e.keyCode])&&k!=o?(m(v[c+modifiers(k,e,!0)])||e.shiftKey&&(A=shift[e.keyCode])!=o&&A!=k&&m(v[c+modifiers(A,e,!1)]))&&(u=!0):a&&e.shiftKey&&m(v[c+modifiers(o,e,!0)])&&(u=!0),!u&&m(v._any)&&(u=!0)),f&&(u=!0),u&&d&&e.stopPropagation(),currentKeyEvent=null,u}class RectangleMarker{constructor(e,n,s,o,l){this.className=e,this.left=n,this.top=s,this.width=o,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,s){if(s.empty){let o=e.coordsAtPos(s.head,s.assoc||1);if(!o)return[];let l=getBase(e);return[new RectangleMarker(n,o.left-l.left,o.top-l.top,null,o.bottom-o.top)]}else return rectanglesForRange(e,n,s)}}function getBase(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==Direction.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function wrappedLine(r,e,n,s){let o=r.coordsAtPos(e,n*2);if(!o)return s;let l=r.dom.getBoundingClientRect(),a=(o.top+o.bottom)/2,c=r.posAtCoords({x:l.left+1,y:a}),u=r.posAtCoords({x:l.right-1,y:a});return c==null||u==null?s:{from:Math.max(s.from,Math.min(c,u)),to:Math.min(s.to,Math.max(c,u))}}function rectanglesForRange(r,e,n){if(n.to<=r.viewport.from||n.from>=r.viewport.to)return[];let s=Math.max(n.from,r.viewport.from),o=Math.min(n.to,r.viewport.to),l=r.textDirection==Direction.LTR,a=r.contentDOM,c=a.getBoundingClientRect(),u=getBase(r),f=a.querySelector(".cm-line"),d=f&&window.getComputedStyle(f),g=c.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),m=c.right-(d?parseInt(d.paddingRight):0),v=blockAt(r,s,1),k=blockAt(r,o,-1),A=v.type==BlockType.Text?v:null,E=k.type==BlockType.Text?k:null;if(A&&(r.lineWrapping||v.widgetLineBreaks)&&(A=wrappedLine(r,s,1,A)),E&&(r.lineWrapping||k.widgetLineBreaks)&&(E=wrappedLine(r,o,-1,E)),A&&E&&A.from==E.from&&A.to==E.to)return V(q(n.from,n.to,A));{let H=A?q(n.from,null,A):W(v,!1),$=E?q(null,n.to,E):W(k,!0),L=[];return(A||v).to<(E||k).from-(A&&E?1:0)||v.widgetLineBreaks>1&&H.bottom+r.defaultLineHeight/2<$.top?L.push(N(g,H.bottom,m,$.top)):H.bottom<$.top&&r.elementAtHeight((H.bottom+$.top)/2).type==BlockType.Text&&(H.bottom=$.top=(H.bottom+$.top)/2),V(H).concat(L).concat(V($))}function N(H,$,L,te){return new RectangleMarker(e,H-u.left,$-u.top,L-H,te-$)}function V({top:H,bottom:$,horizontal:L}){let te=[];for(let ae=0;ae<L.length;ae+=2)te.push(N(L[ae],H,L[ae+1],$));return te}function q(H,$,L){let te=1e9,ae=-1e9,ge=[];function Y(xe,we,Se,be,ve){let Te=r.coordsAtPos(xe,xe==L.to?-2:2),Me=r.coordsAtPos(Se,Se==L.from?2:-2);!Te||!Me||(te=Math.min(Te.top,Me.top,te),ae=Math.max(Te.bottom,Me.bottom,ae),ve==Direction.LTR?ge.push(l&&we?g:Te.left,l&&be?m:Me.right):ge.push(!l&&be?g:Me.left,!l&&we?m:Te.right))}let he=H??L.from,me=$??L.to;for(let xe of r.visibleRanges)if(xe.to>he&&xe.from<me)for(let we=Math.max(xe.from,he),Se=Math.min(xe.to,me);;){let be=r.state.doc.lineAt(we);for(let ve of r.bidiSpans(be)){let Te=ve.from+be.from,Me=ve.to+be.from;if(Te>=Se)break;Me>we&&Y(Math.max(Te,we),H==null&&Te<=he,Math.min(Me,Se),$==null&&Me>=me,ve.dir)}if(we=be.to+1,we>=Se)break}return ge.length==0&&Y(he,H==null,me,$==null,r.textDirection),{top:te,bottom:ae,horizontal:ge}}function W(H,$){let L=c.top+($?H.top:H.bottom);return{top:L,bottom:L,horizontal:[]}}}function sameMarker(r,e){return r.constructor==e.constructor&&r.eq(e)}class LayerView{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(layerOrder)!=e.state.facet(layerOrder)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,s=e.facet(layerOrder);for(;n<s.length&&s[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,s)=>!sameMarker(n,this.drawn[s]))){let n=this.dom.firstChild,s=0;for(let o of e)o.update&&n&&o.constructor&&this.drawn[s].constructor&&o.update(n,this.drawn[s])?(n=n.nextSibling,s++):this.dom.insertBefore(o.draw(),n);for(;n;){let o=n.nextSibling;n.remove(),n=o}this.drawn=e,browser.safari&&browser.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(r){return[ViewPlugin.define(e=>new LayerView(e,r)),layerOrder.of(r)]}const selectionConfig=Facet.define({combine(r){return combineConfig(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function drawSelection(r={}){return[selectionConfig.of(r),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(r){return r.startState.facet(selectionConfig)!=r.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(r){let{state:e}=r,n=e.facet(selectionConfig),s=[];for(let o of e.selection.ranges){let l=o==e.selection.main;if(o.empty||n.drawRangeCursor){let a=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=o.empty?o:EditorSelection.cursor(o.head,o.head>o.anchor?-1:1);for(let u of RectangleMarker.forRange(r,a,c))s.push(u)}}return s},update(r,e){r.transactions.some(s=>s.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=configChanged(r);return n&&setBlinkRate(r.state,e),r.docChanged||r.selectionSet||n},mount(r,e){setBlinkRate(e.state,r)},class:"cm-cursorLayer"});function setBlinkRate(r,e){e.style.animationDuration=r.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:RectangleMarker.forRange(r,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||configChanged(r)},class:"cm-selectionLayer"}),hideNativeSelection=Prec.highest(EditorView.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),setDropCursorPos=StateEffect.define({map(r,e){return r==null?null:e.mapPos(r)}}),dropCursorPos=StateField.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((n,s)=>s.is(setDropCursorPos)?s.value:n,r)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let n=r.state.field(dropCursorPos);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(dropCursorPos)!=n||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(dropCursorPos),n=e!=null&&r.coordsAtPos(e);if(!n)return null;let s=r.scrollDOM.getBoundingClientRect();return{left:n.left-s.left+r.scrollDOM.scrollLeft*r.scaleX,top:n.top-s.top+r.scrollDOM.scrollTop*r.scaleY,height:n.bottom-n.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/n+"px",this.cursor.style.height=r.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(dropCursorPos)!=r&&this.view.dispatch({effects:setDropCursorPos.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(r,e,n,s,o){e.lastIndex=0;for(let l=r.iterRange(n,s),a=n,c;!l.next().done;a+=l.value.length)if(!l.lineBreak)for(;c=e.exec(l.value);)o(a+c.index,c)}function matchRanges(r,e){let n=r.visibleRanges;if(n.length==1&&n[0].from==r.viewport.from&&n[0].to==r.viewport.to)return n;let s=[];for(let{from:o,to:l}of n)o=Math.max(r.state.doc.lineAt(o).from,o-e),l=Math.min(r.state.doc.lineAt(l).to,l+e),s.length&&s[s.length-1].to>=o?s[s.length-1].to=l:s.push({from:o,to:l});return s}class MatchDecorator{constructor(e){const{regexp:n,decoration:s,decorate:o,boundary:l,maxLength:a=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,o)this.addMatch=(c,u,f,d)=>o(d,f,f+c[0].length,c,u);else if(typeof s=="function")this.addMatch=(c,u,f,d)=>{let g=s(c,u,f);g&&d(f,f+c[0].length,g)};else if(s)this.addMatch=(c,u,f,d)=>d(f,f+c[0].length,s);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=l,this.maxLength=a}createDeco(e){let n=new RangeSetBuilder,s=n.add.bind(n);for(let{from:o,to:l}of matchRanges(e,this.maxLength))iterMatches(e.state.doc,this.regexp,o,l,(a,c)=>this.addMatch(c,e,a,s));return n.finish()}updateDeco(e,n){let s=1e9,o=-1;return e.docChanged&&e.changes.iterChanges((l,a,c,u)=>{u>=e.view.viewport.from&&c<=e.view.viewport.to&&(s=Math.min(c,s),o=Math.max(u,o))}),e.viewportMoved||o-s>1e3?this.createDeco(e.view):o>-1?this.updateRange(e.view,n.map(e.changes),s,o):n}updateRange(e,n,s,o){for(let l of e.visibleRanges){let a=Math.max(l.from,s),c=Math.min(l.to,o);if(c>=a){let u=e.state.doc.lineAt(a),f=u.to<c?e.state.doc.lineAt(c):u,d=Math.max(l.from,u.from),g=Math.min(l.to,f.to);if(this.boundary){for(;a>u.from;a--)if(this.boundary.test(u.text[a-1-u.from])){d=a;break}for(;c<f.to;c++)if(this.boundary.test(f.text[c-f.from])){g=c;break}}let m=[],v,k=(A,E,N)=>m.push(N.range(A,E));if(u==f)for(this.regexp.lastIndex=d-u.from;(v=this.regexp.exec(u.text))&&v.index<g-u.from;)this.addMatch(v,e,v.index+u.from,k);else iterMatches(e.state.doc,this.regexp,d,g,(A,E)=>this.addMatch(E,e,A,k));n=n.update({filterFrom:d,filterTo:g,filter:(A,E)=>A<d||E>g,add:m})}}return n}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var r;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let e=document.body.style;_supportsTabSize=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(r){let e=combineConfig(r,{render:null,specialChars:Specials,addSpecialChars:null});return(e.replaceTabs=!supportsTabSize())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,UnicodeRegexpSupport)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,UnicodeRegexpSupport)),e}});function highlightSpecialChars(r={}){return[specialCharConfig.of(r),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(r){this.view=r,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new MatchDecorator({regexp:r.specialChars,decoration:(e,n,s)=>{let{doc:o}=n.state,l=codePointAt(e[0],0);if(l==9){let a=o.lineAt(s),c=n.state.tabSize,u=countColumn(a.text,c,s-a.from);return Decoration.replace({widget:new TabWidget((c-u%c)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[l]||(this.decorationCache[l]=Decoration.replace({widget:new SpecialCharWidget(r,l)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(specialCharConfig);r.startState.facet(specialCharConfig)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const DefaultPlaceholder="";function placeholder$1(r){return r>=32?DefaultPlaceholder:r==10?"":String.fromCharCode(9216+r)}class SpecialCharWidget extends WidgetType{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=placeholder$1(this.code),s=e.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,s,n);if(o)return o;let l=document.createElement("span");return l.textContent=n,l.title=s,l.setAttribute("aria-label",s),l.className="cm-specialChar",l}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,n=[];for(let s of r.state.selection.ranges){let o=r.lineBlockAt(s.head);o.from>e&&(n.push(lineDeco.range(o.from)),e=o.from)}return Decoration.set(n)}},{decorations:r=>r.decorations});class Placeholder extends WidgetType{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?clientRectsFor(e.firstChild):[];if(!n.length)return null;let s=window.getComputedStyle(e.parentNode),o=flattenRect(n[0],s.direction!="rtl"),l=parseInt(s.lineHeight);return o.bottom-o.top>l*1.5?{left:o.left,right:o.right,top:o.top,bottom:o.top+l}:o}ignoreEvent(){return!1}}function placeholder(r){let e=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.placeholder=r?Decoration.set([Decoration.widget({widget:new Placeholder(r),side:1}).range(0)]):Decoration.none}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:n=>n.decorations});return typeof r=="string"?[e,EditorView.contentAttributes.of({"aria-placeholder":r})]:e}const MaxOff=2e3;function rectangleFor(r,e,n){let s=Math.min(e.line,n.line),o=Math.max(e.line,n.line),l=[];if(e.off>MaxOff||n.off>MaxOff||e.col<0||n.col<0){let a=Math.min(e.off,n.off),c=Math.max(e.off,n.off);for(let u=s;u<=o;u++){let f=r.doc.line(u);f.length<=c&&l.push(EditorSelection.range(f.from+a,f.to+c))}}else{let a=Math.min(e.col,n.col),c=Math.max(e.col,n.col);for(let u=s;u<=o;u++){let f=r.doc.line(u),d=findColumn(f.text,a,r.tabSize,!0);if(d<0)l.push(EditorSelection.cursor(f.to));else{let g=findColumn(f.text,c,r.tabSize);l.push(EditorSelection.range(f.from+d,f.from+g))}}}return l}function absoluteColumn(r,e){let n=r.coordsAtPos(r.viewport.from);return n?Math.round(Math.abs((n.left-e)/r.defaultCharacterWidth)):-1}function getPos(r,e){let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1),s=r.state.doc.lineAt(n),o=n-s.from,l=o>MaxOff?-1:o==s.length?absoluteColumn(r,e.clientX):countColumn(s.text,r.state.tabSize,n-s.from);return{line:s.number,col:l,off:o}}function rectangleSelectionStyle(r,e){let n=getPos(r,e),s=r.state.selection;return n?{update(o){if(o.docChanged){let l=o.changes.mapPos(o.startState.doc.line(n.line).from),a=o.state.doc.lineAt(l);n={line:a.number,col:n.col,off:Math.min(n.off,a.length)},s=s.map(o.changes)}},get(o,l,a){let c=getPos(r,o);if(!c)return s;let u=rectangleFor(r.state,n,c);return u.length?a?EditorSelection.create(u.concat(s.ranges)):EditorSelection.create(u):s}}:null}function rectangularSelection(r){let e=n=>n.altKey&&n.button==0;return EditorView.mouseSelectionStyle.of((n,s)=>e(s)?rectangleSelectionStyle(n,s):null)}const keys={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(r={}){let[e,n]=keys[r.key||"Alt"],s=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.isDown=!1}set(o){this.isDown!=o&&(this.isDown=o,this.view.update([]))}},{eventObservers:{keydown(o){this.set(o.keyCode==e||n(o))},keyup(o){(o.keyCode==e||!n(o))&&this.set(!1)},mousemove(o){this.set(n(o))}}});return[s,EditorView.contentAttributes.of(o=>{var l;return!((l=o.plugin(s))===null||l===void 0)&&l.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(e,n,s,o){this.facet=n,this.createTooltipView=s,this.removeTooltipView=o,this.input=e.state.facet(n),this.tooltips=this.input.filter(a=>a);let l=null;this.tooltipViews=this.tooltips.map(a=>l=s(a,l))}update(e,n){var s;let o=e.state.facet(this.facet),l=o.filter(u=>u);if(o===this.input){for(let u of this.tooltipViews)u.update&&u.update(e);return!1}let a=[],c=n?[]:null;for(let u=0;u<l.length;u++){let f=l[u],d=-1;if(f){for(let g=0;g<this.tooltips.length;g++){let m=this.tooltips[g];m&&m.create==f.create&&(d=g)}if(d<0)a[u]=this.createTooltipView(f,u?a[u-1]:null),c&&(c[u]=!!f.above);else{let g=a[u]=this.tooltipViews[d];c&&(c[u]=n[d]),g.update&&g.update(e)}}}for(let u of this.tooltipViews)a.indexOf(u)<0&&(this.removeTooltipView(u),(s=u.destroy)===null||s===void 0||s.call(u));return n&&(c.forEach((u,f)=>n[f]=u),n.length=c.length),this.input=o,this.tooltips=l,this.tooltipViews=a,!0}}function windowSpace(r){let e=r.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const tooltipConfig=Facet.define({combine:r=>{var e,n,s;return{position:browser.ios?"absolute":((e=r.find(o=>o.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=r.find(o=>o.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((s=r.find(o=>o.tooltipSpace))===null||s===void 0?void 0:s.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(tooltipConfig);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(r,showTooltip,(n,s)=>this.createTooltip(n,s),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let n=e||r.geometryChanged,s=r.state.facet(tooltipConfig);if(s.position!=this.position&&!this.madeAbsolute){this.position=s.position;for(let o of this.manager.tooltipViews)o.dom.style.position=this.position;n=!0}if(s.parent!=this.parent){this.parent&&this.container.remove(),this.parent=s.parent,this.createContainer();for(let o of this.manager.tooltipViews)this.container.appendChild(o.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(r,e){let n=r.create(this.view),s=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),r.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let o=document.createElement("div");o.className="cm-tooltip-arrow",n.dom.appendChild(o)}return n.dom.style.position=this.position,n.dom.style.top=Outside,n.dom.style.left="0px",this.container.insertBefore(n.dom,s),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var r,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let s of this.manager.tooltipViews)s.dom.remove(),(r=s.destroy)===null||r===void 0||r.call(s);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:l}=this.manager.tooltipViews[0];if(browser.safari){let a=l.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}else n=!!l.offsetParent&&l.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let l=this.parent.getBoundingClientRect();l.width&&l.height&&(r=l.width/this.parent.offsetWidth,e=l.height/this.parent.offsetHeight)}else({scaleX:r,scaleY:e}=this.view.viewState);let s=this.view.scrollDOM.getBoundingClientRect(),o=getScrollMargins(this.view);return{visible:{left:s.left+o.left,top:s.top+o.top,right:s.right-o.right,bottom:s.bottom-o.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((l,a)=>{let c=this.manager.tooltipViews[a];return c.getCoords?c.getCoords(l.pos):this.view.coordsAtPos(l.pos)}),size:this.manager.tooltipViews.map(({dom:l})=>l.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:r,scaleY:e,makeAbsolute:n}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let c of this.manager.tooltipViews)c.dom.style.position="absolute"}let{visible:n,space:s,scaleX:o,scaleY:l}=r,a=[];for(let c=0;c<this.manager.tooltips.length;c++){let u=this.manager.tooltips[c],f=this.manager.tooltipViews[c],{dom:d}=f,g=r.pos[c],m=r.size[c];if(!g||u.clip!==!1&&(g.bottom<=Math.max(n.top,s.top)||g.top>=Math.min(n.bottom,s.bottom)||g.right<Math.max(n.left,s.left)-.1||g.left>Math.min(n.right,s.right)+.1)){d.style.top=Outside;continue}let v=u.arrow?f.dom.querySelector(".cm-tooltip-arrow"):null,k=v?7:0,A=m.right-m.left,E=(e=knownHeight.get(f))!==null&&e!==void 0?e:m.bottom-m.top,N=f.offset||noOffset,V=this.view.textDirection==Direction.LTR,q=m.width>s.right-s.left?V?s.left:s.right-m.width:V?Math.max(s.left,Math.min(g.left-(v?14:0)+N.x,s.right-A)):Math.min(Math.max(s.left,g.left-A+(v?14:0)-N.x),s.right-A),W=this.above[c];!u.strictSide&&(W?g.top-E-k-N.y<s.top:g.bottom+E+k+N.y>s.bottom)&&W==s.bottom-g.bottom>g.top-s.top&&(W=this.above[c]=!W);let H=(W?g.top-s.top:s.bottom-g.bottom)-k;if(H<E&&f.resize!==!1){if(H<this.view.defaultLineHeight){d.style.top=Outside;continue}knownHeight.set(f,E),d.style.height=(E=H)/l+"px"}else d.style.height&&(d.style.height="");let $=W?g.top-E-k-N.y:g.bottom+k+N.y,L=q+A;if(f.overlap!==!0)for(let te of a)te.left<L&&te.right>q&&te.top<$+E&&te.bottom>$&&($=W?te.top-E-2-k:te.bottom+k+2);if(this.position=="absolute"?(d.style.top=($-r.parent.top)/l+"px",setLeftStyle(d,(q-r.parent.left)/o)):(d.style.top=$/l+"px",setLeftStyle(d,q/o)),v){let te=g.left+(V?N.x:-N.x)-(q+14-7);v.style.left=te/o+"px"}f.overlap!==!0&&a.push({left:q,top:$,right:L,bottom:$+E}),d.classList.toggle("cm-tooltip-above",W),d.classList.toggle("cm-tooltip-below",!W),f.positioned&&f.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(r,e){let n=parseInt(r.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(r.style.left=e+"px")}const baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define({combine:r=>r.reduce((e,n)=>e.concat(n),[])});class HoverTooltipHost{static create(e){return new HoverTooltipHost(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(e,showHoverTooltip,(n,s)=>this.createHostedView(n,s),n=>n.dom.remove())}createHostedView(e,n){let s=e.create(this.view);return s.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(s.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&s.mount&&s.mount(this.view),s}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let s of this.manager.tooltipViews){let o=s[e];if(o!==void 0){if(n===void 0)n=o;else if(n!==o)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],r=>{let e=r.facet(showHoverTooltip);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var s;return(s=n.end)!==null&&s!==void 0?s:n.pos})),create:HoverTooltipHost.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class HoverPlugin{constructor(e,n,s,o,l){this.view=e,this.source=n,this.field=s,this.setHover=o,this.hoverTime=l,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,s=e.docView.tile.nearest(n.target);if(!s)return;let o,l=1;if(s.isWidget())o=s.posAtStart;else{if(o=e.posAtCoords(n),o==null)return;let c=e.coordsAtPos(o);if(!c||n.y<c.top||n.y>c.bottom||n.x<c.left-e.defaultCharacterWidth||n.x>c.right+e.defaultCharacterWidth)return;let u=e.bidiSpans(e.state.doc.lineAt(o)).find(d=>d.from<=o&&d.to>=o),f=u&&u.dir==Direction.RTL?-1:1;l=n.x<c.left?-f:f}let a=this.source(e,o,l);if(a!=null&&a.then){let c=this.pending={pos:o};a.then(u=>{this.pending==c&&(this.pending=null,u&&!(Array.isArray(u)&&!u.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(u)?u:[u])}))},u=>logException(e.state,u,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(tooltipPlugin),n=e?e.manager.tooltips.findIndex(s=>s.create==HoverTooltipHost.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,s;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:o,tooltip:l}=this;if(o.length&&l&&!isInTooltip(l.dom,e)||this.pending){let{pos:a}=o[0]||this.pending,c=(s=(n=o[0])===null||n===void 0?void 0:n.end)!==null&&s!==void 0?s:a;(a==c?this.view.posAtCoords(this.lastMove)!=a:!isOverRange(this.view,a,c,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:s}=this;s&&s.dom.contains(e.relatedTarget)?this.watchTooltipLeave(s.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=s=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(s.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(r,e){let{left:n,right:s,top:o,bottom:l}=r.getBoundingClientRect(),a;if(a=r.querySelector(".cm-tooltip-arrow")){let c=a.getBoundingClientRect();o=Math.min(c.top,o),l=Math.max(c.bottom,l)}return e.clientX>=n-tooltipMargin&&e.clientX<=s+tooltipMargin&&e.clientY>=o-tooltipMargin&&e.clientY<=l+tooltipMargin}function isOverRange(r,e,n,s,o,l){let a=r.scrollDOM.getBoundingClientRect(),c=r.documentTop+r.documentPadding.top+r.contentHeight;if(a.left>s||a.right<s||a.top>o||Math.min(a.bottom,c)<o)return!1;let u=r.posAtCoords({x:s,y:o},!1);return u>=e&&u<=n}function hoverTooltip(r,e={}){let n=StateEffect.define(),s=StateField.define({create(){return[]},update(o,l){if(o.length&&(e.hideOnChange&&(l.docChanged||l.selection)?o=[]:e.hideOn&&(o=o.filter(a=>!e.hideOn(l,a))),l.docChanged)){let a=[];for(let c of o){let u=l.changes.mapPos(c.pos,-1,MapMode.TrackDel);if(u!=null){let f=Object.assign(Object.create(null),c);f.pos=u,f.end!=null&&(f.end=l.changes.mapPos(f.end)),a.push(f)}}o=a}for(let a of l.effects)a.is(n)&&(o=a.value),a.is(closeHoverTooltipEffect)&&(o=[]);return o},provide:o=>showHoverTooltip.from(o)});return{active:s,extension:[s,ViewPlugin.define(o=>new HoverPlugin(o,r,s,n,e.hoverTime||300)),showHoverTooltipHost]}}function getTooltip(r,e){let n=r.plugin(tooltipPlugin);if(!n)return null;let s=n.manager.tooltips.indexOf(e);return s<0?null:n.manager.tooltipViews[s]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(r){let e,n;for(let s of r)e=e||s.topContainer,n=n||s.bottomContainer;return{topContainer:e,bottomContainer:n}}});function getPanel(r,e){let n=r.plugin(panelPlugin),s=n?n.specs.indexOf(e):-1;return s>-1?n.panels[s]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(r){this.input=r.state.facet(showPanel),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(r));let e=r.state.facet(panelConfig);this.top=new PanelGroup(r,!0,e.topContainer),this.bottom=new PanelGroup(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(r){let e=r.state.facet(panelConfig);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new PanelGroup(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=r.state.facet(showPanel);if(n!=this.input){let s=n.filter(u=>u),o=[],l=[],a=[],c=[];for(let u of s){let f=this.specs.indexOf(u),d;f<0?(d=u(r.view),c.push(d)):(d=this.panels[f],d.update&&d.update(r)),o.push(d),(d.top?l:a).push(d)}this.specs=s,this.panels=o,this.top.sync(l),this.bottom.sync(a);for(let u of c)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let s of this.panels)s.update&&s.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>EditorView.scrollMargins.of(e=>{let n=e.plugin(r);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class PanelGroup{constructor(e,n,s){this.view=e,this.top=n,this.container=s,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=rm(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=rm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rm(r){let e=r.nextSibling;return r.remove(),e}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),gutterWidgetClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},activeGutters=Facet.define();function gutter(r){return[gutters(),activeGutters.of({...defaults$1,...r})]}const unfixGutters=Facet.define({combine:r=>r.some(e=>e)});function gutters(r){return[gutterView]}const gutterView=ViewPlugin.fromClass(class{constructor(r){this.view=r,this.domAfter=null,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(activeGutters).map(e=>new SingleGutterView(r,e)),this.fixed=!r.state.facet(unfixGutters);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(r){if(this.updateGutters(r)){let e=this.prevViewport,n=r.view.viewport,s=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(s<(n.to-n.from)*.8)}if(r.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),s=[],o=this.gutters.map(l=>new UpdateContext(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(s.length&&(s=[]),Array.isArray(l.type)){let a=!0;for(let c of l.type)if(c.type==BlockType.Text&&a){advanceCursor(n,s,c.from);for(let u of o)u.line(this.view,c,s);a=!1}else if(c.widget)for(let u of o)u.widget(this.view,c)}else if(l.type==BlockType.Text){advanceCursor(n,s,l.from);for(let a of o)a.line(this.view,l,s)}else if(l.widget)for(let a of o)a.widget(this.view,l);for(let l of o)l.finish();r&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(r){let e=r.startState.facet(activeGutters),n=r.state.facet(activeGutters),s=r.docChanged||r.heightChanged||r.viewportChanged||!RangeSet.eq(r.startState.facet(gutterLineClass),r.state.facet(gutterLineClass),r.view.viewport.from,r.view.viewport.to);if(e==n)for(let o of this.gutters)o.update(r)&&(s=!0);else{s=!0;let o=[];for(let l of n){let a=e.indexOf(l);a<0?o.push(new SingleGutterView(this.view,l)):(this.gutters[a].update(r),o.push(this.gutters[a]))}for(let l of this.gutters)l.dom.remove(),o.indexOf(l)<0&&l.destroy();for(let l of o)l.config.side=="after"?this.getDOMAfter().appendChild(l.dom):this.dom.appendChild(l.dom);this.gutters=o}return s}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:r=>EditorView.scrollMargins.of(e=>{let n=e.plugin(r);if(!n||n.gutters.length==0||!n.fixed)return null;let s=n.dom.offsetWidth*e.scaleX,o=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Direction.LTR?{left:s,right:o}:{right:s,left:o}})});function asArray(r){return Array.isArray(r)?r:[r]}function advanceCursor(r,e,n){for(;r.value&&r.from<=n;)r.from==n&&e.push(r.value),r.next()}class UpdateContext{constructor(e,n,s){this.gutter=e,this.height=s,this.i=0,this.cursor=RangeSet.iter(e.markers,n.from)}addElement(e,n,s){let{gutter:o}=this,l=(n.top-this.height)/e.scaleY,a=n.height/e.scaleY;if(this.i==o.elements.length){let c=new GutterElement(e,a,l,s);o.elements.push(c),o.dom.appendChild(c.dom)}else o.elements[this.i].update(e,a,l,s);this.height=n.bottom,this.i++}line(e,n,s){let o=[];advanceCursor(this.cursor,o,n.from),s.length&&(o=o.concat(s));let l=this.gutter.config.lineMarker(e,n,o);l&&o.unshift(l);let a=this.gutter;o.length==0&&!a.config.renderEmptyElements||this.addElement(e,n,o)}widget(e,n){let s=this.gutter.config.widgetMarker(e,n.widget,n),o=s?[s]:null;for(let l of e.state.facet(gutterWidgetClass)){let a=l(e,n.widget,n);a&&(o||(o=[])).push(a)}o&&this.addElement(e,n,o)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class SingleGutterView{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let s in n.domEventHandlers)this.dom.addEventListener(s,o=>{let l=o.target,a;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let u=l.getBoundingClientRect();a=(u.top+u.bottom)/2}else a=o.clientY;let c=e.lineBlockAtHeight(a-e.documentTop);n.domEventHandlers[s](e,c,o)&&o.preventDefault()});this.markers=asArray(n.markers(e)),n.initialSpacer&&(this.spacer=new GutterElement(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=asArray(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let o=this.config.updateSpacer(this.spacer.markers[0],e);o!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[o])}let s=e.view.viewport;return!RangeSet.eq(this.markers,n,s.from,s.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class GutterElement{constructor(e,n,s,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,s,o)}update(e,n,s,o){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=s&&(this.dom.style.marginTop=(this.above=s)?s+"px":""),sameMarkers(this.markers,o)||this.setMarkers(e,o)}setMarkers(e,n){let s="cm-gutterElement",o=this.dom.firstChild;for(let l=0,a=0;;){let c=a,u=l<n.length?n[l++]:null,f=!1;if(u){let d=u.elementClass;d&&(s+=" "+d);for(let g=a;g<this.markers.length;g++)if(this.markers[g].compare(u)){c=g,f=!0;break}}else c=this.markers.length;for(;a<c;){let d=this.markers[a++];if(d.toDOM){d.destroy(o);let g=o.nextSibling;o.remove(),o=g}}if(!u)break;u.toDOM&&(f?o=o.nextSibling:this.dom.insertBefore(u.toDOM(e),o)),f&&a++}this.dom.className=s,this.markers=n}destroy(){this.setMarkers(null,[])}}function sameMarkers(r,e){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!r[n].compare(e[n]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberWidgetMarker=Facet.define(),lineNumberConfig=Facet.define({combine(r){return combineConfig(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let s=Object.assign({},e);for(let o in n){let l=s[o],a=n[o];s[o]=l?(c,u,f)=>l(c,u,f)||a(c,u,f):a}return s}})}});class NumberMarker extends GutterMarker{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(r,e){return r.state.facet(lineNumberConfig).formatNumber(e,r.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(lineNumberMarkers)},lineMarker(e,n,s){return s.some(o=>o.toDOM)?null:new NumberMarker(formatNumber(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,s)=>{for(let o of e.state.facet(lineNumberWidgetMarker)){let l=o(e,n,s);if(l)return l}return null},lineMarkerChange:e=>e.startState.facet(lineNumberConfig)!=e.state.facet(lineNumberConfig),initialSpacer(e){return new NumberMarker(formatNumber(e,maxLineNumber(e.state.doc.lines)))},updateSpacer(e,n){let s=formatNumber(n.view,maxLineNumber(n.view.state.doc.lines));return s==e.number?e:new NumberMarker(s)},domEventHandlers:r.facet(lineNumberConfig).domEventHandlers,side:"before"}));function lineNumbers(r={}){return[lineNumberConfig.of(r),gutters(),lineNumberGutter]}function maxLineNumber(r){let e=9;for(;e<r;)e=e*10+9;return e}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],r=>{let e=[],n=-1;for(let s of r.selection.ranges){let o=r.doc.lineAt(s.head).from;o>n&&(n=o,e.push(activeLineGutterMarker.range(o)))}return RangeSet.of(e)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,n){this.from=e,this.to=n}}class NodeProp{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=NodeType.match(e)),n=>{let s=e(n);return s===void 0?null:[this,s]}}}NodeProp.closedBy=new NodeProp({deserialize:r=>r.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:r=>r.split(" ")});NodeProp.group=new NodeProp({deserialize:r=>r.split(" ")});NodeProp.isolate=new NodeProp({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(e,n,s){this.tree=e,this.overlay=n,this.parser=s}static get(e){return e&&e.props&&e.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(e,n,s,o=0){this.name=e,this.props=n,this.id=s,this.flags=o}static define(e){let n=e.props&&e.props.length?Object.create(null):noProps,s=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),o=new NodeType(e.name||"",n,e.id,s);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(o)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[l[0].id]=l[1]}}return o}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(NodeProp.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let s in e)for(let o of s.split(" "))n[o]=e[s];return s=>{for(let o=s.prop(NodeProp.group),l=-1;l<(o?o.length:0);l++){let a=n[l<0?s.name:o[l]];if(a)return a}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let s of this.types){let o=null;for(let l of e){let a=l(s);if(a){o||(o=Object.assign({},s.props));let c=a[1],u=a[0];u.combine&&u.id in o&&(c=u.combine(o[u.id],c)),o[u.id]=c}}n.push(o?new NodeType(s.name,o,s.id,s.flags):s)}return new NodeSet(n)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(e,n,s,o,l){if(this.type=e,this.children=n,this.positions=s,this.length=o,this.props=null,l&&l.length){this.props=Object.create(null);for(let[a,c]of l)this.props[typeof a=="number"?a:a.id]=c}}toString(){let e=MountedTree.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let s of this.children){let o=s.toString();o&&(n&&(n+=","),n+=o)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,n=0,s=0){let o=CachedNode.get(this)||this.topNode,l=new TreeCursor(o);return l.moveTo(e,n),CachedNode.set(this,l._tree),l}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,n=0){let s=resolveNode(CachedNode.get(this)||this.topNode,e,n,!1);return CachedNode.set(this,s),s}resolveInner(e,n=0){let s=resolveNode(CachedInnerNode.get(this)||this.topNode,e,n,!0);return CachedInnerNode.set(this,s),s}resolveStack(e,n=0){return stackIterator(this,e,n)}iterate(e){let{enter:n,leave:s,from:o=0,to:l=this.length}=e,a=e.mode||0,c=(a&IterMode.IncludeAnonymous)>0;for(let u=this.cursor(a|IterMode.IncludeAnonymous);;){let f=!1;if(u.from<=l&&u.to>=o&&(!c&&u.type.isAnonymous||n(u)!==!1)){if(u.firstChild())continue;f=!0}for(;f&&s&&(c||!u.type.isAnonymous)&&s(u),!u.nextSibling();){if(!u.parent())return;f=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(n,s,o)=>new Tree(this.type,n,s,o,this.propValues),e.makeTree||((n,s,o)=>new Tree(NodeType.none,n,s,o)))}static build(e){return buildTree(e)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,n,s){this.buffer=e,this.length=n,this.set=s}get type(){return NodeType.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],s=this.buffer[e+3],o=this.set.types[n],l=o.name;if(/\W/.test(l)&&!o.isError&&(l=JSON.stringify(l)),e+=4,s==e)return l;let a=[];for(;e<s;)a.push(this.childString(e)),e=this.buffer[e+3];return l+"("+a.join(",")+")"}findChild(e,n,s,o,l){let{buffer:a}=this,c=-1;for(let u=e;u!=n&&!(checkSide(l,o,a[u+1],a[u+2])&&(c=u,s>0));u=a[u+3]);return c}slice(e,n,s){let o=this.buffer,l=new Uint16Array(n-e),a=0;for(let c=e,u=0;c<n;){l[u++]=o[c++],l[u++]=o[c++]-s;let f=l[u++]=o[c++]-s;l[u++]=o[c++]-e,a=Math.max(a,f)}return new TreeBuffer(l,a,this.set)}}function checkSide(r,e,n,s){switch(r){case-2:return n<e;case-1:return s>=e&&n<e;case 0:return n<e&&s>e;case 1:return n<=e&&s>e;case 2:return s>e;case 4:return!0}}function resolveNode(r,e,n,s){for(var o;r.from==r.to||(n<1?r.from>=e:r.from>e)||(n>-1?r.to<=e:r.to<e);){let a=!s&&r instanceof TreeNode&&r.index<0?null:r.parent;if(!a)return r;r=a}let l=s?0:IterMode.IgnoreOverlays;if(s)for(let a=r,c=a.parent;c;a=c,c=a.parent)a instanceof TreeNode&&a.index<0&&((o=c.enter(e,n,l))===null||o===void 0?void 0:o.from)!=a.from&&(r=c);for(;;){let a=r.enter(e,n,l);if(!a)return r;r=a}}class BaseNode{cursor(e=0){return new TreeCursor(this,e)}getChild(e,n=null,s=null){let o=getChildren(this,e,n,s);return o.length?o[0]:null}getChildren(e,n=null,s=null){return getChildren(this,e,n,s)}resolve(e,n=0){return resolveNode(this,e,n,!1)}resolveInner(e,n=0){return resolveNode(this,e,n,!0)}matchContext(e){return matchNodeContext(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),s=this;for(;n;){let o=n.lastChild;if(!o||o.to!=n.to)break;o.type.isError&&o.from==o.to?(s=n,n=o.prevSibling):n=o}return s}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(e,n,s,o){super(),this._tree=e,this.from=n,this.index=s,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,s,o,l=0){for(let a=this;;){for(let{children:c,positions:u}=a._tree,f=n>0?c.length:-1;e!=f;e+=n){let d=c[e],g=u[e]+a.from;if(checkSide(o,s,g,g+d.length)){if(d instanceof TreeBuffer){if(l&IterMode.ExcludeBuffers)continue;let m=d.findChild(0,d.buffer.length,n,s-g,o);if(m>-1)return new BufferNode(new BufferContext(a,d,e,g),null,m)}else if(l&IterMode.IncludeAnonymous||!d.type.isAnonymous||hasChild(d)){let m;if(!(l&IterMode.IgnoreMounts)&&(m=MountedTree.get(d))&&!m.overlay)return new TreeNode(m.tree,g,e,a);let v=new TreeNode(d,g,e,a);return l&IterMode.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(n<0?d.children.length-1:0,n,s,o)}}}if(l&IterMode.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+n:e=n<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,n,s=0){let o;if(!(s&IterMode.IgnoreOverlays)&&(o=MountedTree.get(this._tree))&&o.overlay){let l=e-this.from;for(let{from:a,to:c}of o.overlay)if((n>0?a<=l:a<l)&&(n<0?c>=l:c>l))return new TreeNode(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,s)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(r,e,n,s){let o=r.cursor(),l=[];if(!o.firstChild())return l;if(n!=null){for(let a=!1;!a;)if(a=o.type.is(n),!o.nextSibling())return l}for(;;){if(s!=null&&o.type.is(s))return l;if(o.type.is(e)&&l.push(o.node),!o.nextSibling())return s==null?l:[]}}function matchNodeContext(r,e,n=e.length-1){for(let s=r;n>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(e[n]&&e[n]!=s.name)return!1;n--}}return!0}class BufferContext{constructor(e,n,s,o){this.parent=e,this.buffer=n,this.index=s,this.start=o}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,s){super(),this.context=e,this._parent=n,this.index=s,this.type=e.buffer.set.types[e.buffer.buffer[s]]}child(e,n,s){let{buffer:o}=this.context,l=o.findChild(this.index+4,o.buffer[this.index+3],e,n-this.context.start,s);return l<0?null:new BufferNode(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,n,s=0){if(s&IterMode.ExcludeBuffers)return null;let{buffer:o}=this.context,l=o.findChild(this.index+4,o.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return l<0?null:new BufferNode(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:s}=this.context,o=this.index+4,l=s.buffer[this.index+3];if(l>o){let a=s.buffer[this.index+1];e.push(s.slice(o,l,a)),n.push(0)}return new Tree(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(r){if(!r.length)return null;let e=0,n=r[0];for(let l=1;l<r.length;l++){let a=r[l];(a.from>n.from||a.to<n.to)&&(n=a,e=l)}let s=n instanceof TreeNode&&n.index<0?null:n.parent,o=r.slice();return s?o[e]=s:o.splice(e,1),new StackIterator(o,n)}class StackIterator{constructor(e,n){this.heads=e,this.node=n}get next(){return iterStack(this.heads)}}function stackIterator(r,e,n){let s=r.resolveInner(e,n),o=null;for(let l=s instanceof TreeNode?s:s.context.parent;l;l=l.parent)if(l.index<0){let a=l.parent;(o||(o=[s])).push(a.resolve(e,n)),l=a}else{let a=MountedTree.get(l.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let c=new TreeNode(a.tree,a.overlay[0].from+l.from,-1,l);(o||(o=[s])).push(resolveNode(c,e,n,!1))}}return o?iterStack(o):s}class TreeCursor{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let s=e._parent;s;s=s._parent)this.stack.unshift(s.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:s,buffer:o}=this.buffer;return this.type=n||o.set.types[o.buffer[e]],this.from=s+o.buffer[e+1],this.to=s+o.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,s){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,s,this.mode));let{buffer:o}=this.buffer,l=o.findChild(this.index+4,o.buffer[this.index+3],e,n-this.buffer.start,s);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,s=this.mode){return this.buffer?s&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,s=this.stack.length-1;if(e<0){let o=s<0?0:this.stack[s]+4;if(this.index!=o)return this.yieldBuf(n.findChild(o,this.index,-1,0,4))}else{let o=n.buffer[this.index+3];if(o<(s<0?n.buffer.length:n.buffer[this.stack[s]+3]))return this.yieldBuf(o)}return s<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,s,{buffer:o}=this;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(o.buffer.buffer[l+3]<this.index)return!1;({index:n,parent:s}=o)}else({index:n,_parent:s}=this._tree);for(;s;{index:n,_parent:s}=s)if(n>-1)for(let l=n+e,a=e<0?-1:s._tree.children.length;l!=a;l+=e){let c=s._tree.children[l];if(this.mode&IterMode.IncludeAnonymous||c instanceof TreeBuffer||!c.type.isAnonymous||hasChild(c))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,s=0;if(e&&e.context==this.buffer)e:for(let o=this.index,l=this.stack.length;l>=0;){for(let a=e;a;a=a._parent)if(a.index==o){if(o==this.index)return a;n=a,s=l+1;break e}o=this.stack[--l]}for(let o=s;o<this.stack.length;o++)n=new BufferNode(this.buffer,n,this.stack[o]);return this.bufferNode=new BufferNode(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let s=0;;){let o=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){s++;continue}this.type.isAnonymous||(o=!0)}for(;;){if(o&&n&&n(this),o=this.type.isAnonymous,!s)return;if(this.nextSibling())break;this.parent(),s--,o=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node.parent,e);let{buffer:n}=this.buffer,{types:s}=n.set;for(let o=e.length-1,l=this.stack.length-1;o>=0;l--){if(l<0)return matchNodeContext(this._tree,e,o);let a=s[n.buffer[this.stack[l]]];if(!a.isAnonymous){if(e[o]&&e[o]!=a.name)return!1;o--}}return!0}}function hasChild(r){return r.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree(r){var e;let{buffer:n,nodeSet:s,maxBufferLength:o=DefaultBufferLength,reused:l=[],minRepeatType:a=s.types.length}=r,c=Array.isArray(n)?new FlatBufferCursor(n,n.length):n,u=s.types,f=0,d=0;function g(H,$,L,te,ae,ge){let{id:Y,start:he,end:me,size:xe}=c,we=d,Se=f;if(xe<0)if(c.next(),xe==-1){let Be=l[Y];L.push(Be),te.push(he-H);return}else if(xe==-3){f=Y;return}else if(xe==-4){d=Y;return}else throw new RangeError(`Unrecognized record size: ${xe}`);let be=u[Y],ve,Te,Me=he-H;if(me-he<=o&&(Te=E(c.pos-$,ae))){let Be=new Uint16Array(Te.size-Te.skip),Re=c.pos-Te.size,Ne=Be.length;for(;c.pos>Re;)Ne=N(Te.start,Be,Ne);ve=new TreeBuffer(Be,me-Te.start,s),Me=Te.start-H}else{let Be=c.pos-xe;c.next();let Re=[],Ne=[],Ve=Y>=a?Y:-1,He=0,Fe=me;for(;c.pos>Be;)Ve>=0&&c.id==Ve&&c.size>=0?(c.end<=Fe-o&&(k(Re,Ne,he,He,c.end,Fe,Ve,we,Se),He=Re.length,Fe=c.end),c.next()):ge>2500?m(he,Be,Re,Ne):g(he,Be,Re,Ne,Ve,ge+1);if(Ve>=0&&He>0&&He<Re.length&&k(Re,Ne,he,He,he,Fe,Ve,we,Se),Re.reverse(),Ne.reverse(),Ve>-1&&He>0){let $e=v(be,Se);ve=balanceRange(be,Re,Ne,0,Re.length,0,me-he,$e,$e)}else ve=A(be,Re,Ne,me-he,we-me,Se)}L.push(ve),te.push(Me)}function m(H,$,L,te){let ae=[],ge=0,Y=-1;for(;c.pos>$;){let{id:he,start:me,end:xe,size:we}=c;if(we>4)c.next();else{if(Y>-1&&me<Y)break;Y<0&&(Y=xe-o),ae.push(he,me,xe),ge++,c.next()}}if(ge){let he=new Uint16Array(ge*4),me=ae[ae.length-2];for(let xe=ae.length-3,we=0;xe>=0;xe-=3)he[we++]=ae[xe],he[we++]=ae[xe+1]-me,he[we++]=ae[xe+2]-me,he[we++]=we;L.push(new TreeBuffer(he,ae[2]-me,s)),te.push(me-H)}}function v(H,$){return(L,te,ae)=>{let ge=0,Y=L.length-1,he,me;if(Y>=0&&(he=L[Y])instanceof Tree){if(!Y&&he.type==H&&he.length==ae)return he;(me=he.prop(NodeProp.lookAhead))&&(ge=te[Y]+he.length+me)}return A(H,L,te,ae,ge,$)}}function k(H,$,L,te,ae,ge,Y,he,me){let xe=[],we=[];for(;H.length>te;)xe.push(H.pop()),we.push($.pop()+L-ae);H.push(A(s.types[Y],xe,we,ge-ae,he-ge,me)),$.push(ae-L)}function A(H,$,L,te,ae,ge,Y){if(ge){let he=[NodeProp.contextHash,ge];Y=Y?[he].concat(Y):[he]}if(ae>25){let he=[NodeProp.lookAhead,ae];Y=Y?[he].concat(Y):[he]}return new Tree(H,$,L,te,Y)}function E(H,$){let L=c.fork(),te=0,ae=0,ge=0,Y=L.end-o,he={size:0,start:0,skip:0};e:for(let me=L.pos-H;L.pos>me;){let xe=L.size;if(L.id==$&&xe>=0){he.size=te,he.start=ae,he.skip=ge,ge+=4,te+=4,L.next();continue}let we=L.pos-xe;if(xe<0||we<me||L.start<Y)break;let Se=L.id>=a?4:0,be=L.start;for(L.next();L.pos>we;){if(L.size<0)if(L.size==-3||L.size==-4)Se+=4;else break e;else L.id>=a&&(Se+=4);L.next()}ae=be,te+=xe,ge+=Se}return($<0||te==H)&&(he.size=te,he.start=ae,he.skip=ge),he.size>4?he:void 0}function N(H,$,L){let{id:te,start:ae,end:ge,size:Y}=c;if(c.next(),Y>=0&&te<a){let he=L;if(Y>4){let me=c.pos-(Y-4);for(;c.pos>me;)L=N(H,$,L)}$[--L]=he,$[--L]=ge-H,$[--L]=ae-H,$[--L]=te}else Y==-3?f=te:Y==-4&&(d=te);return L}let V=[],q=[];for(;c.pos>0;)g(r.start||0,r.bufferStart||0,V,q,-1,0);let W=(e=r.length)!==null&&e!==void 0?e:V.length?q[0]+V[0].length:0;return new Tree(u[r.topID],V.reverse(),q.reverse(),W)}const nodeSizeCache=new WeakMap;function nodeSize(r,e){if(!r.isAnonymous||e instanceof TreeBuffer||e.type!=r)return 1;let n=nodeSizeCache.get(e);if(n==null){n=1;for(let s of e.children){if(s.type!=r||!(s instanceof Tree)){n=1;break}n+=nodeSize(r,s)}nodeSizeCache.set(e,n)}return n}function balanceRange(r,e,n,s,o,l,a,c,u){let f=0;for(let k=s;k<o;k++)f+=nodeSize(r,e[k]);let d=Math.ceil(f*1.5/8),g=[],m=[];function v(k,A,E,N,V){for(let q=E;q<N;){let W=q,H=A[q],$=nodeSize(r,k[q]);for(q++;q<N;q++){let L=nodeSize(r,k[q]);if($+L>=d)break;$+=L}if(q==W+1){if($>d){let L=k[W];v(L.children,L.positions,0,L.children.length,A[W]+V);continue}g.push(k[W])}else{let L=A[q-1]+k[q-1].length-H;g.push(balanceRange(r,k,A,W,q,H,L,null,u))}m.push(H+V-l)}}return v(e,n,s,o,0),(c||u)(g,m,a)}class TreeFragment{constructor(e,n,s,o,l=!1,a=!1){this.from=e,this.to=n,this.tree=s,this.offset=o,this.open=(l?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],s=!1){let o=[new TreeFragment(0,e.length,e,0,!1,s)];for(let l of n)l.to>e.length&&o.push(l);return o}static applyChanges(e,n,s=128){if(!n.length)return e;let o=[],l=1,a=e.length?e[0]:null;for(let c=0,u=0,f=0;;c++){let d=c<n.length?n[c]:null,g=d?d.fromA:1e9;if(g-u>=s)for(;a&&a.from<g;){let m=a;if(u>=m.from||g<=m.to||f){let v=Math.max(m.from,u)-f,k=Math.min(m.to,g)-f;m=v>=k?null:new TreeFragment(v,k,m.tree,m.offset+f,c>0,!!d)}if(m&&o.push(m),a.to>g)break;a=l<e.length?e[l++]:null}if(!d)break;u=d.toA,f=d.toA-d.toB}return o}}class Parser{startParse(e,n,s){return typeof e=="string"&&(e=new StringInput(e)),s=s?s.length?s.map(o=>new Range(o.from,o.to)):[new Range(0,0)]:[new Range(0,e.length)],this.createParse(e,n||[],s)}parse(e,n,s){let o=this.startParse(e,n,s);for(;;){let l=o.advance();if(l)return l}}}class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(e,n,s,o){this.name=e,this.set=n,this.base=s,this.modified=o,this.id=nextTagID++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let s=typeof e=="string"?e:"?";if(e instanceof Tag&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let o=new Tag(s,[],null,[]);if(o.set.push(o),n)for(let l of n.set)o.set.push(l);return o}static defineModifier(e){let n=new Modifier(e);return s=>s.modified.indexOf(n)>-1?s:Modifier.get(s.base||s,s.modified.concat(n).sort((o,l)=>o.id-l.id))}}let nextModifierID=0;class Modifier{constructor(e){this.name=e,this.instances=[],this.id=nextModifierID++}static get(e,n){if(!n.length)return e;let s=n[0].instances.find(c=>c.base==e&&sameArray(n,c.modified));if(s)return s;let o=[],l=new Tag(e.name,o,e,n);for(let c of n)c.instances.push(l);let a=powerSet(n);for(let c of e.set)if(!c.modified.length)for(let u of a)o.push(Modifier.get(c,u));return l}}function sameArray(r,e){return r.length==e.length&&r.every((n,s)=>n==e[s])}function powerSet(r){let e=[[]];for(let n=0;n<r.length;n++)for(let s=0,o=e.length;s<o;s++)e.push(e[s].concat(r[n]));return e.sort((n,s)=>s.length-n.length)}function styleTags(r){let e=Object.create(null);for(let n in r){let s=r[n];Array.isArray(s)||(s=[s]);for(let o of n.split(" "))if(o){let l=[],a=2,c=o;for(let g=0;;){if(c=="..."&&g>0&&g+3==o.length){a=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!m)throw new RangeError("Invalid path: "+o);if(l.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),g+=m[0].length,g==o.length)break;let v=o[g++];if(g==o.length&&v=="!"){a=0;break}if(v!="/")throw new RangeError("Invalid path: "+o);c=o.slice(g)}let u=l.length-1,f=l[u];if(!f)throw new RangeError("Invalid path: "+o);let d=new Rule(s,a,u>0?l.slice(0,u):null);e[f]=d.sort(e[f])}}return ruleNodeProp.add(e)}const ruleNodeProp=new NodeProp({combine(r,e){let n,s,o;for(;r||e;){if(!r||e&&r.depth>=e.depth?(o=e,e=e.next):(o=r,r=r.next),n&&n.mode==o.mode&&!o.context&&!n.context)continue;let l=new Rule(o.tags,o.mode,o.context);n?n.next=l:s=l,n=l}return s}});class Rule{constructor(e,n,s,o){this.tags=e,this.mode=n,this.context=s,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(r,e){let n=Object.create(null);for(let l of r)if(!Array.isArray(l.tag))n[l.tag.id]=l.class;else for(let a of l.tag)n[a.id]=l.class;let{scope:s,all:o=null}=e||{};return{style:l=>{let a=o;for(let c of l)for(let u of c.set){let f=n[u.id];if(f){a=a?a+" "+f:f;break}}return a},scope:s}}function highlightTags(r,e){let n=null;for(let s of r){let o=s.style(e);o&&(n=n?n+" "+o:o)}return n}function highlightTree(r,e,n,s=0,o=r.length){let l=new HighlightBuilder(s,Array.isArray(e)?e:[e],n);l.highlightRange(r.cursor(),s,o,"",l.highlighters),l.flush(o)}class HighlightBuilder{constructor(e,n,s){this.at=e,this.highlighters=n,this.span=s,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,s,o,l){let{type:a,from:c,to:u}=e;if(c>=s||u<=n)return;a.isTop&&(l=this.highlighters.filter(v=>!v.scope||v.scope(a)));let f=o,d=getStyleTags(e)||Rule.empty,g=highlightTags(l,d.tags);if(g&&(f&&(f+=" "),f+=g,d.mode==1&&(o+=(o?" ":"")+g)),this.startSpan(Math.max(n,c),f),d.opaque)return;let m=e.tree&&e.tree.prop(NodeProp.mounted);if(m&&m.overlay){let v=e.node.enter(m.overlay[0].from+c,1),k=this.highlighters.filter(E=>!E.scope||E.scope(m.tree.type)),A=e.firstChild();for(let E=0,N=c;;E++){let V=E<m.overlay.length?m.overlay[E]:null,q=V?V.from+c:u,W=Math.max(n,N),H=Math.min(s,q);if(W<H&&A)for(;e.from<H&&(this.highlightRange(e,W,H,o,l),this.startSpan(Math.min(H,e.to),f),!(e.to>=q||!e.nextSibling())););if(!V||q>s)break;N=V.to+c,N>n&&(this.highlightRange(v.cursor(),Math.max(n,V.from+c),Math.min(s,N),"",k),this.startSpan(Math.min(s,N),f))}A&&e.parent()}else if(e.firstChild()){m&&(o="");do if(!(e.to<=n)){if(e.from>=s)break;this.highlightRange(e,n,s,o,l),this.startSpan(Math.min(s,e.to),f)}while(e.nextSibling());e.parent()}}}function getStyleTags(r){let e=r.type.prop(ruleNodeProp);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let r in tags){let e=tags[r];e instanceof Tag&&(e.name=r)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(r){return Facet.define({combine:r?e=>e.concat(r):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(e,n,s=[],o=""){this.data=e,this.name=o,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=n,this.extension=[language.of(this),EditorState.languageData.of((l,a,c)=>{let u=topNodeAt(l,a,c),f=u.type.prop(languageDataProp);if(!f)return[];let d=l.facet(f),g=u.type.prop(sublanguageProp);if(g){let m=u.resolve(a-u.from,c);for(let v of g)if(v.test(m,l)){let k=l.facet(v.facet);return v.type=="replace"?k:k.concat(d)}}return d})].concat(s)}isActiveAt(e,n,s=-1){return topNodeAt(e,n,s).type.prop(languageDataProp)==this.data}findRegions(e){let n=e.facet(language);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let s=[],o=(l,a)=>{if(l.prop(languageDataProp)==this.data){s.push({from:a,to:a+l.length});return}let c=l.prop(NodeProp.mounted);if(c){if(c.tree.prop(languageDataProp)==this.data){if(c.overlay)for(let u of c.overlay)s.push({from:u.from+a,to:u.to+a});else s.push({from:a,to:a+l.length});return}else if(c.overlay){let u=s.length;if(o(c.tree,c.overlay[0].from+a),s.length>u)return}}for(let u=0;u<l.children.length;u++){let f=l.children[u];f instanceof Tree&&o(f,l.positions[u]+a)}};return o(syntaxTree(e),0),s}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(r,e,n){let s=r.facet(language),o=syntaxTree(r).topNode;if(!s||s.allowsNesting)for(let l=o;l;l=l.enter(e,n,IterMode.ExcludeBuffers))l.type.isTop&&(o=l);return o}class LRLanguage extends Language{constructor(e,n,s){super(e,n,[],s),this.parser=n}static define(e){let n=defineLanguageFacet(e.languageData);return new LRLanguage(n,e.parser.configure({props:[languageDataProp.add(s=>s.isTop?n:void 0)]}),e.name)}configure(e,n){return new LRLanguage(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(r){let e=r.field(Language.state,!1);return e?e.tree:Tree.empty}class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let s=this.cursorPos-this.string.length;return e<s||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-s,n-s)}}let currentContext=null;class ParseContext{constructor(e,n,s=[],o,l,a,c,u){this.parser=e,this.state=n,this.fragments=s,this.tree=o,this.treeLen=l,this.viewport=a,this.skipped=c,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,n,s){return new ParseContext(e,n,[],Tree.empty,0,s,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Tree.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof e=="number"){let o=Date.now()+e;e=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=currentContext;currentContext=this;try{return e()}finally{currentContext=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=cutFragments(e,n.from,n.to);return e}changes(e,n){let{fragments:s,tree:o,treeLen:l,viewport:a,skipped:c}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((f,d,g,m)=>u.push({fromA:f,toA:d,fromB:g,toB:m})),s=TreeFragment.applyChanges(s,u),o=Tree.empty,l=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){c=[];for(let f of this.skipped){let d=e.mapPos(f.from,1),g=e.mapPos(f.to,-1);d<g&&c.push({from:d,to:g})}}}return new ParseContext(this.parser,n,s,o,l,a,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:o,to:l}=this.skipped[s];o<e.to&&l>e.from&&(this.fragments=cutFragments(this.fragments,o,l),this.skipped.splice(s--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Parser{createParse(n,s,o){let l=o[0].from,a=o[o.length-1].to;return{parsedPos:l,advance(){let u=currentContext;if(u){for(let f of o)u.tempSkipped.push(f);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=a,new Tree(NodeType.none,[],[],a-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return currentContext}}function cutFragments(r,e,n){return TreeFragment.applyChanges(r,[{fromA:e,toA:n,fromB:e,toB:n}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),s=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,s)||n.takeTree(),new LanguageState(n)}static init(e){let n=Math.min(3e3,e.doc.length),s=ParseContext.create(e.facet(language).parser,e,{from:0,to:n});return s.work(20,n)||s.takeTree(),new LanguageState(s)}}Language.state=StateField.define({create:LanguageState.init,update(r,e){for(let n of e.effects)if(n.is(Language.setState))return n.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):r.apply(e)}});let requestIdle=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(requestIdle=r=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Language.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Language.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=requestIdle(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:s,viewport:{to:o}}=this.view,l=s.field(Language.state);if(l.tree==l.context.tree&&l.context.isDone(o+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),c=l.context.treeLen<o&&s.doc.length>o+1e3,u=l.context.work(()=>isInputPending&&isInputPending()||Date.now()>a,o+(c?0:1e5));this.chunkBudget-=Date.now()-n,(u||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(l.context))})),this.chunkBudget>0&&!(u&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>logException(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(r){return r.length?r[0]:null},enables:r=>[Language.state,parseWorker,EditorView.contentAttributes.compute([r],e=>{let n=e.facet(r);return n&&n.name?{"data-language":n.name}:{}})]});class LanguageSupport{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function getIndentUnit(r){let e=r.facet(indentUnit);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function indentString(r,e){let n="",s=r.tabSize,o=r.facet(indentUnit)[0];if(o=="	"){for(;e>=s;)n+="	",e-=s;o=" "}for(let l=0;l<e;l++)n+=o;return n}function getIndentation(r,e){r instanceof EditorState&&(r=new IndentContext(r));for(let s of r.state.facet(indentService)){let o=s(r,e);if(o!==void 0)return o}let n=syntaxTree(r.state);return n.length>=e?syntaxIndentation(r,n,e):null}class IndentContext{constructor(e,n={}){this.state=e,this.options=n,this.unit=getIndentUnit(e)}lineAt(e,n=1){let s=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:l}=this.options;return o!=null&&o>=s.from&&o<=s.to?l&&o==e?{text:"",from:e}:(n<0?o<e:o<=e)?{text:s.text.slice(o-s.from),from:o}:{text:s.text.slice(0,o-s.from),from:s.from}:s}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:s,from:o}=this.lineAt(e,n);return s.slice(e-o,Math.min(s.length,e+100-o))}column(e,n=1){let{text:s,from:o}=this.lineAt(e,n),l=this.countColumn(s,e-o),a=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return a>-1&&(l+=a-this.countColumn(s,s.search(/\S|$/))),l}countColumn(e,n=e.length){return countColumn(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:s,from:o}=this.lineAt(e,n),l=this.options.overrideIndentation;if(l){let a=l(o);if(a>-1)return a}return this.countColumn(s,s.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(r,e,n){let s=e.resolveStack(n),o=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(o!=s.node){let l=[];for(let a=o;a&&!(a.from<s.node.from||a.to>s.node.to||a.from==s.node.from&&a.type==s.node.type);a=a.parent)l.push(a);for(let a=l.length-1;a>=0;a--)s={node:l[a],next:s}}return indentFor(s,r,n)}function indentFor(r,e,n){for(let s=r;s;s=s.next){let o=indentStrategy(s.node);if(o)return o(TreeIndentContext.create(e,n,s))}return 0}function ignoreClosed(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function indentStrategy(r){let e=r.type.prop(indentNodeProp);if(e)return e;let n=r.firstChild,s;if(n&&(s=n.type.prop(NodeProp.closedBy))){let o=r.lastChild,l=o&&s.indexOf(o.name)>-1;return a=>delimitedStrategy(a,!0,1,void 0,l&&!ignoreClosed(a)?o.from:void 0)}return r.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,n,s){super(e.state,e.options),this.base=e,this.pos=n,this.context=s}get node(){return this.context.node}static create(e,n,s){return new TreeIndentContext(e,n,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let s=e.resolve(n.from);for(;s.parent&&s.parent.from==s.from;)s=s.parent;if(isParent(s,e))break;n=this.state.doc.lineAt(s.from)}return this.lineIndent(n.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(r,e){for(let n=e;n;n=n.parent)if(r==n)return!0;return!1}function bracketedAligned(r){let e=r.node,n=e.childAfter(e.from),s=e.lastChild;if(!n)return null;let o=r.options.simulateBreak,l=r.state.doc.lineAt(n.from),a=o==null||o<=l.from?l.to:Math.min(l.to,o);for(let c=n.to;;){let u=e.childAfter(c);if(!u||u==s)return null;if(!u.type.isSkipped){if(u.from>=a)return null;let f=/^ */.exec(l.text.slice(n.to-l.from))[0].length;return{from:n.from,to:n.to+f}}c=u.to}}function delimitedStrategy(r,e,n,s,o){let l=r.textAfter,a=l.match(/^\s*/)[0].length,c=s&&l.slice(a,a+s.length)==s||o==r.pos+a,u=bracketedAligned(r);return u?c?r.column(u.from):r.column(u.to):r.baseIndent+(c?0:r.unit*n)}function continuedIndent({except:r,units:e=1}={}){return n=>{let s=r&&r.test(n.textAfter);return n.baseIndent+(s?0:e*n.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let n=r.newDoc,{head:s}=r.newSelection.main,o=n.lineAt(s);if(s>o.from+DontIndentBeyond)return r;let l=n.sliceString(o.from,s);if(!e.some(f=>f.test(l)))return r;let{state:a}=r,c=-1,u=[];for(let{head:f}of a.selection.ranges){let d=a.doc.lineAt(f);if(d.from==c)continue;c=d.from;let g=getIndentation(a,d.from);if(g==null)continue;let m=/^\s*/.exec(d.text)[0],v=indentString(a,g);m!=v&&u.push({from:d.from,to:d.from+m.length,insert:v})}return u.length?[r,{changes:u,sequential:!0}]:r})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(r){let e=r.firstChild,n=r.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?r.to:n.from}:null}function syntaxFolding(r,e,n){let s=syntaxTree(r);if(s.length<n)return null;let o=s.resolveStack(n,1),l=null;for(let a=o;a;a=a.next){let c=a.node;if(c.to<=n||c.from>n)continue;if(l&&c.from<e)break;let u=c.type.prop(foldNodeProp);if(u&&(c.to<s.length-50||s.length==r.doc.length||!isUnfinished(c))){let f=u(c,r);f&&f.from<=n&&f.from>=e&&f.to>n&&(l=f)}}return l}function isUnfinished(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function foldable(r,e,n){for(let s of r.facet(foldService)){let o=s(r,e,n);if(o)return o}return syntaxFolding(r,e,n)}function mapRange(r,e){let n=e.mapPos(r.from,1),s=e.mapPos(r.to,-1);return n>=s?void 0:{from:n,to:s}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(r){let e=[];for(let{head:n}of r.state.selection.ranges)e.some(s=>s.from<=n&&s.to>=n)||e.push(r.lineBlockAt(n));return e}const foldState=StateField.define({create(){return Decoration.none},update(r,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,s)=>r=clearTouchedFolds(r,n,s)),r=r.map(e.changes);for(let n of e.effects)if(n.is(foldEffect)&&!foldExists(r,n.value.from,n.value.to)){let{preparePlaceholder:s}=e.state.facet(foldConfig),o=s?Decoration.replace({widget:new PreparedFoldWidget(s(e.state,n.value))}):foldWidget;r=r.update({add:[o.range(n.value.from,n.value.to)]})}else n.is(unfoldEffect)&&(r=r.update({filter:(s,o)=>n.value.from!=s||n.value.to!=o,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(r=clearTouchedFolds(r,e.selection.main.head)),r},provide:r=>EditorView.decorations.from(r),toJSON(r,e){let n=[];return r.between(0,e.doc.length,(s,o)=>{n.push(s,o)}),n},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<r.length;){let s=r[n++],o=r[n++];if(typeof s!="number"||typeof o!="number")throw new RangeError("Invalid JSON for fold state");e.push(foldWidget.range(s,o))}return Decoration.set(e,!0)}});function clearTouchedFolds(r,e,n=e){let s=!1;return r.between(e,n,(o,l)=>{o<n&&l>e&&(s=!0)}),s?r.update({filterFrom:e,filterTo:n,filter:(o,l)=>o>=n||l<=e}):r}function findFold(r,e,n){var s;let o=null;return(s=r.field(foldState,!1))===null||s===void 0||s.between(e,n,(l,a)=>{(!o||o.from>l)&&(o={from:l,to:a})}),o}function foldExists(r,e,n){let s=!1;return r.between(e,e,(o,l)=>{o==e&&l==n&&(s=!0)}),s}function maybeEnable(r,e){return r.field(foldState,!1)?e:e.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=r=>{for(let e of selectedLines(r)){let n=foldable(r.state,e.from,e.to);if(n)return r.dispatch({effects:maybeEnable(r.state,[foldEffect.of(n),announceFold(r,n)])}),!0}return!1},unfoldCode=r=>{if(!r.state.field(foldState,!1))return!1;let e=[];for(let n of selectedLines(r)){let s=findFold(r.state,n.from,n.to);s&&e.push(unfoldEffect.of(s),announceFold(r,s,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function announceFold(r,e,n=!0){let s=r.state.doc.lineAt(e.from).number,o=r.state.doc.lineAt(e.to).number;return EditorView.announce.of(`${r.state.phrase(n?"Folded lines":"Unfolded lines")} ${s} ${r.state.phrase("to")} ${o}.`)}const foldAll=r=>{let{state:e}=r,n=[];for(let s=0;s<e.doc.length;){let o=r.lineBlockAt(s),l=foldable(e,o.from,o.to);l&&n.push(foldEffect.of(l)),s=(l?r.lineBlockAt(l.to):o).to+1}return n.length&&r.dispatch({effects:maybeEnable(r.state,n)}),!!n.length},unfoldAll=r=>{let e=r.state.field(foldState,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,r.state.doc.length,(s,o)=>{n.push(unfoldEffect.of({from:s,to:o}))}),r.dispatch({effects:n}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},foldConfig=Facet.define({combine(r){return combineConfig(r,defaultConfig)}});function codeFolding(r){return[foldState,baseTheme$1$2]}function widgetToDOM(r,e){let{state:n}=r,s=n.facet(foldConfig),o=a=>{let c=r.lineBlockAt(r.posAtDOM(a.target)),u=findFold(r.state,c.from,c.to);u&&r.dispatch({effects:unfoldEffect.of(u)}),a.preventDefault()};if(s.placeholderDOM)return s.placeholderDOM(r,o,e);let l=document.createElement("span");return l.textContent=s.placeholderText,l.setAttribute("aria-label",n.phrase("folded code")),l.title=n.phrase("unfold"),l.className="cm-foldPlaceholder",l.onclick=o,l}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(r){return widgetToDOM(r,null)}}});class PreparedFoldWidget extends WidgetType{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return widgetToDOM(e,this.value)}}const foldGutterDefaults={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function foldGutter(r={}){let e={...foldGutterDefaults,...r},n=new FoldMarker(e,!0),s=new FoldMarker(e,!1),o=ViewPlugin.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(language)!=a.state.facet(language)||a.startState.field(foldState,!1)!=a.state.field(foldState,!1)||syntaxTree(a.startState)!=syntaxTree(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let c=new RangeSetBuilder;for(let u of a.viewportLineBlocks){let f=findFold(a.state,u.from,u.to)?s:foldable(a.state,u.from,u.to)?n:null;f&&c.add(u.from,u.from,f)}return c.finish()}}),{domEventHandlers:l}=e;return[o,gutter({class:"cm-foldGutter",markers(a){var c;return((c=a.plugin(o))===null||c===void 0?void 0:c.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(e,!1)},domEventHandlers:{...l,click:(a,c,u)=>{if(l.click&&l.click(a,c,u))return!0;let f=findFold(a.state,c.from,c.to);if(f)return a.dispatch({effects:unfoldEffect.of(f)}),!0;let d=foldable(a.state,c.from,c.to);return d?(a.dispatch({effects:foldEffect.of(d)}),!0):!1}}}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(e,n){this.specs=e;let s;function o(c){let u=StyleModule.newName();return(s||(s=Object.create(null)))["."+u]=c,u}const l=typeof n.all=="string"?n.all:n.all?o(n.all):void 0,a=n.scope;this.scope=a instanceof Language?c=>c.prop(languageDataProp)==a.data:a?c=>c==a:void 0,this.style=tagHighlighter(e.map(c=>({tag:c.tag,class:c.class||o(Object.assign({},c,{tag:null}))})),{all:l}).style,this.module=s?new StyleModule(s):null,this.themeType=n.themeType}static define(e,n){return new HighlightStyle(e,n||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(r){return r.length?[r[0]]:null}});function getHighlighters(r){let e=r.facet(highlighterFacet);return e.length?e:r.facet(fallbackHighlighter)}function syntaxHighlighting(r,e){let n=[treeHighlighter],s;return r instanceof HighlightStyle&&(r.module&&n.push(EditorView.styleModule.of(r.module)),s=r.themeType),e!=null&&e.fallback?n.push(fallbackHighlighter.of(r)):s?n.push(highlighterFacet.computeN([EditorView.darkTheme],o=>o.facet(EditorView.darkTheme)==(s=="dark")?[r]:[])):n.push(highlighterFacet.of(r)),n}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=syntaxTree(e.state),s=getHighlighters(e.state),o=s!=getHighlighters(e.startState),{viewport:l}=e.view,a=e.changes.mapPos(this.decoratedTo,1);n.length<l.to&&!o&&n.type==this.tree.type&&a>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(n!=this.tree||e.viewportChanged||o)&&(this.tree=n,this.decorations=this.buildDeco(e.view,s),this.decoratedTo=l.to)}buildDeco(e,n){if(!n||!this.tree.length)return Decoration.none;let s=new RangeSetBuilder;for(let{from:o,to:l}of e.visibleRanges)highlightTree(this.tree,n,(a,c,u)=>{s.add(a,c,this.markCache[u]||(this.markCache[u]=Decoration.mark({class:u})))},o,l);return s.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:r=>r.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(r){return combineConfig(r,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(r){let e=[],n=r.matched?matchingMark:nonmatchingMark;return e.push(n.range(r.start.from,r.start.to)),r.end&&e.push(n.range(r.end.from,r.end.to)),e}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let n=[],s=e.state.facet(bracketMatchingConfig);for(let o of e.state.selection.ranges){if(!o.empty)continue;let l=matchBrackets(e.state,o.head,-1,s)||o.head>0&&matchBrackets(e.state,o.head-1,1,s)||s.afterCursor&&(matchBrackets(e.state,o.head,1,s)||o.head<e.state.doc.length&&matchBrackets(e.state,o.head+1,-1,s));l&&(n=n.concat(s.renderMatch(l,e.state)))}return Decoration.set(n,!0)},provide:r=>EditorView.decorations.from(r)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(r={}){return[bracketMatchingConfig.of(r),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(r,e,n){let s=r.prop(e<0?NodeProp.openedBy:NodeProp.closedBy);if(s)return s;if(r.name.length==1){let o=n.indexOf(r.name);if(o>-1&&o%2==(e<0?1:0))return[n[o+e]]}return null}function findHandle(r){let e=r.type.prop(bracketMatchingHandle);return e?e(r.node):r}function matchBrackets(r,e,n,s={}){let o=s.maxScanDistance||DefaultScanDist,l=s.brackets||DefaultBrackets,a=syntaxTree(r),c=a.resolveInner(e,n);for(let u=c;u;u=u.parent){let f=matchingNodes(u.type,n,l);if(f&&u.from<u.to){let d=findHandle(u);if(d&&(n>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return matchMarkedBrackets(r,e,n,u,d,f,l)}}return matchPlainBrackets(r,e,n,a,c.type,o,l)}function matchMarkedBrackets(r,e,n,s,o,l,a){let c=s.parent,u={from:o.from,to:o.to},f=0,d=c==null?void 0:c.cursor();if(d&&(n<0?d.childBefore(s.from):d.childAfter(s.to)))do if(n<0?d.to<=s.from:d.from>=s.to){if(f==0&&l.indexOf(d.type.name)>-1&&d.from<d.to){let g=findHandle(d);return{start:u,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(matchingNodes(d.type,n,a))f++;else if(matchingNodes(d.type,-n,a)){if(f==0){let g=findHandle(d);return{start:u,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}f--}}while(n<0?d.prevSibling():d.nextSibling());return{start:u,matched:!1}}function matchPlainBrackets(r,e,n,s,o,l,a){let c=n<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),u=a.indexOf(c);if(u<0||u%2==0!=n>0)return null;let f={from:n<0?e-1:e,to:n>0?e+1:e},d=r.doc.iterRange(e,n>0?r.doc.length:0),g=0;for(let m=0;!d.next().done&&m<=l;){let v=d.value;n<0&&(m+=v.length);let k=e+m*n;for(let A=n>0?0:v.length-1,E=n>0?v.length:-1;A!=E;A+=n){let N=a.indexOf(v[A]);if(!(N<0||s.resolveInner(k+A,1).type!=o))if(N%2==0==n>0)g++;else{if(g==1)return{start:f,end:{from:k+A,to:k+A+1},matched:N>>1==u>>1};g--}}n>0&&(m+=v.length)}return d.done?{start:f,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[r]=createTokenType(noTokens,e);function warnForPart(r,e){warned.indexOf(r)>-1||(warned.push(r),console.warn(e))}function createTokenType(r,e){let n=[];for(let c of e.split(" ")){let u=[];for(let f of c.split(".")){let d=r[f]||tags[f];d?typeof d=="function"?u.length?u=u.map(d):warnForPart(f,`Modifier ${f} used at start of tag`):u.length?warnForPart(f,`Tag ${f} used as modifier`):u=Array.isArray(d)?d:[d]:warnForPart(f,`Unknown highlighting tag ${f}`)}for(let f of u)n.push(f)}if(!n.length)return 0;let s=e.replace(/ /g,"_"),o=s+" "+n.map(c=>c.id),l=byTag[o];if(l)return l.id;let a=byTag[o]=NodeType.define({id:typeArray.length,name:s,props:[styleTags({[s]:n})]});return typeArray.push(a),a.id}Direction.RTL,Direction.LTR;const toggleComment=r=>{let{state:e}=r,n=e.doc.lineAt(e.selection.main.from),s=getConfig(r.state,n.from);return s.line?toggleLineComment(r):s.block?toggleBlockCommentByLine(r):!1};function command(r,e){return({state:n,dispatch:s})=>{if(n.readOnly)return!1;let o=r(e,n);return o?(s(n.update(o)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((r,e)=>changeBlockComment(r,e,selectedLineRanges(e)),0);function getConfig(r,e){let n=r.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const SearchMargin=50;function findBlockComment(r,{open:e,close:n},s,o){let l=r.sliceDoc(s-SearchMargin,s),a=r.sliceDoc(o,o+SearchMargin),c=/\s*$/.exec(l)[0].length,u=/^\s*/.exec(a)[0].length,f=l.length-c;if(l.slice(f-e.length,f)==e&&a.slice(u,u+n.length)==n)return{open:{pos:s-c,margin:c&&1},close:{pos:o+u,margin:u&&1}};let d,g;o-s<=2*SearchMargin?d=g=r.sliceDoc(s,o):(d=r.sliceDoc(s,s+SearchMargin),g=r.sliceDoc(o-SearchMargin,o));let m=/^\s*/.exec(d)[0].length,v=/\s*$/.exec(g)[0].length,k=g.length-v-n.length;return d.slice(m,m+e.length)==e&&g.slice(k,k+n.length)==n?{open:{pos:s+m+e.length,margin:/\s/.test(d.charAt(m+e.length))?1:0},close:{pos:o-v-n.length,margin:/\s/.test(g.charAt(k-1))?1:0}}:null}function selectedLineRanges(r){let e=[];for(let n of r.selection.ranges){let s=r.doc.lineAt(n.from),o=n.to<=s.to?s:r.doc.lineAt(n.to);o.from>s.from&&o.from==n.to&&(o=n.to==s.to+1?s:r.doc.lineAt(n.to-1));let l=e.length-1;l>=0&&e[l].to>s.from?e[l].to=o.to:e.push({from:s.from+/^\s*/.exec(s.text)[0].length,to:o.to})}return e}function changeBlockComment(r,e,n=e.selection.ranges){let s=n.map(l=>getConfig(e,l.from).block);if(!s.every(l=>l))return null;let o=n.map((l,a)=>findBlockComment(e,s[a],l.from,l.to));if(r!=2&&!o.every(l=>l))return{changes:e.changes(n.map((l,a)=>o[a]?[]:[{from:l.from,insert:s[a].open+" "},{from:l.to,insert:" "+s[a].close}]))};if(r!=1&&o.some(l=>l)){let l=[];for(let a=0,c;a<o.length;a++)if(c=o[a]){let u=s[a],{open:f,close:d}=c;l.push({from:f.pos-u.open.length,to:f.pos+f.margin},{from:d.pos-d.margin,to:d.pos+u.close.length})}return{changes:l}}return null}function changeLineComment(r,e,n=e.selection.ranges){let s=[],o=-1;for(let{from:l,to:a}of n){let c=s.length,u=1e9,f=getConfig(e,l).line;if(f){for(let d=l;d<=a;){let g=e.doc.lineAt(d);if(g.from>o&&(l==a||a>g.from)){o=g.from;let m=/^\s*/.exec(g.text)[0].length,v=m==g.length,k=g.text.slice(m,m+f.length)==f?m:-1;m<g.text.length&&m<u&&(u=m),s.push({line:g,comment:k,token:f,indent:m,empty:v,single:!1})}d=g.to+1}if(u<1e9)for(let d=c;d<s.length;d++)s[d].indent<s[d].line.text.length&&(s[d].indent=u);s.length==c+1&&(s[c].single=!0)}}if(r!=2&&s.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:c,token:u,indent:f,empty:d,single:g}of s)(g||!d)&&l.push({from:c.from+f,insert:u+" "});let a=e.changes(l);return{changes:a,selection:e.selection.map(a,1)}}else if(r!=1&&s.some(l=>l.comment>=0)){let l=[];for(let{line:a,comment:c,token:u}of s)if(c>=0){let f=a.from+c,d=f+u.length;a.text[d-a.from]==" "&&d++,l.push({from:f,to:d})}return{changes:l}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(r){return combineConfig(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(s,o)=>e(s,o)||n(s,o)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(r,e){let n=e.state.facet(historyConfig),s=e.annotation(fromHistory);if(s){let u=HistEvent.fromTransaction(e,s.selection),f=s.side,d=f==0?r.undone:r.done;return u?d=updateBranch(d,d.length,n.minDepth,u):d=addSelection(d,e.startState.selection),new HistoryState(f==0?s.rest:d,f==0?d:s.rest)}let o=e.annotation(isolateHistory);if((o=="full"||o=="before")&&(r=r.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let l=HistEvent.fromTransaction(e),a=e.annotation(Transaction.time),c=e.annotation(Transaction.userEvent);return l?r=r.addChanges(l,a,c,n,e):e.selection&&(r=r.addSelection(e.startState.selection,a,c,n.newGroupDelay)),(o=="full"||o=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new HistoryState(r.done.map(HistEvent.fromJSON),r.undone.map(HistEvent.fromJSON))}});function history(r={}){return[historyField_,historyConfig.of(r),EditorView.domEventHandlers({beforeinput(e,n){let s=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;return s?(e.preventDefault(),s(n)):!1}})]}function cmd(r,e){return function({state:n,dispatch:s}){if(!e&&n.readOnly)return!1;let o=n.field(historyField_,!1);if(!o)return!1;let l=o.pop(r,n,e);return l?(s(l),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,n,s,o,l){this.changes=e,this.effects=n,this.mapped=s,this.startSelection=o,this.selectionsAfter=l}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,s;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(s=this.startSelection)===null||s===void 0?void 0:s.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,n){let s=none$1;for(let o of e.startState.facet(invertedEffects)){let l=o(e);l.length&&(s=s.concat(l))}return!s.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),s,void 0,n||e.startState.selection,none$1)}static selection(e){return new HistEvent(void 0,none$1,void 0,void 0,e)}}function updateBranch(r,e,n,s){let o=e+1>n+20?e-n-1:0,l=r.slice(o,e);return l.push(s),l}function isAdjacent(r,e){let n=[],s=!1;return r.iterChangedRanges((o,l)=>n.push(o,l)),e.iterChangedRanges((o,l,a,c)=>{for(let u=0;u<n.length;){let f=n[u++],d=n[u++];c>=f&&a<=d&&(s=!0)}}),s}function eqSelectionShape(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((n,s)=>n.empty!=e.ranges[s].empty).length===0}function conc(r,e){return r.length?e.length?r.concat(e):r:e}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(r,e){if(r.length){let n=r[r.length-1],s=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-MaxSelectionsPerEvent));return s.length&&s[s.length-1].eq(e)?r:(s.push(e),updateBranch(r,r.length-1,1e9,n.setSelAfter(s)))}else return[HistEvent.selection([e])]}function popSelection(r){let e=r[r.length-1],n=r.slice();return n[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function addMappingToBranch(r,e){if(!r.length)return r;let n=r.length,s=none$1;for(;n;){let o=mapEvent(r[n-1],e,s);if(o.changes&&!o.changes.empty||o.effects.length){let l=r.slice(0,n);return l[n-1]=o,l}else e=o.mapped,n--,s=o.selectionsAfter}return s.length?[HistEvent.selection(s)]:none$1}function mapEvent(r,e,n){let s=conc(r.selectionsAfter.length?r.selectionsAfter.map(c=>c.map(e)):none$1,n);if(!r.changes)return HistEvent.selection(s);let o=r.changes.map(e),l=e.mapDesc(r.changes,!0),a=r.mapped?r.mapped.composeDesc(l):l;return new HistEvent(o,StateEffect.mapEffects(r.effects,e),a,r.startSelection.map(l),s)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,n,s=0,o=void 0){this.done=e,this.undone=n,this.prevTime=s,this.prevUserEvent=o}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,n,s,o,l){let a=this.done,c=a[a.length-1];return c&&c.changes&&!c.changes.empty&&e.changes&&(!s||joinableUserEvent.test(s))&&(!c.selectionsAfter.length&&n-this.prevTime<o.newGroupDelay&&o.joinToEvent(l,isAdjacent(c.changes,e.changes))||s=="input.type.compose")?a=updateBranch(a,a.length-1,o.minDepth,new HistEvent(e.changes.compose(c.changes),conc(StateEffect.mapEffects(e.effects,c.changes),c.effects),c.mapped,c.startSelection,none$1)):a=updateBranch(a,a.length,o.minDepth,e),new HistoryState(a,none$1,n,s)}addSelection(e,n,s,o){let l=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return l.length>0&&n-this.prevTime<o&&s==this.prevUserEvent&&s&&/^select($|\.)/.test(s)&&eqSelectionShape(l[l.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,n,s)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,s){let o=e==0?this.done:this.undone;if(o.length==0)return null;let l=o[o.length-1],a=l.selectionsAfter[0]||n.selection;if(s&&l.selectionsAfter.length)return n.update({selection:l.selectionsAfter[l.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(o),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(l.changes){let c=o.length==1?none$1:o.slice(0,o.length-1);return l.mapped&&(c=addMappingToBranch(c,l.mapped)),n.update({changes:l.changes,selection:l.startSelection,effects:l.effects,annotations:fromHistory.of({side:e,rest:c,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(r,e){return EditorSelection.create(r.ranges.map(e),r.mainIndex)}function setSel(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:r,dispatch:e},n){let s=updateSel(r.selection,n);return s.eq(r.selection,!0)?!1:(e(setSel(r,s)),!0)}function rangeEnd(r,e){return EditorSelection.cursor(e?r.to:r.from)}function cursorByChar(r,e){return moveSel(r,n=>n.empty?r.moveByChar(n,e):rangeEnd(n,e))}function ltrAtCursor(r){return r.textDirectionAt(r.state.selection.main.head)==Direction.LTR}const cursorCharLeft=r=>cursorByChar(r,!ltrAtCursor(r)),cursorCharRight=r=>cursorByChar(r,ltrAtCursor(r));function cursorByGroup(r,e){return moveSel(r,n=>n.empty?r.moveByGroup(n,e):rangeEnd(n,e))}const cursorGroupLeft=r=>cursorByGroup(r,!ltrAtCursor(r)),cursorGroupRight=r=>cursorByGroup(r,ltrAtCursor(r));function interestingNode(r,e,n){if(e.type.prop(n))return!0;let s=e.to-e.from;return s&&(s>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(r,e,n){let s=syntaxTree(r).resolveInner(e.head),o=n?NodeProp.closedBy:NodeProp.openedBy;for(let u=e.head;;){let f=n?s.childAfter(u):s.childBefore(u);if(!f)break;interestingNode(r,f,o)?s=f:u=n?f.to:f.from}let l=s.type.prop(o),a,c;return l&&(a=n?matchBrackets(r,s.from,1):matchBrackets(r,s.to,-1))&&a.matched?c=n?a.end.to:a.end.from:c=n?s.to:s.from,EditorSelection.cursor(c,n?-1:1)}const cursorSyntaxLeft=r=>moveSel(r,e=>moveBySyntax(r.state,e,!ltrAtCursor(r))),cursorSyntaxRight=r=>moveSel(r,e=>moveBySyntax(r.state,e,ltrAtCursor(r)));function cursorByLine(r,e){return moveSel(r,n=>{if(!n.empty)return rangeEnd(n,e);let s=r.moveVertically(n,e);return s.head!=n.head?s:r.moveToLineBoundary(n,e)})}const cursorLineUp=r=>cursorByLine(r,!1),cursorLineDown=r=>cursorByLine(r,!0);function pageInfo(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,n=0,s=0,o;if(e){for(let l of r.state.facet(EditorView.scrollMargins)){let a=l(r);a!=null&&a.top&&(n=Math.max(a==null?void 0:a.top,n)),a!=null&&a.bottom&&(s=Math.max(a==null?void 0:a.bottom,s))}o=r.scrollDOM.clientHeight-n-s}else o=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:s,selfScroll:e,height:Math.max(r.defaultLineHeight,o-5)}}function cursorByPage(r,e){let n=pageInfo(r),{state:s}=r,o=updateSel(s.selection,a=>a.empty?r.moveVertically(a,e,n.height):rangeEnd(a,e));if(o.eq(s.selection))return!1;let l;if(n.selfScroll){let a=r.coordsAtPos(s.selection.main.head),c=r.scrollDOM.getBoundingClientRect(),u=c.top+n.marginTop,f=c.bottom-n.marginBottom;a&&a.top>u&&a.bottom<f&&(l=EditorView.scrollIntoView(o.main.head,{y:"start",yMargin:a.top-u}))}return r.dispatch(setSel(s,o),{effects:l}),!0}const cursorPageUp=r=>cursorByPage(r,!1),cursorPageDown=r=>cursorByPage(r,!0);function moveByLineBoundary(r,e,n){let s=r.lineBlockAt(e.head),o=r.moveToLineBoundary(e,n);if(o.head==e.head&&o.head!=(n?s.to:s.from)&&(o=r.moveToLineBoundary(e,n,!1)),!n&&o.head==s.from&&s.length){let l=/^\s*/.exec(r.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;l&&e.head!=s.from+l&&(o=EditorSelection.cursor(s.from+l))}return o}const cursorLineBoundaryForward=r=>moveSel(r,e=>moveByLineBoundary(r,e,!0)),cursorLineBoundaryBackward=r=>moveSel(r,e=>moveByLineBoundary(r,e,!1)),cursorLineBoundaryLeft=r=>moveSel(r,e=>moveByLineBoundary(r,e,!ltrAtCursor(r))),cursorLineBoundaryRight=r=>moveSel(r,e=>moveByLineBoundary(r,e,ltrAtCursor(r))),cursorLineStart=r=>moveSel(r,e=>EditorSelection.cursor(r.lineBlockAt(e.head).from,1)),cursorLineEnd=r=>moveSel(r,e=>EditorSelection.cursor(r.lineBlockAt(e.head).to,-1));function toMatchingBracket(r,e,n){let s=!1,o=updateSel(r.selection,l=>{let a=matchBrackets(r,l.head,-1)||matchBrackets(r,l.head,1)||l.head>0&&matchBrackets(r,l.head-1,1)||l.head<r.doc.length&&matchBrackets(r,l.head+1,-1);if(!a||!a.end)return l;s=!0;let c=a.start.from==l.head?a.end.to:a.end.from;return EditorSelection.cursor(c)});return s?(e(setSel(r,o)),!0):!1}const cursorMatchingBracket=({state:r,dispatch:e})=>toMatchingBracket(r,e);function extendSel(r,e){let n=updateSel(r.state.selection,s=>{let o=e(s);return EditorSelection.range(s.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return n.eq(r.state.selection)?!1:(r.dispatch(setSel(r.state,n)),!0)}function selectByChar(r,e){return extendSel(r,n=>r.moveByChar(n,e))}const selectCharLeft=r=>selectByChar(r,!ltrAtCursor(r)),selectCharRight=r=>selectByChar(r,ltrAtCursor(r));function selectByGroup(r,e){return extendSel(r,n=>r.moveByGroup(n,e))}const selectGroupLeft=r=>selectByGroup(r,!ltrAtCursor(r)),selectGroupRight=r=>selectByGroup(r,ltrAtCursor(r)),selectSyntaxLeft=r=>extendSel(r,e=>moveBySyntax(r.state,e,!ltrAtCursor(r))),selectSyntaxRight=r=>extendSel(r,e=>moveBySyntax(r.state,e,ltrAtCursor(r)));function selectByLine(r,e){return extendSel(r,n=>r.moveVertically(n,e))}const selectLineUp=r=>selectByLine(r,!1),selectLineDown=r=>selectByLine(r,!0);function selectByPage(r,e){return extendSel(r,n=>r.moveVertically(n,e,pageInfo(r).height))}const selectPageUp=r=>selectByPage(r,!1),selectPageDown=r=>selectByPage(r,!0),selectLineBoundaryForward=r=>extendSel(r,e=>moveByLineBoundary(r,e,!0)),selectLineBoundaryBackward=r=>extendSel(r,e=>moveByLineBoundary(r,e,!1)),selectLineBoundaryLeft=r=>extendSel(r,e=>moveByLineBoundary(r,e,!ltrAtCursor(r))),selectLineBoundaryRight=r=>extendSel(r,e=>moveByLineBoundary(r,e,ltrAtCursor(r))),selectLineStart=r=>extendSel(r,e=>EditorSelection.cursor(r.lineBlockAt(e.head).from)),selectLineEnd=r=>extendSel(r,e=>EditorSelection.cursor(r.lineBlockAt(e.head).to)),cursorDocStart=({state:r,dispatch:e})=>(e(setSel(r,{anchor:0})),!0),cursorDocEnd=({state:r,dispatch:e})=>(e(setSel(r,{anchor:r.doc.length})),!0),selectDocStart=({state:r,dispatch:e})=>(e(setSel(r,{anchor:r.selection.main.anchor,head:0})),!0),selectDocEnd=({state:r,dispatch:e})=>(e(setSel(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),selectAll=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),selectLine=({state:r,dispatch:e})=>{let n=selectedLineBlocks(r).map(({from:s,to:o})=>EditorSelection.range(s,Math.min(o+1,r.doc.length)));return e(r.update({selection:EditorSelection.create(n),userEvent:"select"})),!0},selectParentSyntax=({state:r,dispatch:e})=>{let n=updateSel(r.selection,s=>{let o=syntaxTree(r),l=o.resolveStack(s.from,1);if(s.empty){let a=o.resolveStack(s.from,-1);a.node.from>=l.node.from&&a.node.to<=l.node.to&&(l=a)}for(let a=l;a;a=a.next){let{node:c}=a;if((c.from<s.from&&c.to>=s.to||c.to>s.to&&c.from<=s.from)&&a.next)return EditorSelection.range(c.to,c.from)}return s});return n.eq(r.selection)?!1:(e(setSel(r,n)),!0)};function addCursorVertically(r,e){let{state:n}=r,s=n.selection,o=n.selection.ranges.slice();for(let l of n.selection.ranges){let a=n.doc.lineAt(l.head);if(e?a.to<r.state.doc.length:a.from>0)for(let c=l;;){let u=r.moveVertically(c,e);if(u.head<a.from||u.head>a.to){o.some(f=>f.head==u.head)||o.push(u);break}else{if(u.head==c.head)break;c=u}}}return o.length==s.ranges.length?!1:(r.dispatch(setSel(n,EditorSelection.create(o,o.length-1))),!0)}const addCursorAbove=r=>addCursorVertically(r,!1),addCursorBelow=r=>addCursorVertically(r,!0),simplifySelection=({state:r,dispatch:e})=>{let n=r.selection,s=null;return n.ranges.length>1?s=EditorSelection.create([n.main]):n.main.empty||(s=EditorSelection.create([EditorSelection.cursor(n.main.head)])),s?(e(setSel(r,s)),!0):!1};function deleteBy(r,e){if(r.state.readOnly)return!1;let n="delete.selection",{state:s}=r,o=s.changeByRange(l=>{let{from:a,to:c}=l;if(a==c){let u=e(l);u<a?(n="delete.backward",u=skipAtomic(r,u,!1)):u>a&&(n="delete.forward",u=skipAtomic(r,u,!0)),a=Math.min(a,u),c=Math.max(c,u)}else a=skipAtomic(r,a,!1),c=skipAtomic(r,c,!0);return a==c?{range:l}:{changes:{from:a,to:c},range:EditorSelection.cursor(a,a<l.head?-1:1)}});return o.changes.empty?!1:(r.dispatch(s.update(o,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?EditorView.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(r,e,n){if(r instanceof EditorView)for(let s of r.state.facet(EditorView.atomicRanges).map(o=>o(r)))s.between(e,e,(o,l)=>{o<e&&l>e&&(e=n?l:o)});return e}const deleteByChar=(r,e,n)=>deleteBy(r,s=>{let o=s.from,{state:l}=r,a=l.doc.lineAt(o),c,u;if(n&&!e&&o>a.from&&o<a.from+200&&!/[^ \t]/.test(c=a.text.slice(0,o-a.from))){if(c[c.length-1]=="	")return o-1;let f=countColumn(c,l.tabSize),d=f%getIndentUnit(l)||getIndentUnit(l);for(let g=0;g<d&&c[c.length-1-g]==" ";g++)o--;u=o}else u=findClusterBreak(a.text,o-a.from,e,e)+a.from,u==o&&a.number!=(e?l.doc.lines:1)?u+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(u-a.from,o-a.from))&&(u=findClusterBreak(a.text,u-a.from,!1,!1)+a.from);return u}),deleteCharBackward=r=>deleteByChar(r,!1,!0),deleteCharForward=r=>deleteByChar(r,!0,!1),deleteByGroup=(r,e)=>deleteBy(r,n=>{let s=n.head,{state:o}=r,l=o.doc.lineAt(s),a=o.charCategorizer(s);for(let c=null;;){if(s==(e?l.to:l.from)){s==n.head&&l.number!=(e?o.doc.lines:1)&&(s+=e?1:-1);break}let u=findClusterBreak(l.text,s-l.from,e)+l.from,f=l.text.slice(Math.min(s,u)-l.from,Math.max(s,u)-l.from),d=a(f);if(c!=null&&d!=c)break;(f!=" "||s!=n.head)&&(c=d),s=u}return s}),deleteGroupBackward=r=>deleteByGroup(r,!1),deleteGroupForward=r=>deleteByGroup(r,!0),deleteToLineEnd=r=>deleteBy(r,e=>{let n=r.lineBlockAt(e.head).to;return e.head<n?n:Math.min(r.state.doc.length,e.head+1)}),deleteLineBoundaryBackward=r=>deleteBy(r,e=>{let n=r.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),deleteLineBoundaryForward=r=>deleteBy(r,e=>{let n=r.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(r.state.doc.length,e.head+1)}),splitLine=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let n=r.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:Text.of(["",""])},range:EditorSelection.cursor(s.from)}));return e(r.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let n=r.changeByRange(s=>{if(!s.empty||s.from==0||s.from==r.doc.length)return{range:s};let o=s.from,l=r.doc.lineAt(o),a=o==l.from?o-1:findClusterBreak(l.text,o-l.from,!1)+l.from,c=o==l.to?o+1:findClusterBreak(l.text,o-l.from,!0)+l.from;return{changes:{from:a,to:c,insert:r.doc.slice(o,c).append(r.doc.slice(a,o))},range:EditorSelection.cursor(c)}});return n.changes.empty?!1:(e(r.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(r){let e=[],n=-1;for(let s of r.selection.ranges){let o=r.doc.lineAt(s.from),l=r.doc.lineAt(s.to);if(!s.empty&&s.to==l.from&&(l=r.doc.lineAt(s.to-1)),n>=o.number){let a=e[e.length-1];a.to=l.to,a.ranges.push(s)}else e.push({from:o.from,to:l.to,ranges:[s]});n=l.number+1}return e}function moveLine(r,e,n){if(r.readOnly)return!1;let s=[],o=[];for(let l of selectedLineBlocks(r)){if(n?l.to==r.doc.length:l.from==0)continue;let a=r.doc.lineAt(n?l.to+1:l.from-1),c=a.length+1;if(n){s.push({from:l.to,to:a.to},{from:l.from,insert:a.text+r.lineBreak});for(let u of l.ranges)o.push(EditorSelection.range(Math.min(r.doc.length,u.anchor+c),Math.min(r.doc.length,u.head+c)))}else{s.push({from:a.from,to:l.from},{from:l.to,insert:r.lineBreak+a.text});for(let u of l.ranges)o.push(EditorSelection.range(u.anchor-c,u.head-c))}}return s.length?(e(r.update({changes:s,scrollIntoView:!0,selection:EditorSelection.create(o,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:r,dispatch:e})=>moveLine(r,e,!1),moveLineDown=({state:r,dispatch:e})=>moveLine(r,e,!0);function copyLine(r,e,n){if(r.readOnly)return!1;let s=[];for(let l of selectedLineBlocks(r))n?s.push({from:l.from,insert:r.doc.slice(l.from,l.to)+r.lineBreak}):s.push({from:l.to,insert:r.lineBreak+r.doc.slice(l.from,l.to)});let o=r.changes(s);return e(r.update({changes:o,selection:r.selection.map(o,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:r,dispatch:e})=>copyLine(r,e,!1),copyLineDown=({state:r,dispatch:e})=>copyLine(r,e,!0),deleteLine=r=>{if(r.state.readOnly)return!1;let{state:e}=r,n=e.changes(selectedLineBlocks(e).map(({from:o,to:l})=>(o>0?o--:l<e.doc.length&&l++,{from:o,to:l}))),s=updateSel(e.selection,o=>{let l;if(r.lineWrapping){let a=r.lineBlockAt(o.head),c=r.coordsAtPos(o.head,o.assoc||1);c&&(l=a.bottom+r.documentTop-c.bottom+r.defaultLineHeight/2)}return r.moveVertically(o,!0,l)}).map(n);return r.dispatch({changes:n,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=syntaxTree(r).resolveInner(e),s=n.childBefore(e),o=n.childAfter(e),l;return s&&o&&s.to<=e&&o.from>=e&&(l=s.type.prop(NodeProp.closedBy))&&l.indexOf(o.name)>-1&&r.doc.lineAt(s.to).from==r.doc.lineAt(o.from).from&&!/\S/.test(r.sliceDoc(s.to,o.from))?{from:s.to,to:o.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(r){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let s=e.changeByRange(o=>{let{from:l,to:a}=o,c=e.doc.lineAt(l),u=!r&&l==a&&isBetweenBrackets(e,l);r&&(l=a=(a<=c.to?c:e.doc.lineAt(a)).to);let f=new IndentContext(e,{simulateBreak:l,simulateDoubleBreak:!!u}),d=getIndentation(f,l);for(d==null&&(d=countColumn(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));a<c.to&&/\s/.test(c.text[a-c.from]);)a++;u?{from:l,to:a}=u:l>c.from&&l<c.from+100&&!/\S/.test(c.text.slice(0,l))&&(l=c.from);let g=["",indentString(e,d)];return u&&g.push(indentString(e,f.lineIndent(c.from,-1))),{changes:{from:l,to:a,insert:Text.of(g)},range:EditorSelection.cursor(l+1+g[1].length)}});return n(e.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(r,e){let n=-1;return r.changeByRange(s=>{let o=[];for(let a=s.from;a<=s.to;){let c=r.doc.lineAt(a);c.number>n&&(s.empty||s.to>c.from)&&(e(c,o,s),n=c.number),a=c.to+1}let l=r.changes(o);return{changes:o,range:EditorSelection.range(l.mapPos(s.anchor,1),l.mapPos(s.head,1))}})}const indentSelection=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let n=Object.create(null),s=new IndentContext(r,{overrideIndentation:l=>{let a=n[l];return a??-1}}),o=changeBySelectedLine(r,(l,a,c)=>{let u=getIndentation(s,l.from);if(u==null)return;/\S/.test(l.text)||(u=0);let f=/^\s*/.exec(l.text)[0],d=indentString(r,u);(f!=d||c.from<l.from+f.length)&&(n[l.from]=u,a.push({from:l.from,to:l.from+f.length,insert:d}))});return o.changes.empty||e(r.update(o,{userEvent:"indent"})),!0},indentMore=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(changeBySelectedLine(r,(n,s)=>{s.push({from:n.from,insert:r.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(changeBySelectedLine(r,(n,s)=>{let o=/^\s*/.exec(n.text)[0];if(!o)return;let l=countColumn(o,r.tabSize),a=0,c=indentString(r,Math.max(0,l-getIndentUnit(r)));for(;a<o.length&&a<c.length&&o.charCodeAt(a)==c.charCodeAt(a);)a++;s.push({from:n.from+a,to:n.from+o.length,insert:c.slice(a)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=r=>(r.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward,preventDefault:!0},{key:"Delete",run:deleteCharForward,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward,preventDefault:!0},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward,preventDefault:!0},{mac:"Mod-Delete",run:deleteLineBoundaryForward,preventDefault:!0}].concat(emacsStyleKeymap.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Mod-Alt-ArrowUp",run:addCursorAbove},{key:"Mod-Alt-ArrowDown",run:addCursorBelow},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess},basicNormalize=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class SearchCursor{constructor(e,n,s=0,o=e.length,l,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(s,o),this.bufferStart=s,this.normalize=l?c=>l(basicNormalize(c)):basicNormalize,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=fromCodePoint(e),s=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(e);let o=this.normalize(n);if(o.length)for(let l=0,a=s;;l++){let c=o.charCodeAt(l),u=this.match(c,a,this.bufferPos+this.bufferStart);if(l==o.length-1){if(u)return this.value=u,this;break}a==s&&l<n.length&&n.charCodeAt(l)==c&&a++}}}match(e,n,s){let o=null;for(let l=0;l<this.matches.length;l+=2){let a=this.matches[l],c=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?o={from:this.matches[l+1],to:s}:(this.matches[l]++,c=!0)),c||(this.matches.splice(l,2),l-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?o={from:n,to:s}:this.matches.push(1,n)),o&&this.test&&!this.test(o.from,o.to,this.buffer,this.bufferStart)&&(o=null),o}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(e,n,s,o=0,l=e.length){if(this.text=e,this.to=l,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new MultilineRegExpCursor(e,n,s,o,l);this.re=new RegExp(n,baseFlags+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.iter=e.iter();let a=e.lineAt(o);this.curLineStart=a.from,this.matchPos=toCharEnd(e,o),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let s=this.curLineStart+n.index,o=s+n[0].length;if(this.matchPos=toCharEnd(this.text,o+(s==o?1:0)),s==this.curLineStart+this.curLine.length&&this.nextLine(),(s<o||s>this.value.to)&&(!this.test||this.test(s,o,n)))return this.value={from:s,to:o,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,s){let o=flattened.get(e);if(!o||o.from>=s||o.to<=n){let c=new FlattenedDoc(n,e.sliceString(n,s));return flattened.set(e,c),c}if(o.from==n&&o.to==s)return o;let{text:l,from:a}=o;return a>n&&(l=e.sliceString(n,a)+l,a=n),o.to<s&&(l+=e.sliceString(o.to,s)),flattened.set(e,new FlattenedDoc(a,l)),new FlattenedDoc(n,l.slice(n-a,s-a))}}class MultilineRegExpCursor{constructor(e,n,s,o,l){this.text=e,this.to=l,this.done=!1,this.value=empty,this.matchPos=toCharEnd(e,o),this.re=new RegExp(n,baseFlags+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.flat=FlattenedDoc.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let s=this.flat.from+n.index,o=s+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(s,o,n)))return this.value={from:s,to:o,match:n},this.matchPos=toCharEnd(this.text,o+(s==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(r){try{return new RegExp(r,baseFlags),!0}catch{return!1}}function toCharEnd(r,e){if(e>=r.length)return e;let n=r.lineAt(e),s;for(;e<n.to&&(s=n.text.charCodeAt(e-n.from))>=56320&&s<57344;)e++;return e}function createLineDialog(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),n=crelt("input",{class:"cm-textfield",name:"line",value:e}),s=crelt("form",{class:"cm-gotoLine",onkeydown:l=>{l.keyCode==27?(l.preventDefault(),r.dispatch({effects:dialogEffect.of(!1)}),r.focus()):l.keyCode==13&&(l.preventDefault(),o())},onsubmit:l=>{l.preventDefault(),o()}},crelt("label",r.state.phrase("Go to line"),": ",n)," ",crelt("button",{class:"cm-button",type:"submit"},r.state.phrase("go")),crelt("button",{name:"close",onclick:()=>{r.dispatch({effects:dialogEffect.of(!1)}),r.focus()},"aria-label":r.state.phrase("close"),type:"button"},[""]));function o(){let l=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!l)return;let{state:a}=r,c=a.doc.lineAt(a.selection.main.head),[,u,f,d,g]=l,m=d?+d.slice(1):0,v=f?+f:c.number;if(f&&g){let E=v/100;u&&(E=E*(u=="-"?-1:1)+c.number/a.doc.lines),v=Math.round(a.doc.lines*E)}else f&&u&&(v=v*(u=="-"?-1:1)+c.number);let k=a.doc.line(Math.max(1,Math.min(a.doc.lines,v))),A=EditorSelection.cursor(k.from+Math.max(0,Math.min(m,k.length)));r.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(A.from,{y:"center"})],selection:A}),r.focus()}return{dom:s}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(r,e){for(let n of e.effects)n.is(dialogEffect)&&(r=n.value);return r},provide:r=>showPanel.from(r,e=>e?createLineDialog:null)}),gotoLine=r=>{let e=getPanel(r,createLineDialog);if(!e){let n=[dialogEffect.of(!0)];r.state.field(dialogField,!1)==null&&n.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),r.dispatch({effects:n}),e=getPanel(r,createLineDialog)}return e&&e.dom.querySelector("input").select(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(r){return combineConfig(r,defaultHighlightOptions,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(r){return[defaultTheme,matchHighlighter]}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(r,e,n,s){return(n==0||r(e.sliceDoc(n-1,n))!=CharCategory.Word)&&(s==e.doc.length||r(e.sliceDoc(s,s+1))!=CharCategory.Word)}function insideWord(r,e,n,s){return r(e.sliceDoc(n,n+1))==CharCategory.Word&&r(e.sliceDoc(s-1,s))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(highlightConfig),{state:n}=r,s=n.selection;if(s.ranges.length>1)return Decoration.none;let o=s.main,l,a=null;if(o.empty){if(!e.highlightWordAroundCursor)return Decoration.none;let u=n.wordAt(o.head);if(!u)return Decoration.none;a=n.charCategorizer(o.head),l=n.sliceDoc(u.from,u.to)}else{let u=o.to-o.from;if(u<e.minSelectionLength||u>200)return Decoration.none;if(e.wholeWords){if(l=n.sliceDoc(o.from,o.to),a=n.charCategorizer(o.head),!(insideWordBoundaries(a,n,o.from,o.to)&&insideWord(a,n,o.from,o.to)))return Decoration.none}else if(l=n.sliceDoc(o.from,o.to),!l)return Decoration.none}let c=[];for(let u of r.visibleRanges){let f=new SearchCursor(n.doc,l,u.from,u.to);for(;!f.next().done;){let{from:d,to:g}=f.value;if((!a||insideWordBoundaries(a,n,d,g))&&(o.empty&&d<=o.from&&g>=o.to?c.push(mainMatchDeco.range(d,g)):(d>=o.to||g<=o.from)&&c.push(matchDeco.range(d,g)),c.length>e.maxMatches))return Decoration.none}}return Decoration.set(c)}},{decorations:r=>r.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:r,dispatch:e})=>{let{selection:n}=r,s=EditorSelection.create(n.ranges.map(o=>r.wordAt(o.head)||EditorSelection.cursor(o.head)),n.mainIndex);return s.eq(n)?!1:(e(r.update({selection:s})),!0)};function findNextOccurrence(r,e){let{main:n,ranges:s}=r.selection,o=r.wordAt(n.head),l=o&&o.from==n.from&&o.to==n.to;for(let a=!1,c=new SearchCursor(r.doc,e,s[s.length-1].to);;)if(c.next(),c.done){if(a)return null;c=new SearchCursor(r.doc,e,0,Math.max(0,s[s.length-1].from-1)),a=!0}else{if(a&&s.some(u=>u.from==c.value.from))continue;if(l){let u=r.wordAt(c.value.from);if(!u||u.from!=c.value.from||u.to!=c.value.to)continue}return c.value}}const selectNextOccurrence=({state:r,dispatch:e})=>{let{ranges:n}=r.selection;if(n.some(l=>l.from===l.to))return selectWord({state:r,dispatch:e});let s=r.sliceDoc(n[0].from,n[0].to);if(r.selection.ranges.some(l=>r.sliceDoc(l.from,l.to)!=s))return!1;let o=findNextOccurrence(r,s);return o?(e(r.update({selection:r.selection.addRange(EditorSelection.range(o.from,o.to),!1),effects:EditorView.scrollIntoView(o.to)})),!0):!1},searchConfigFacet=Facet.define({combine(r){return combineConfig(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new SearchPanel(e),scrollToMatch:e=>EditorView.scrollIntoView(e)})}});class SearchQuery{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,s)=>s=="n"?`
`:s=="r"?"\r":s=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(e,n=0,s){let o=e.doc?e:EditorState.create({doc:e});return s==null&&(s=o.doc.length),this.regexp?regexpCursor(this,o,n,s):stringCursor(this,o,n,s)}}class QueryType{constructor(e){this.spec=e}}function stringCursor(r,e,n,s){return new SearchCursor(e.doc,r.unquoted,n,s,r.caseSensitive?void 0:o=>o.toLowerCase(),r.wholeWord?stringWordTest(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function stringWordTest(r,e){return(n,s,o,l)=>((l>n||l+o.length<s)&&(l=Math.max(0,n-2),o=r.sliceString(l,Math.min(r.length,s+2))),(e(charBefore(o,n-l))!=CharCategory.Word||e(charAfter(o,n-l))!=CharCategory.Word)&&(e(charAfter(o,s-l))!=CharCategory.Word||e(charBefore(o,s-l))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(e){super(e)}nextMatch(e,n,s){let o=stringCursor(this.spec,e,s,e.doc.length).nextOverlapping();if(o.done){let l=Math.min(e.doc.length,n+this.spec.unquoted.length);o=stringCursor(this.spec,e,0,l).nextOverlapping()}return o.done||o.value.from==n&&o.value.to==s?null:o.value}prevMatchInRange(e,n,s){for(let o=s;;){let l=Math.max(n,o-1e4-this.spec.unquoted.length),a=stringCursor(this.spec,e,l,o),c=null;for(;!a.nextOverlapping().done;)c=a.value;if(c)return c;if(l==n)return null;o-=1e4}}prevMatch(e,n,s){let o=this.prevMatchInRange(e,0,n);return o||(o=this.prevMatchInRange(e,Math.max(0,s-this.spec.unquoted.length),e.doc.length)),o&&(o.from!=n||o.to!=s)?o:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let s=stringCursor(this.spec,e,0,e.doc.length),o=[];for(;!s.next().done;){if(o.length>=n)return null;o.push(s.value)}return o}highlight(e,n,s,o){let l=stringCursor(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(s+this.spec.unquoted.length,e.doc.length));for(;!l.next().done;)o(l.value.from,l.value.to)}}function regexpCursor(r,e,n,s){return new RegExpCursor(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?regexpWordTest(e.charCategorizer(e.selection.main.head)):void 0},n,s)}function charBefore(r,e){return r.slice(findClusterBreak(r,e,!1),e)}function charAfter(r,e){return r.slice(e,findClusterBreak(r,e))}function regexpWordTest(r){return(e,n,s)=>!s[0].length||(r(charBefore(s.input,s.index))!=CharCategory.Word||r(charAfter(s.input,s.index))!=CharCategory.Word)&&(r(charAfter(s.input,s.index+s[0].length))!=CharCategory.Word||r(charBefore(s.input,s.index+s[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(e,n,s){let o=regexpCursor(this.spec,e,s,e.doc.length).next();return o.done&&(o=regexpCursor(this.spec,e,0,n).next()),o.done?null:o.value}prevMatchInRange(e,n,s){for(let o=1;;o++){let l=Math.max(n,s-o*1e4),a=regexpCursor(this.spec,e,l,s),c=null;for(;!a.next().done;)c=a.value;if(c&&(l==n||c.from>l+10))return c;if(l==n)return null}}prevMatch(e,n,s){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,s,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,s)=>{if(s=="&")return e.match[0];if(s=="$")return"$";for(let o=s.length;o>0;o--){let l=+s.slice(0,o);if(l>0&&l<e.match.length)return e.match[l]+s.slice(o)}return n})}matchAll(e,n){let s=regexpCursor(this.spec,e,0,e.doc.length),o=[];for(;!s.next().done;){if(o.length>=n)return null;o.push(s.value)}return o}highlight(e,n,s,o){let l=regexpCursor(this.spec,e,Math.max(0,n-250),Math.min(s+250,e.doc.length));for(;!l.next().done;)o(l.value.from,l.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(r){return new SearchState(defaultQuery(r).create(),null)},update(r,e){for(let n of e.effects)n.is(setSearchQuery)?r=new SearchState(n.value.create(),r.panel):n.is(togglePanel$1)&&(r=new SearchState(r.query,n.value?createSearchPanel:null));return r},provide:r=>showPanel.from(r,e=>e.panel)});class SearchState{constructor(e,n){this.query=e,this.panel=n}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(searchState))}update(r){let e=r.state.field(searchState);(e!=r.startState.field(searchState)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return Decoration.none;let{view:n}=this,s=new RangeSetBuilder;for(let o=0,l=n.visibleRanges,a=l.length;o<a;o++){let{from:c,to:u}=l[o];for(;o<a-1&&u>l[o+1].from-2*250;)u=l[++o].to;r.highlight(n.state,c,u,(f,d)=>{let g=n.state.selection.ranges.some(m=>m.from==f&&m.to==d);s.add(f,d,g?selectedMatchMark:matchMark)})}return s.finish()}},{decorations:r=>r.decorations});function searchCommand(r){return e=>{let n=e.state.field(searchState,!1);return n&&n.query.spec.valid?r(e,n):openSearchPanel(e)}}const findNext=searchCommand((r,{query:e})=>{let{to:n}=r.state.selection.main,s=e.nextMatch(r.state,n,n);if(!s)return!1;let o=EditorSelection.single(s.from,s.to),l=r.state.facet(searchConfigFacet);return r.dispatch({selection:o,effects:[announceMatch(r,s),l.scrollToMatch(o.main,r)],userEvent:"select.search"}),selectSearchInput(r),!0}),findPrevious=searchCommand((r,{query:e})=>{let{state:n}=r,{from:s}=n.selection.main,o=e.prevMatch(n,s,s);if(!o)return!1;let l=EditorSelection.single(o.from,o.to),a=r.state.facet(searchConfigFacet);return r.dispatch({selection:l,effects:[announceMatch(r,o),a.scrollToMatch(l.main,r)],userEvent:"select.search"}),selectSearchInput(r),!0}),selectMatches=searchCommand((r,{query:e})=>{let n=e.matchAll(r.state,1e3);return!n||!n.length?!1:(r.dispatch({selection:EditorSelection.create(n.map(s=>EditorSelection.range(s.from,s.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:r,dispatch:e})=>{let n=r.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:s,to:o}=n.main,l=[],a=0;for(let c=new SearchCursor(r.doc,r.sliceDoc(s,o));!c.next().done;){if(l.length>1e3)return!1;c.value.from==s&&(a=l.length),l.push(EditorSelection.range(c.value.from,c.value.to))}return e(r.update({selection:EditorSelection.create(l,a),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((r,{query:e})=>{let{state:n}=r,{from:s,to:o}=n.selection.main;if(n.readOnly)return!1;let l=e.nextMatch(n,s,s);if(!l)return!1;let a=l,c=[],u,f,d=[];a.from==s&&a.to==o&&(f=n.toText(e.getReplacement(a)),c.push({from:a.from,to:a.to,insert:f}),a=e.nextMatch(n,a.from,a.to),d.push(EditorView.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(s).number)+".")));let g=r.state.changes(c);return a&&(u=EditorSelection.single(a.from,a.to).map(g),d.push(announceMatch(r,a)),d.push(n.facet(searchConfigFacet).scrollToMatch(u.main,r))),r.dispatch({changes:g,selection:u,effects:d,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((r,{query:e})=>{if(r.state.readOnly)return!1;let n=e.matchAll(r.state,1e9).map(o=>{let{from:l,to:a}=o;return{from:l,to:a,insert:e.getReplacement(o)}});if(!n.length)return!1;let s=r.state.phrase("replaced $ matches",n.length)+".";return r.dispatch({changes:n,effects:EditorView.announce.of(s),userEvent:"input.replace.all"}),!0});function createSearchPanel(r){return r.state.facet(searchConfigFacet).createPanel(r)}function defaultQuery(r,e){var n,s,o,l,a;let c=r.selection.main,u=c.empty||c.to>c.from+100?"":r.sliceDoc(c.from,c.to);if(e&&!u)return e;let f=r.facet(searchConfigFacet);return new SearchQuery({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:f.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(s=e==null?void 0:e.caseSensitive)!==null&&s!==void 0?s:f.caseSensitive,literal:(o=e==null?void 0:e.literal)!==null&&o!==void 0?o:f.literal,regexp:(l=e==null?void 0:e.regexp)!==null&&l!==void 0?l:f.regexp,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:f.wholeWord})}function getSearchInput(r){let e=getPanel(r,createSearchPanel);return e&&e.dom.querySelector("[main-field]")}function selectSearchInput(r){let e=getSearchInput(r);e&&e==r.root.activeElement&&e.select()}const openSearchPanel=r=>{let e=r.state.field(searchState,!1);if(e&&e.panel){let n=getSearchInput(r);if(n&&n!=r.root.activeElement){let s=defaultQuery(r.state,e.query.spec);s.valid&&r.dispatch({effects:setSearchQuery.of(s)}),n.focus(),n.select()}}else r.dispatch({effects:[togglePanel$1.of(!0),e?setSearchQuery.of(defaultQuery(r.state,e.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=r=>{let e=r.state.field(searchState,!1);if(!e||!e.panel)return!1;let n=getPanel(r,createSearchPanel);return n&&n.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(e){this.view=e;let n=this.query=e.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:n.search,placeholder:phrase(e,"Find"),"aria-label":phrase(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:n.replace,placeholder:phrase(e,"Replace"),"aria-label":phrase(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function s(o,l,a){return crelt("button",{class:"cm-button",name:o,onclick:l,type:"button"},a)}this.dom=crelt("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,s("next",()=>findNext(e),[phrase(e,"next")]),s("prev",()=>findPrevious(e),[phrase(e,"previous")]),s("select",()=>selectMatches(e),[phrase(e,"all")]),crelt("label",null,[this.caseField,phrase(e,"match case")]),crelt("label",null,[this.reField,phrase(e,"regexp")]),crelt("label",null,[this.wordField,phrase(e,"by word")]),...e.state.readOnly?[]:[crelt("br"),this.replaceField,s("replace",()=>replaceNext(e),[phrase(e,"replace")]),s("replaceAll",()=>replaceAll(e),[phrase(e,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(e),"aria-label":phrase(e,"close"),type:"button"},[""])])}commit(){let e=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:setSearchQuery.of(e)}))}keydown(e){runScopeHandlers(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),replaceNext(this.view))}update(e){for(let n of e.transactions)for(let s of n.effects)s.is(setSearchQuery)&&!s.value.eq(this.query)&&this.setQuery(s.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(r,e){return r.state.phrase(e)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(r,{from:e,to:n}){let s=r.state.doc.lineAt(e),o=r.state.doc.lineAt(n).to,l=Math.max(s.from,e-AnnounceMargin),a=Math.min(o,n+AnnounceMargin),c=r.state.sliceDoc(l,a);if(l!=s.from){for(let u=0;u<AnnounceMargin;u++)if(!Break.test(c[u+1])&&Break.test(c[u])){c=c.slice(u);break}}if(a!=o){for(let u=c.length-1;u>c.length-AnnounceMargin;u--)if(!Break.test(c[u-1])&&Break.test(c[u])){c=c.slice(0,u);break}}return EditorView.announce.of(`${r.state.phrase("current match")}. ${c} ${r.state.phrase("on line")} ${s.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class CompletionContext{constructor(e,n,s,o){this.state=e,this.pos=n,this.explicit=s,this.view=o,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=syntaxTree(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),s=Math.max(n.from,this.pos-250),o=n.text.slice(s-n.from,this.pos-n.from),l=o.search(ensureAnchor(e,!1));return l<0?null:{from:s+l,to:this.pos,text:o.slice(l)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,s){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),s&&s.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(r){let e=Object.keys(r).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(r){let e=Object.create(null),n=Object.create(null);for(let{label:o}of r){e[o[0]]=!0;for(let l=1;l<o.length;l++)n[o[l]]=!0}let s=toSet(e)+toSet(n)+"*$";return[new RegExp("^"+s),new RegExp(s)]}function completeFromList(r){let e=r.map(o=>typeof o=="string"?{label:o}:o),[n,s]=e.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return o=>{let l=o.matchBefore(s);return l||o.explicit?{from:l?l.from:o.pos,options:e,validFor:n}:null}}class Option{constructor(e,n,s,o){this.completion=e,this.source=n,this.match=s,this.score=o}}function cur(r){return r.selection.main.from}function ensureAnchor(r,e){var n;let{source:s}=r,o=e&&s[0]!="^",l=s[s.length-1]!="$";return!o&&!l?r:new RegExp(`${o?"^":""}(?:${s})${l?"$":""}`,(n=r.flags)!==null&&n!==void 0?n:r.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(r,e,n,s){let{main:o}=r.selection,l=n-o.from,a=s-o.from;return{...r.changeByRange(c=>{if(c!=o&&n!=s&&r.sliceDoc(c.from+l,c.from+a)!=r.sliceDoc(n,s))return{range:c};let u=r.toText(e);return{changes:{from:c.from+l,to:s==o.from?c.to:c.from+a,insert:u},range:EditorSelection.cursor(c.from+l+u.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const SourceCache=new WeakMap;function asSource(r){if(!Array.isArray(r))return r;let e=SourceCache.get(r);return e||SourceCache.set(r,e=completeFromList(r)),e}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let s=codePointAt(e,n),o=codePointSize(s);this.chars.push(s);let l=e.slice(n,n+o),a=l.toUpperCase();this.folded.push(codePointAt(a==l?l.toLowerCase():a,0)),n+=o}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:s,any:o,precise:l,byWord:a}=this;if(n.length==1){let V=codePointAt(e,0),q=codePointSize(V),W=q==e.length?0:-100;if(V!=n[0])if(V==s[0])W+=-200;else return null;return this.ret(W,[0,q])}let c=e.indexOf(this.pattern);if(c==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let u=n.length,f=0;if(c<0){for(let V=0,q=Math.min(e.length,200);V<q&&f<u;){let W=codePointAt(e,V);(W==n[f]||W==s[f])&&(o[f++]=V),V+=codePointSize(W)}if(f<u)return null}let d=0,g=0,m=!1,v=0,k=-1,A=-1,E=/[a-z]/.test(e),N=!0;for(let V=0,q=Math.min(e.length,200),W=0;V<q&&g<u;){let H=codePointAt(e,V);c<0&&(d<u&&H==n[d]&&(l[d++]=V),v<u&&(H==n[v]||H==s[v]?(v==0&&(k=V),A=V+1,v++):v=0));let $,L=H<255?H>=48&&H<=57||H>=97&&H<=122?2:H>=65&&H<=90?1:0:($=fromCodePoint(H))!=$.toLowerCase()?1:$!=$.toUpperCase()?2:0;(!V||L==1&&E||W==0&&L!=0)&&(n[g]==H||s[g]==H&&(m=!0)?a[g++]=V:a.length&&(N=!1)),W=L,V+=codePointSize(H)}return g==u&&a[0]==0&&N?this.result(-100+(m?-200:0),a,e):v==u&&k==0?this.ret(-200-e.length+(A==e.length?0:-100),[0,A]):c>-1?this.ret(-700-e.length,[c,c+this.pattern.length]):v==u?this.ret(-900-e.length,[k,A]):g==u?this.result(-100+(m?-200:0)+-700+(N?0:-1100),a,e):n.length==2?null:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,n,s){let o=[],l=0;for(let a of n){let c=a+(this.astral?codePointSize(codePointAt(s,a)):1);l&&o[l-1]==a?o[l-1]=c:(o[l++]=a,o[l++]=c)}return this.ret(e-s.length,o)}}class StrictMatcher{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),s=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return s==null?null:(this.matched=[0,n.length],this.score=s+(e.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(r){return combineConfig(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>s=>joinClass(e(s),n(s)),optionClass:(e,n)=>s=>joinClass(e(s),n(s)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function joinClass(r,e){return r?e?r+" "+e:r:e}function defaultPositionInfo(r,e,n,s,o,l){let a=r.textDirection==Direction.RTL,c=a,u=!1,f="top",d,g,m=e.left-o.left,v=o.right-e.right,k=s.right-s.left,A=s.bottom-s.top;if(c&&m<Math.min(k,v)?c=!1:!c&&v<Math.min(k,m)&&(c=!0),k<=(c?m:v))d=Math.max(o.top,Math.min(n.top,o.bottom-A))-e.top,g=Math.min(400,c?m:v);else{u=!0,g=Math.min(400,(a?e.right:o.right-e.left)-30);let V=o.bottom-e.bottom;V>=A||V>e.top?d=n.bottom-e.top:(f="bottom",d=e.bottom-n.top)}let E=(e.bottom-e.top)/l.offsetHeight,N=(e.right-e.left)/l.offsetWidth;return{style:`${f}: ${d/E}px; max-width: ${g/N}px`,class:"cm-completionInfo-"+(u?a?"left-narrow":"right-narrow":c?"left":"right")}}function optionContent(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(n){let s=document.createElement("div");return s.classList.add("cm-completionIcon"),n.type&&s.classList.add(...n.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),s.setAttribute("aria-hidden","true"),s},position:20}),e.push({render(n,s,o,l){let a=document.createElement("span");a.className="cm-completionLabel";let c=n.displayLabel||n.label,u=0;for(let f=0;f<l.length;){let d=l[f++],g=l[f++];d>u&&a.appendChild(document.createTextNode(c.slice(u,d)));let m=a.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(c.slice(d,g))),m.className="cm-completionMatchedText",u=g}return u<c.length&&a.appendChild(document.createTextNode(c.slice(u))),a},position:50},{render(n){if(!n.detail)return null;let s=document.createElement("span");return s.className="cm-completionDetail",s.textContent=n.detail,s},position:80}),e.sort((n,s)=>n.position-s.position).map(n=>n.render)}function rangeAroundSelected(r,e,n){if(r<=n)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let o=Math.floor(e/n);return{from:o*n,to:(o+1)*n}}let s=Math.floor((r-e)/n);return{from:r-(s+1)*n,to:r-s*n}}class CompletionTooltip{constructor(e,n,s){this.view=e,this.stateField=n,this.applyCompletion=s,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:u=>this.placeInfo(u),key:this},this.space=null,this.currentClass="";let o=e.state.field(n),{options:l,selected:a}=o.open,c=e.state.facet(completionConfig);this.optionContent=optionContent(c),this.optionClass=c.optionClass,this.tooltipClass=c.tooltipClass,this.range=rangeAroundSelected(l.length,a,c.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",u=>{let{options:f}=e.state.field(n).open;for(let d=u.target,g;d&&d!=this.dom;d=d.parentNode)if(d.nodeName=="LI"&&(g=/-(\d+)$/.exec(d.id))&&+g[1]<f.length){this.applyCompletion(e,f[+g[1]]),u.preventDefault();return}}),this.dom.addEventListener("focusout",u=>{let f=e.state.field(this.stateField,!1);f&&f.tooltip&&e.state.facet(completionConfig).closeOnBlur&&u.relatedTarget!=e.contentDOM&&e.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(l,o.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),s!=o){let{options:l,selected:a,disabled:c}=s.open;(!o.open||o.open.options!=l)&&(this.range=rangeAroundSelected(l.length,a,e.state.facet(completionConfig).maxRenderedOptions),this.showOptions(l,s.id)),this.updateSel(),c!=((n=o.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!c)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let s of this.currentClass.split(" "))s&&this.dom.classList.remove(s);for(let s of n.split(" "))s&&this.dom.classList.add(s);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=rangeAroundSelected(n.options.length,n.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(n.options,e.id));let s=this.updateSelectedOption(n.selected);if(s){this.destroyInfo();let{completion:o}=n.options[n.selected],{info:l}=o;if(!l)return;let a=typeof l=="string"?document.createTextNode(l):l(o);if(!a)return;"then"in a?a.then(c=>{c&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(c,o)}).catch(c=>logException(this.view.state,c,"completion info")):(this.addInfoPane(a,o),s.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let s=this.info=document.createElement("div");if(s.className="cm-tooltip cm-completionInfo",s.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)s.appendChild(e),this.infoDestroy=null;else{let{dom:o,destroy:l}=e;s.appendChild(o),this.infoDestroy=l||null}this.dom.appendChild(s),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let s=this.list.firstChild,o=this.range.from;s;s=s.nextSibling,o++)s.nodeName!="LI"||!s.id?o--:o==e?s.hasAttribute("aria-selected")||(s.setAttribute("aria-selected","true"),n=s):s.hasAttribute("aria-selected")&&(s.removeAttribute("aria-selected"),s.removeAttribute("aria-describedby"));return n&&scrollIntoView(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),s=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),l=this.space;if(!l){let a=this.dom.ownerDocument.documentElement;l={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return o.top>Math.min(l.bottom,n.bottom)-10||o.bottom<Math.max(l.top,n.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,n,o,s,l,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,s){const o=document.createElement("ul");o.id=n,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions")),o.addEventListener("mousedown",a=>{a.target==o&&a.preventDefault()});let l=null;for(let a=s.from;a<s.to;a++){let{completion:c,match:u}=e[a],{section:f}=c;if(f){let m=typeof f=="string"?f:f.name;if(m!=l&&(a>s.from||s.from==0))if(l=m,typeof f!="string"&&f.header)o.appendChild(f.header(f));else{let v=o.appendChild(document.createElement("completion-section"));v.textContent=m}}const d=o.appendChild(document.createElement("li"));d.id=n+"-"+a,d.setAttribute("role","option");let g=this.optionClass(c);g&&(d.className=g);for(let m of this.optionContent){let v=m(c,this.view.state,this.view,u);v&&d.appendChild(v)}}return s.from&&o.classList.add("cm-completionListIncompleteTop"),s.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(r,e){return n=>new CompletionTooltip(n,r,e)}function scrollIntoView(r,e){let n=r.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.height/r.offsetHeight;s.top<n.top?r.scrollTop-=(n.top-s.top)/o:s.bottom>n.bottom&&(r.scrollTop+=(s.bottom-n.bottom)/o)}function score(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function sortOptions(r,e){let n=[],s=null,o=null,l=d=>{n.push(d);let{section:g}=d.completion;if(g){s||(s=[]);let m=typeof g=="string"?g:g.name;s.some(v=>v.name==m)||s.push(typeof g=="string"?{name:m}:g)}},a=e.facet(completionConfig);for(let d of r)if(d.hasResult()){let g=d.result.getMatch;if(d.result.filter===!1)for(let m of d.result.options)l(new Option(m,d.source,g?g(m):[],1e9-n.length));else{let m=e.sliceDoc(d.from,d.to),v,k=a.filterStrict?new StrictMatcher(m):new FuzzyMatcher(m);for(let A of d.result.options)if(v=k.match(A.label)){let E=A.displayLabel?g?g(A,v.matched):[]:v.matched,N=v.score+(A.boost||0);if(l(new Option(A,d.source,E,N)),typeof A.section=="object"&&A.section.rank==="dynamic"){let{name:V}=A.section;o||(o=Object.create(null)),o[V]=Math.max(N,o[V]||-1e9)}}}}if(s){let d=Object.create(null),g=0,m=(v,k)=>(v.rank==="dynamic"&&k.rank==="dynamic"?o[k.name]-o[v.name]:0)||(typeof v.rank=="number"?v.rank:1e9)-(typeof k.rank=="number"?k.rank:1e9)||(v.name<k.name?-1:1);for(let v of s.sort(m))g-=1e5,d[v.name]=g;for(let v of n){let{section:k}=v.completion;k&&(v.score+=d[typeof k=="string"?k:k.name])}}let c=[],u=null,f=a.compareCompletions;for(let d of n.sort((g,m)=>m.score-g.score||f(g.completion,m.completion))){let g=d.completion;!u||u.label!=g.label||u.detail!=g.detail||u.type!=null&&g.type!=null&&u.type!=g.type||u.apply!=g.apply||u.boost!=g.boost?c.push(d):score(d.completion)>score(u)&&(c[c.length-1]=d),u=d.completion}return c}class CompletionDialog{constructor(e,n,s,o,l,a){this.options=e,this.attrs=n,this.tooltip=s,this.timestamp=o,this.selected=l,this.disabled=a}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,s,o,l,a){if(o&&!a&&e.some(f=>f.isPending))return o.setDisabled();let c=sortOptions(e,n);if(!c.length)return o&&e.some(f=>f.isPending)?o.setDisabled():null;let u=n.facet(completionConfig).selectOnOpen?0:-1;if(o&&o.selected!=u&&o.selected!=-1){let f=o.options[o.selected].completion;for(let d=0;d<c.length;d++)if(c[d].completion==f){u=d;break}}return new CompletionDialog(c,makeAttrs(s,u),{pos:e.reduce((f,d)=>d.hasResult()?Math.min(f,d.from):f,1e8),create:createTooltip,above:l.aboveCursor},o?o.timestamp:Date.now(),u,!1)}map(e){return new CompletionDialog(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(e,n,s){this.active=e,this.id=n,this.open=s}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,s=n.facet(completionConfig),l=(s.override||n.languageDataAt("autocomplete",cur(n)).map(asSource)).map(u=>(this.active.find(d=>d.source==u)||new ActiveSource(u,this.active.some(d=>d.state!=0)?1:0)).update(e,s));l.length==this.active.length&&l.every((u,f)=>u==this.active[f])&&(l=this.active);let a=this.open,c=e.effects.some(u=>u.is(setActiveEffect));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||l.some(u=>u.hasResult()&&e.changes.touchesRange(u.from,u.to))||!sameResults(l,this.active)||c?a=CompletionDialog.build(l,n,this.id,a,s,c):a&&a.disabled&&!l.some(u=>u.isPending)&&(a=null),!a&&l.every(u=>!u.isPending)&&l.some(u=>u.hasResult())&&(l=l.map(u=>u.hasResult()?new ActiveSource(u.source,0):u));for(let u of e.effects)u.is(setSelectedEffect)&&(a=a&&a.setSelected(u.value,this.id));return l==this.active&&a==this.open?this:new CompletionState(l,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(r,e){if(r==e)return!0;for(let n=0,s=0;;){for(;n<r.length&&!r[n].hasResult();)n++;for(;s<e.length&&!e[s].hasResult();)s++;let o=n==r.length,l=s==e.length;if(o||l)return o==l;if(r[n++].result!=e[s++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(r,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(n["aria-activedescendant"]=r+"-"+e),n}const none=[];function getUpdateType(r,e){if(r.isUserEvent("input.complete")){let s=r.annotation(pickedCompletion);if(s&&e.activateOnCompletion(s))return 12}let n=r.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:r.isUserEvent("delete.backward")?2:r.selection?8:r.docChanged?16:0}class ActiveSource{constructor(e,n,s=!1){this.source=e,this.state=n,this.explicit=s}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let s=getUpdateType(e,n),o=this;(s&8||s&16&&this.touches(e))&&(o=new ActiveSource(o.source,0)),s&4&&o.state==0&&(o=new ActiveSource(this.source,1)),o=o.updateFor(e,s);for(let l of e.effects)if(l.is(startCompletionEffect))o=new ActiveSource(o.source,1,l.value);else if(l.is(closeCompletionEffect))o=new ActiveSource(o.source,0);else if(l.is(setActiveEffect))for(let a of l.value)a.source==o.source&&(o=a);return o}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(cur(e.state))}}class ActiveResult extends ActiveSource{constructor(e,n,s,o,l,a){super(e,3,n),this.limit=s,this.result=o,this.from=l,this.to=a}hasResult(){return!0}updateFor(e,n){var s;if(!(n&3))return this.map(e.changes);let o=this.result;o.map&&!e.changes.empty&&(o=o.map(o,e.changes));let l=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),c=cur(e.state);if(c>a||!o||n&2&&(cur(e.startState)==this.from||c<this.limit))return new ActiveSource(this.source,n&4?1:0);let u=e.changes.mapPos(this.limit);return checkValid(o.validFor,e.state,l,a)?new ActiveResult(this.source,this.explicit,u,o,l,a):o.update&&(o=o.update(o,l,a,new CompletionContext(e.state,c,!1)))?new ActiveResult(this.source,this.explicit,u,o,o.from,(s=o.to)!==null&&s!==void 0?s:cur(e.state)):new ActiveSource(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new ActiveResult(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function checkValid(r,e,n,s){if(!r)return!1;let o=e.sliceDoc(n,s);return typeof r=="function"?r(o,n,s,e):ensureAnchor(r,!0).test(o)}const setActiveEffect=StateEffect.define({map(r,e){return r.map(n=>n.map(e))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(r,e){return r.update(e)},provide:r=>[showTooltip.from(r,e=>e.tooltip),EditorView.contentAttributes.from(r,e=>e.attrs)]});function applyCompletion(r,e){const n=e.completion.apply||e.completion.label;let s=r.state.field(completionState).active.find(o=>o.source==e.source);return s instanceof ActiveResult?(typeof n=="string"?r.dispatch({...insertCompletionText(r.state,n,s.from,s.to),annotations:pickedCompletion.of(e.completion)}):n(r,e.completion,s.from,s.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(r,e="option"){return n=>{let s=n.state.field(completionState,!1);if(!s||!s.open||s.open.disabled||Date.now()-s.open.timestamp<n.state.facet(completionConfig).interactionDelay)return!1;let o=1,l;e=="page"&&(l=getTooltip(n,s.open.tooltip))&&(o=Math.max(2,Math.floor(l.dom.offsetHeight/l.dom.querySelector("li").offsetHeight)-1));let{length:a}=s.open.options,c=s.open.selected>-1?s.open.selected+o*(r?1:-1):r?0:a-1;return c<0?c=e=="page"?0:a-1:c>=a&&(c=e=="page"?a-1:0),n.dispatch({effects:setSelectedEffect.of(c)}),!0}}const acceptCompletion=r=>{let e=r.state.field(completionState,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(completionConfig).interactionDelay?!1:applyCompletion(r,e.open.options[e.open.selected])},startCompletion=r=>r.state.field(completionState,!1)?(r.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=r=>{let e=r.state.field(completionState,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(r.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of r.state.field(completionState).active)e.isPending&&this.startQuery(e)}update(r){let e=r.state.field(completionState),n=r.state.facet(completionConfig);if(!r.selectionSet&&!r.docChanged&&r.startState.field(completionState)==e)return;let s=r.transactions.some(l=>{let a=getUpdateType(l,n);return a&8||(l.selection||l.docChanged)&&!(a&3)});for(let l=0;l<this.running.length;l++){let a=this.running[l];if(s||a.context.abortOnDocChange&&r.docChanged||a.updates.length+r.transactions.length>MaxUpdateCount&&Date.now()-a.time>MinAbortTime){for(let c of a.context.abortListeners)try{c()}catch(u){logException(this.view.state,u)}a.context.abortListeners=null,this.running.splice(l--,1)}else a.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(l=>l.effects.some(a=>a.is(startCompletionEffect)))&&(this.pendingStart=!0);let o=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(l=>l.isPending&&!this.running.some(a=>a.active.source==l.source))?setTimeout(()=>this.startUpdate(),o):-1,this.composing!=0)for(let l of r.transactions)l.isUserEvent("input.type")?this.composing=2:this.composing==2&&l.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,e=r.field(completionState);for(let n of e.active)n.isPending&&!this.running.some(s=>s.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(r){let{state:e}=this.view,n=cur(e),s=new CompletionContext(e,n,r.explicit,this.view),o=new RunningQuery(r,s);this.running.push(o),Promise.resolve(r.source(s)).then(l=>{o.context.aborted||(o.done=l||null,this.scheduleAccept())},l=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,l)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(completionConfig),s=this.view.state.field(completionState);for(let o=0;o<this.running.length;o++){let l=this.running[o];if(l.done===void 0)continue;if(this.running.splice(o--,1),l.done){let c=cur(l.updates.length?l.updates[0].startState:this.view.state),u=Math.min(c,l.done.from+(l.active.explicit?0:1)),f=new ActiveResult(l.active.source,l.active.explicit,u,l.done,l.done.from,(r=l.done.to)!==null&&r!==void 0?r:c);for(let d of l.updates)f=f.update(d,n);if(f.hasResult()){e.push(f);continue}}let a=s.active.find(c=>c.source==l.active.source);if(a&&a.isPending)if(l.done==null){let c=new ActiveSource(l.active.source,0);for(let u of l.updates)c=c.update(u,n);c.isPending||e.push(c)}else this.startQuery(a)}(e.length||s.open&&s.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field(completionState,!1);if(e&&e.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let n=e.open&&getTooltip(this.view,e.open.tooltip);(!n||!n.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(r,e){let n=e.state.field(completionState,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||r.key.length>1||r.ctrlKey&&!(windows&&r.altKey)||r.metaKey)return!1;let s=n.open.options[n.open.selected],o=n.active.find(a=>a.source==s.source),l=s.completion.commitCharacters||o.result.commitCharacters;return l&&l.indexOf(r.key)>-1&&applyCompletion(e,s),!1}})),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(r,e){let n=e.mapPos(r,-1,MapMode.TrackAfter);return n??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(r,e){if(r=r.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);r=r.update({filter:s=>s>=n.from&&s<=n.to})}for(let n of e.effects)n.is(closeBracketEffect)&&(r=r.update({add:[closedBracket.range(n.value,n.value+1)]}));return r}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(r){for(let e=0;e<definedClosing.length;e+=2)if(definedClosing.charCodeAt(e)==r)return definedClosing.charAt(e+1);return fromCodePoint(r<128?r:r+1)}function config(r,e){return r.languageDataAt("closeBrackets",e)[0]||defaults}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((r,e,n,s)=>{if((android?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let o=r.state.selection.main;if(s.length>2||s.length==2&&codePointSize(codePointAt(s,0))==1||e!=o.from||n!=o.to)return!1;let l=insertBracket(r.state,s);return l?(r.dispatch(l),!0):!1}),deleteBracketPair=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let s=config(r,r.selection.main.head).brackets||defaults.brackets,o=null,l=r.changeByRange(a=>{if(a.empty){let c=prevChar(r.doc,a.head);for(let u of s)if(u==c&&nextChar(r.doc,a.head)==closing(codePointAt(u,0)))return{changes:{from:a.head-u.length,to:a.head+u.length},range:EditorSelection.cursor(a.head-u.length)}}return{range:o=a}});return o||e(r.update(l,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(r,e){let n=config(r,r.selection.main.head),s=n.brackets||defaults.brackets;for(let o of s){let l=closing(codePointAt(o,0));if(e==o)return l==o?handleSame(r,o,s.indexOf(o+o+o)>-1,n):handleOpen(r,o,l,n.before||defaults.before);if(e==l&&closedBracketAt(r,r.selection.main.from))return handleClose(r,o,l)}return null}function closedBracketAt(r,e){let n=!1;return r.field(bracketState).between(0,r.doc.length,s=>{s==e&&(n=!0)}),n}function nextChar(r,e){let n=r.sliceString(e,e+2);return n.slice(0,codePointSize(codePointAt(n,0)))}function prevChar(r,e){let n=r.sliceString(e-2,e);return codePointSize(codePointAt(n,0))==n.length?n:n.slice(1)}function handleOpen(r,e,n,s){let o=null,l=r.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:n,from:a.to}],effects:closeBracketEffect.of(a.to+e.length),range:EditorSelection.range(a.anchor+e.length,a.head+e.length)};let c=nextChar(r.doc,a.head);return!c||/\s/.test(c)||s.indexOf(c)>-1?{changes:{insert:e+n,from:a.head},effects:closeBracketEffect.of(a.head+e.length),range:EditorSelection.cursor(a.head+e.length)}:{range:o=a}});return o?null:r.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(r,e,n){let s=null,o=r.changeByRange(l=>l.empty&&nextChar(r.doc,l.head)==n?{changes:{from:l.head,to:l.head+n.length,insert:n},range:EditorSelection.cursor(l.head+n.length)}:s={range:l});return s?null:r.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(r,e,n,s){let o=s.stringPrefixes||defaults.stringPrefixes,l=null,a=r.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:e,from:c.to}],effects:closeBracketEffect.of(c.to+e.length),range:EditorSelection.range(c.anchor+e.length,c.head+e.length)};let u=c.head,f=nextChar(r.doc,u),d;if(f==e){if(nodeStart(r,u))return{changes:{insert:e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)};if(closedBracketAt(r,u)){let m=n&&r.sliceDoc(u,u+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:u,to:u+m.length,insert:m},range:EditorSelection.cursor(u+m.length)}}}else{if(n&&r.sliceDoc(u-2*e.length,u)==e+e&&(d=canStartStringAt(r,u-2*e.length,o))>-1&&nodeStart(r,d))return{changes:{insert:e+e+e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)};if(r.charCategorizer(u)(f)!=CharCategory.Word&&canStartStringAt(r,u,o)>-1&&!probablyInString(r,u,e,o))return{changes:{insert:e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)}}return{range:l=c}});return l?null:r.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(r,e){let n=syntaxTree(r).resolveInner(e+1);return n.parent&&n.from==e}function probablyInString(r,e,n,s){let o=syntaxTree(r).resolveInner(e,-1),l=s.reduce((a,c)=>Math.max(a,c.length),0);for(let a=0;a<5;a++){let c=r.sliceDoc(o.from,Math.min(o.to,o.from+n.length+l)),u=c.indexOf(n);if(!u||u>-1&&s.indexOf(c.slice(0,u))>-1){let d=o.firstChild;for(;d&&d.from==o.from&&d.to-d.from>n.length+u;){if(r.sliceDoc(d.to-n.length,d.to)==n)return!1;d=d.firstChild}return!0}let f=o.to==e&&o.parent;if(!f)break;o=f}return!1}function canStartStringAt(r,e,n){let s=r.charCategorizer(e);if(s(r.sliceDoc(e-1,e))!=CharCategory.Word)return e;for(let o of n){let l=e-o.length;if(r.sliceDoc(l,e)==o&&s(r.sliceDoc(l-1,l))!=CharCategory.Word)return l}return-1}function autocompletion(r={}){return[commitCharacters,completionState,completionConfig.of(r),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{mac:"Alt-i",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],r=>r.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(e,n,s){this.from=e,this.to=n,this.diagnostic=s}}class LintState{constructor(e,n,s){this.diagnostics=e,this.panel=n,this.selected=s}static init(e,n,s){let o=s.facet(lintConfig).markerFilter;o&&(e=o(e,s));let l=e.slice().sort((v,k)=>v.from-k.from||v.to-k.to),a=new RangeSetBuilder,c=[],u=0,f=s.doc.iter(),d=0,g=s.doc.length;for(let v=0;;){let k=v==l.length?null:l[v];if(!k&&!c.length)break;let A,E;if(c.length)A=u,E=c.reduce((q,W)=>Math.min(q,W.to),k&&k.from>A?k.from:1e8);else{if(A=k.from,A>g)break;E=k.to,c.push(k),v++}for(;v<l.length;){let q=l[v];if(q.from==A&&(q.to>q.from||q.to==A))c.push(q),v++,E=Math.min(q.to,E);else{E=Math.min(q.from,E);break}}E=Math.min(E,g);let N=!1;if(c.some(q=>q.from==A&&(q.to==E||E==g))&&(N=A==E,!N&&E-A<10)){let q=A-(d+f.value.length);q>0&&(f.next(q),d=A);for(let W=A;;){if(W>=E){N=!0;break}if(!f.lineBreak&&d+f.value.length>W)break;W=d+f.value.length,d+=f.value.length,f.next()}}let V=maxSeverity(c);if(N)a.add(A,A,Decoration.widget({widget:new DiagnosticWidget(V),diagnostics:c.slice()}));else{let q=c.reduce((W,H)=>H.markClass?W+" "+H.markClass:W,"");a.add(A,E,Decoration.mark({class:"cm-lintRange cm-lintRange-"+V+q,diagnostics:c.slice(),inclusiveEnd:c.some(W=>W.to>E)}))}if(u=E,u==g)break;for(let q=0;q<c.length;q++)c[q].to<=u&&c.splice(q--,1)}let m=a.finish();return new LintState(m,n,findDiagnostic(m))}}function findDiagnostic(r,e=null,n=0){let s=null;return r.between(n,1e9,(o,l,{spec:a})=>{if(!(e&&a.diagnostics.indexOf(e)<0))if(!s)s=new SelectedDiagnostic(o,l,e||a.diagnostics[0]);else{if(a.diagnostics.indexOf(s.diagnostic)<0)return!1;s=new SelectedDiagnostic(s.from,l,s.diagnostic)}}),s}function hideTooltip(r,e){let n=e.pos,s=e.end||n,o=r.state.facet(lintConfig).hideOn(r,n,s);if(o!=null)return o;let l=r.startState.doc.lineAt(e.pos);return!!(r.effects.some(a=>a.is(setDiagnosticsEffect))||r.changes.touchesRange(l.from,Math.max(l.to,s)))}function maybeEnableLint(r,e){return r.field(lintState,!1)?e:e.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(r,e){if(e.docChanged&&r.diagnostics.size){let n=r.diagnostics.map(e.changes),s=null,o=r.panel;if(r.selected){let l=e.changes.mapPos(r.selected.from,1);s=findDiagnostic(n,r.selected.diagnostic,l)||findDiagnostic(n,null,l)}!n.size&&o&&e.state.facet(lintConfig).autoPanel&&(o=null),r=new LintState(n,o,s)}for(let n of e.effects)if(n.is(setDiagnosticsEffect)){let s=e.state.facet(lintConfig).autoPanel?n.value.length?LintPanel.open:null:r.panel;r=LintState.init(n.value,s,e.state)}else n.is(togglePanel)?r=new LintState(r.diagnostics,n.value?LintPanel.open:null,r.selected):n.is(movePanelSelection)&&(r=new LintState(r.diagnostics,r.panel,n.value));return r},provide:r=>[showPanel.from(r,e=>e.panel),EditorView.decorations.from(r,e=>e.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(r,e,n){let{diagnostics:s}=r.state.field(lintState),o,l=-1,a=-1;s.between(e-(n<0?1:0),e+(n>0?1:0),(u,f,{spec:d})=>{if(e>=u&&e<=f&&(u==f||(e>u||n>0)&&(e<f||n<0)))return o=d.diagnostics,l=u,a=f,!1});let c=r.state.facet(lintConfig).tooltipFilter;return o&&c&&(o=c(o,r.state)),o?{pos:l,end:a,above:r.state.doc.lineAt(l).to<a,create(){return{dom:diagnosticsTooltip(r,o)}}}:null}function diagnosticsTooltip(r,e){return crelt("ul",{class:"cm-tooltip-lint"},e.map(n=>renderDiagnostic(r,n,!1)))}const openLintPanel=r=>{let e=r.state.field(lintState,!1);(!e||!e.panel)&&r.dispatch({effects:maybeEnableLint(r.state,[togglePanel.of(!0)])});let n=getPanel(r,LintPanel.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=r=>{let e=r.state.field(lintState,!1);return!e||!e.panel?!1:(r.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=r=>{let e=r.state.field(lintState,!1);if(!e)return!1;let n=r.state.selection.main,s=e.diagnostics.iter(n.to+1);return!s.value&&(s=e.diagnostics.iter(0),!s.value||s.from==n.from&&s.to==n.to)?!1:(r.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(r){return{sources:r.map(e=>e.source).filter(e=>e!=null),...combineConfig(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:combineFilter,tooltipFilter:combineFilter,needsRefresh:(e,n)=>e?n?s=>e(s)||n(s):e:n,hideOn:(e,n)=>e?n?(s,o,l)=>e(s,o,l)||n(s,o,l):e:n,autoPanel:(e,n)=>e||n})}}});function combineFilter(r,e){return r?e?(n,s)=>e(r(n,s),s):r:e}function assignKeys(r){let e=[];if(r)e:for(let{name:n}of r){for(let s=0;s<n.length;s++){let o=n[s];if(/[a-zA-Z]/.test(o)&&!e.some(l=>l.toLowerCase()==o.toLowerCase())){e.push(o);continue e}}e.push("")}return e}function renderDiagnostic(r,e,n){var s;let o=n?assignKeys(e.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},crelt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(r):e.message),(s=e.actions)===null||s===void 0?void 0:s.map((l,a)=>{let c=!1,u=v=>{if(v.preventDefault(),c)return;c=!0;let k=findDiagnostic(r.state.field(lintState).diagnostics,e);k&&l.apply(r,k.from,k.to)},{name:f}=l,d=o[a]?f.indexOf(o[a]):-1,g=d<0?f:[f.slice(0,d),crelt("u",f.slice(d,d+1)),f.slice(d+1)],m=l.markClass?" "+l.markClass:"";return crelt("button",{type:"button",class:"cm-diagnosticAction"+m,onclick:u,onmousedown:u,"aria-label":` Action: ${f}${d<0?"":` (access key "${o[a]})"`}.`},g)}),e.source&&crelt("div",{class:"cm-diagnosticSource"},e.source))}class DiagnosticWidget extends WidgetType{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PanelItem{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(e){this.view=e,this.items=[];let n=o=>{if(o.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:l}=this.items[this.selectedIndex],a=assignKeys(l.actions);for(let c=0;c<a.length;c++)if(a[c].toUpperCase().charCodeAt(0)==o.keyCode){let u=findDiagnostic(this.view.state.field(lintState).diagnostics,l);u&&l.actions[c].apply(e,u.from,u.to)}}else return;o.preventDefault()},s=o=>{for(let l=0;l<this.items.length;l++)this.items[l].dom.contains(o.target)&&this.moveSelection(l)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:s}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(lintState).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(lintState),s=0,o=!1,l=null,a=new Set;for(e.between(0,this.view.state.doc.length,(c,u,{spec:f})=>{for(let d of f.diagnostics){if(a.has(d))continue;a.add(d);let g=-1,m;for(let v=s;v<this.items.length;v++)if(this.items[v].diagnostic==d){g=v;break}g<0?(m=new PanelItem(this.view,d),this.items.splice(s,0,m),o=!0):(m=this.items[g],g>s&&(this.items.splice(s,g-s),o=!0)),n&&m.diagnostic==n.diagnostic?m.dom.hasAttribute("aria-selected")||(m.dom.setAttribute("aria-selected","true"),l=m):m.dom.hasAttribute("aria-selected")&&m.dom.removeAttribute("aria-selected"),s++}});s<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),l?(this.list.setAttribute("aria-activedescendant",l.id),this.view.requestMeasure({key:this,read:()=>({sel:l.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:c,panel:u})=>{let f=u.height/this.list.offsetHeight;c.top<u.top?this.list.scrollTop-=(u.top-c.top)/f:c.bottom>u.bottom&&(this.list.scrollTop+=(c.bottom-u.bottom)/f)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let e=this.list.firstChild;function n(){let s=e;e=s.nextSibling,s.remove()}for(let s of this.items)if(s.dom.parentNode==this.list){for(;e!=s.dom;)n();e=s.dom.nextSibling}else this.list.insertBefore(s.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(lintState),s=findDiagnostic(n.diagnostics,this.items[e].diagnostic);s&&this.view.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:movePanelSelection.of(s)})}static open(e){return new LintPanel(e)}}function svg(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function underline(r){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function severityWeight(r){return r=="error"?4:r=="warning"?3:r=="info"?2:1}function maxSeverity(r){let e="hint",n=1;for(let s of r){let o=severityWeight(s.severity);o>n&&(n=o,e=s.severity)}return e}const lintExtensions=[lintState,EditorView.decorations.compute([lintState],r=>{let{selected:e,panel:n}=r.field(lintState);return!e||!n||e.from==e.to?Decoration.none:Decoration.set([activeMark.range(e.from,e.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme],basicSetup=[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),history(),foldGutter(),drawSelection(),dropCursor(),EditorState.allowMultipleSelections.of(!0),indentOnInput(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),crosshairCursor(),highlightActiveLine(),highlightSelectionMatches(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...searchKeymap,...historyKeymap,...foldKeymap,...completionKeymap,...lintKeymap])];/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var h=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[basicSetup]}),y=Symbol("vue-codemirror-global-config"),O,j=function(r){var e=r.onUpdate,n=r.onChange,s=r.onFocus,o=r.onBlur,l=function(a,c){var u={};for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&c.indexOf(f)<0&&(u[f]=a[f]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var d=0;for(f=Object.getOwnPropertySymbols(a);d<f.length;d++)c.indexOf(f[d])<0&&Object.prototype.propertyIsEnumerable.call(a,f[d])&&(u[f[d]]=a[f[d]])}return u}(r,["onUpdate","onChange","onFocus","onBlur"]);return EditorState.create({doc:l.doc,selection:l.selection,extensions:(Array.isArray(l.extensions)?l.extensions:[l.extensions]).concat([EditorView.updateListener.of(function(a){e(a),a.docChanged&&n(a.state.doc.toString(),a),a.focusChanged&&(a.view.hasFocus?s(a):o(a))})])})},S=function(r){var e=new Compartment;return{compartment:e,run:function(n){e.get(r.state)?r.dispatch({effects:e.reconfigure(n)}):r.dispatch({effects:StateEffect.appendConfig.of(e.of(n))})}}},x=function(r,e){var n=S(r),s=n.compartment,o=n.run;return function(l){var a=s.get(r.state);o(l??a!==e?e:[])}},C={type:Boolean,default:void 0},D={autofocus:C,disabled:C,indentWithTab:C,tabSize:Number,placeholder:String,style:Object,autoDestroy:C,phrases:Object,root:Object,extensions:Array,selection:Object},U={modelValue:{type:String,default:""}},w=Object.assign(Object.assign({},D),U);(function(r){r.Change="change",r.Update="update",r.Focus="focus",r.Blur="blur",r.Ready="ready",r.ModelUpdate="update:modelValue"})(O||(O={}));var z={};z[O.Change]=function(r,e){return!0},z[O.Update]=function(r){return!0},z[O.Focus]=function(r){return!0},z[O.Blur]=function(r){return!0},z[O.Ready]=function(r){return!0};var B={};B[O.ModelUpdate]=z[O.Change];var F=Object.assign(Object.assign({},z),B),P=defineComponent({name:"VueCodemirror",props:Object.assign({},w),emits:Object.assign({},F),setup:function(r,e){var n=shallowRef(),s=shallowRef(),o=shallowRef(),l=Object.assign(Object.assign({},h),inject(y,{})),a=computed(function(){var c={};return Object.keys(toRaw(r)).forEach(function(u){var f;u!=="modelValue"&&(c[u]=(f=r[u])!==null&&f!==void 0?f:l[u])}),c});return onMounted(function(){var c;s.value=j({doc:r.modelValue,selection:a.value.selection,extensions:(c=l.extensions)!==null&&c!==void 0?c:[],onFocus:function(f){return e.emit(O.Focus,f)},onBlur:function(f){return e.emit(O.Blur,f)},onUpdate:function(f){return e.emit(O.Update,f)},onChange:function(f,d){f!==r.modelValue&&(e.emit(O.Change,f,d),e.emit(O.ModelUpdate,f,d))}}),o.value=function(f){return new EditorView(Object.assign({},f))}({state:s.value,parent:n.value,root:a.value.root});var u=function(f){var d=function(){return f.state.doc.toString()},g=S(f).run,m=x(f,[EditorView.editable.of(!1),EditorState.readOnly.of(!0)]),v=x(f,keymap.of([indentWithTab])),k=S(f).run,A=S(f).run,E=S(f).run,N=S(f).run;return{focus:function(){return f.focus()},getDoc:d,setDoc:function(V){V!==d()&&f.dispatch({changes:{from:0,to:f.state.doc.length,insert:V}})},reExtensions:g,toggleDisabled:m,toggleIndentWithTab:v,setTabSize:function(V){k([EditorState.tabSize.of(V),indentUnit.of(" ".repeat(V))])},setPhrases:function(V){A([EditorState.phrases.of(V)])},setPlaceholder:function(V){E(placeholder(V))},setStyle:function(V){V===void 0&&(V={}),N(EditorView.theme({"&":Object.assign({},V)}))}}}(o.value);watch(function(){return r.modelValue},function(f){f!==u.getDoc()&&u.setDoc(f)}),watch(function(){return r.extensions},function(f){return u.reExtensions(f||[])},{immediate:!0}),watch(function(){return a.value.disabled},function(f){return u.toggleDisabled(f)},{immediate:!0}),watch(function(){return a.value.indentWithTab},function(f){return u.toggleIndentWithTab(f)},{immediate:!0}),watch(function(){return a.value.tabSize},function(f){return u.setTabSize(f)},{immediate:!0}),watch(function(){return a.value.phrases},function(f){return u.setPhrases(f||{})},{immediate:!0}),watch(function(){return a.value.placeholder},function(f){return u.setPlaceholder(f)},{immediate:!0}),watch(function(){return a.value.style},function(f){return u.setStyle(f)},{immediate:!0}),a.value.autofocus&&u.focus(),e.emit(O.Ready,{state:s.value,view:o.value,container:n.value})}),onBeforeUnmount(function(){a.value.autoDestroy&&o.value&&function(c){c.destroy()}(o.value)}),function(){return h$1("div",{class:"v-codemirror",style:{display:"contents"},ref:n})}}}),T=P,define_process_env_default={};class Stack{constructor(e,n,s,o,l,a,c,u,f,d=0,g){this.p=e,this.stack=n,this.state=s,this.reducePos=o,this.pos=l,this.score=a,this.buffer=c,this.bufferBase=u,this.curContext=f,this.lookAhead=d,this.parent=g}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,s=0){let o=e.parser.context;return new Stack(e,[],n,s,s,0,[],0,o?new StackContext(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let s=e>>19,o=e&65535,{parser:l}=this.p,a=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),c=l.dynamicPrecedence(o);if(c&&(this.score+=c),s==0){this.pushState(l.getGoto(this.state,o,!0),this.reducePos),o<l.minRepeatTerm&&this.storeNode(o,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(o,this.reducePos);return}let u=this.stack.length-(s-1)*3-(e&262144?6:0),f=u?this.stack[u-2]:this.p.ranges[0].from,d=this.reducePos-f;d>=2e3&&!(!((n=this.p.parser.nodeSet.types[o])===null||n===void 0)&&n.isAnonymous)&&(f==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=d):this.p.lastBigReductionSize<d&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=f,this.p.lastBigReductionSize=d));let g=u?this.stack[u-1]:0,m=this.bufferBase+this.buffer.length-g;if(o<l.minRepeatTerm||e&131072){let v=l.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(o,f,v,m+4,!0)}if(e&262144)this.state=this.stack[u];else{let v=this.stack[u-3];this.state=l.getGoto(v,o,!0)}for(;this.stack.length>u;)this.stack.pop();this.reduceContext(o,f)}storeNode(e,n,s,o=4,l=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,c=this.buffer.length;if(c==0&&a.parent&&(c=a.bufferBase-a.parent.bufferBase,a=a.parent),c>0&&a.buffer[c-4]==0&&a.buffer[c-1]>-1){if(n==s)return;if(a.buffer[c-2]>=n){a.buffer[c-2]=s;return}}}if(!l||this.pos==s)this.buffer.push(e,n,s,o);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let c=!1;for(let u=a;u>0&&this.buffer[u-2]>s;u-=4)if(this.buffer[u-1]>=0){c=!0;break}if(c)for(;a>0&&this.buffer[a-2]>s;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,o>4&&(o-=4)}this.buffer[a]=e,this.buffer[a+1]=n,this.buffer[a+2]=s,this.buffer[a+3]=o}}shift(e,n,s,o){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=o,this.shiftContext(n,s),n<=this.p.parser.maxNode&&this.buffer.push(n,s,o,4);else{let l=e,{parser:a}=this.p;(o>this.pos||n<=a.maxNode)&&(this.pos=o,a.stateFlag(l,1)||(this.reducePos=o)),this.pushState(l,s),this.shiftContext(n,s),n<=a.maxNode&&this.buffer.push(n,s,o,4)}}apply(e,n,s,o){e&65536?this.reduce(e):this.shift(e,n,s,o)}useNode(e,n){let s=this.p.reused.length-1;(s<0||this.p.reused[s]!=e)&&(this.p.reused.push(e),s++);let o=this.pos;this.reducePos=this.pos=o+e.length,this.pushState(n,o),this.buffer.push(s,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let s=e.buffer.slice(n),o=e.bufferBase+n;for(;e&&o==e.bufferBase;)e=e.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,s,o,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let s=e<=this.p.parser.maxNode;s&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,s?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new SimulatedStack(this);;){let s=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(s==0)return!1;if(!(s&65536))return!0;n.reduce(s)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let o=[];for(let l=0,a;l<n.length;l+=2)(a=n[l+1])!=this.state&&this.p.parser.hasAction(a,e)&&o.push(n[l],a);if(this.stack.length<120)for(let l=0;o.length<8&&l<n.length;l+=2){let a=n[l+1];o.some((c,u)=>u&1&&c==a)||o.push(n[l],a)}n=o}let s=[];for(let o=0;o<n.length&&s.length<4;o+=2){let l=n[o+1];if(l==this.state)continue;let a=this.split();a.pushState(l,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(n[o],this.pos),a.reducePos=this.pos,a.score-=200,s.push(a)}return s}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if(!(n&65536))return!1;if(!e.validAction(this.state,n)){let s=n>>19,o=n&65535,l=this.stack.length-s*3;if(l<0||e.getGoto(this.stack[l],o,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;n=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],s=(o,l)=>{if(!n.includes(o))return n.push(o),e.allActions(o,a=>{if(!(a&393216))if(a&65536){let c=(a>>19)-l;if(c>1){let u=a&65535,f=this.stack.length-c*3;if(f>=0&&e.getGoto(this.stack[f],u,!1)>=0)return c<<19|65536|u}}else{let c=s(a,l+1);if(c!=null)return c}})};return s(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new StackContext(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class SimulatedStack{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,s=e>>19;s==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(s-1)*3;let o=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=o}}class StackBufferCursor{constructor(e,n,s){this.stack=e,this.pos=n,this.index=s,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new StackBufferCursor(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(r,e=Uint16Array){if(typeof r!="string")return r;let n=null;for(let s=0,o=0;s<r.length;){let l=0;for(;;){let a=r.charCodeAt(s++),c=!1;if(a==126){l=65535;break}a>=92&&a--,a>=34&&a--;let u=a-32;if(u>=46&&(u-=46,c=!0),l+=u,c)break;l*=46}n?n[o++]=l:n=new e(l)}return n}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let s=this.range,o=this.rangeIndex,l=this.pos+e;for(;l<s.from;){if(!o)return null;let a=this.ranges[--o];l-=s.from-a.to,s=a}for(;n<0?l>s.to:l>=s.to;){if(o==this.ranges.length-1)return null;let a=this.ranges[++o];l+=a.from-s.to,s=a}return l}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,s,o;if(n>=0&&n<this.chunk.length)s=this.pos+e,o=this.chunk.charCodeAt(n);else{let l=this.resolveOffset(e,1);if(l==null)return-1;if(s=l,s>=this.chunk2Pos&&s<this.chunk2Pos+this.chunk2.length)o=this.chunk2.charCodeAt(s-this.chunk2Pos);else{let a=this.rangeIndex,c=this.range;for(;c.to<=s;)c=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=s),s+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-s)),o=this.chunk2.charCodeAt(0)}}return s>=this.token.lookAhead&&(this.token.lookAhead=s+1),o}acceptToken(e,n=0){let s=n?this.resolveOffset(n,-1):this.pos;if(s==null||s<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=s}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=nullToken,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let s="";for(let o of this.ranges){if(o.from>=n)break;o.to>e&&(s+=this.input.read(Math.max(o.from,e),Math.min(o.to,n)))}return s}}class TokenGroup{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:s}=n.p;readToken(this.data,e,n,this.id,s.data,s.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;function readToken(r,e,n,s,o,l){let a=0,c=1<<s,{dialect:u}=n.p.parser;e:for(;c&r[a];){let f=r[a+1];for(let v=a+3;v<f;v+=2)if((r[v+1]&c)>0){let k=r[v];if(u.allows(k)&&(e.token.value==-1||e.token.value==k||overrides(k,e.token.value,o,l))){e.acceptToken(k);break}}let d=e.next,g=0,m=r[a+2];if(e.next<0&&m>g&&r[f+m*3-3]==65535){a=r[f+m*3-1];continue e}for(;g<m;){let v=g+m>>1,k=f+v+(v<<1),A=r[k],E=r[k+1]||65536;if(d<A)m=v;else if(d>=E)g=v+1;else{a=r[k+2],e.advance();continue e}}break}}function findOffset(r,e,n){for(let s=e,o;(o=r[s])!=65535;s++)if(o==n)return s-e;return-1}function overrides(r,e,n,s){let o=findOffset(n,s,e);return o<0||findOffset(n,s,r)<o}const verbose=typeof process<"u"&&define_process_env_default&&/\bparse\b/.test(define_process_env_default.LOG);let stackIDs=null;function cutAt(r,e,n){let s=r.cursor(IterMode.IncludeAnonymous);for(s.moveTo(e);;)if(!(n<0?s.childBefore(e):s.childAfter(e)))for(;;){if((n<0?s.to<e:s.from>e)&&!s.type.isError)return n<0?Math.max(0,Math.min(s.to-1,e-25)):Math.min(r.length,Math.max(s.from+1,e+25));if(n<0?s.prevSibling():s.nextSibling())break;if(!s.parent())return n<0?0:r.length}}class FragmentCursor{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cutAt(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cutAt(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let s=this.trees[n],o=this.index[n];if(o==s.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let l=s.children[o],a=this.start[n]+s.positions[o];if(a>e)return this.nextStart=a,null;if(l instanceof Tree){if(a==e){if(a<this.safeFrom)return null;let c=a+l.length;if(c<=this.safeTo){let u=l.prop(NodeProp.lookAhead);if(!u||c+u<this.fragment.to)return l}}this.index[n]++,a+l.length>=Math.max(this.safeFrom,e)&&(this.trees.push(l),this.start.push(a),this.index.push(0))}else this.index[n]++,this.nextStart=a+l.length}}}class TokenCache{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(s=>new CachedToken)}getActions(e){let n=0,s=null,{parser:o}=e.p,{tokenizers:l}=o,a=o.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,u=0;for(let f=0;f<l.length;f++){if(!(1<<f&a))continue;let d=l[f],g=this.tokens[f];if(!(s&&!d.fallback)&&((d.contextual||g.start!=e.pos||g.mask!=a||g.context!=c)&&(this.updateCachedToken(g,d,e),g.mask=a,g.context=c),g.lookAhead>g.end+25&&(u=Math.max(g.lookAhead,u)),g.value!=0)){let m=n;if(g.extended>-1&&(n=this.addActions(e,g.extended,g.end,n)),n=this.addActions(e,g.value,g.end,n),!d.extend&&(s=g,n>m))break}}for(;this.actions.length>n;)this.actions.pop();return u&&e.setLookAhead(u),!s&&e.pos==this.stream.end&&(s=new CachedToken,s.value=e.p.parser.eofTerm,s.start=s.end=e.pos,n=this.addActions(e,s.value,s.end,n)),this.mainToken=s,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new CachedToken,{pos:s,p:o}=e;return n.start=s,n.end=Math.min(s+1,o.stream.end),n.value=s==o.stream.end?o.parser.eofTerm:0,n}updateCachedToken(e,n,s){let o=this.stream.clipPos(s.pos);if(n.token(this.stream.reset(o,e),s),e.value>-1){let{parser:l}=s.p;for(let a=0;a<l.specialized.length;a++)if(l.specialized[a]==e.value){let c=l.specializers[a](this.stream.read(e.start,e.end),s);if(c>=0&&s.p.parser.dialect.allows(c>>1)){c&1?e.extended=c>>1:e.value=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(o+1)}putAction(e,n,s,o){for(let l=0;l<o;l+=3)if(this.actions[l]==e)return o;return this.actions[o++]=e,this.actions[o++]=n,this.actions[o++]=s,o}addActions(e,n,s,o){let{state:l}=e,{parser:a}=e.p,{data:c}=a;for(let u=0;u<2;u++)for(let f=a.stateSlot(l,u?2:1);;f+=3){if(c[f]==65535)if(c[f+1]==1)f=pair(c,f+2);else{o==0&&c[f+1]==2&&(o=this.putAction(pair(c,f+2),n,s,o));break}c[f]==n&&(o=this.putAction(pair(c,f+1),n,s,o))}return o}}class Parse{constructor(e,n,s,o){this.parser=e,this.input=n,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(n,o),this.tokens=new TokenCache(e,this.stream),this.topTerm=e.top[1];let{from:l}=o[0];this.stacks=[Stack.start(this,e.top[0],l)],this.fragments=s.length&&this.stream.end-l>e.bufferLength*4?new FragmentCursor(s,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,s=this.stacks=[],o,l;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let c=e[a];for(;;){if(this.tokens.mainToken=null,c.pos>n)s.push(c);else{if(this.advanceStack(c,s,e))continue;{o||(o=[],l=[]),o.push(c);let u=this.tokens.getMainToken(c);l.push(u.value,u.end)}}break}}if(!s.length){let a=o&&findFinished(o);if(a)return verbose&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw verbose&&o&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&o){let a=this.stoppedAt!=null&&o[0].pos>this.stoppedAt?o[0]:this.runRecovery(o,l,s);if(a)return verbose&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(s.length>a)for(s.sort((c,u)=>u.score-c.score);s.length>a;)s.pop();s.some(c=>c.reducePos>n)&&this.recovering--}else if(s.length>1){e:for(let a=0;a<s.length-1;a++){let c=s[a];for(let u=a+1;u<s.length;u++){let f=s[u];if(c.sameState(f)||c.buffer.length>500&&f.buffer.length>500)if((c.score-f.score||c.buffer.length-f.buffer.length)>0)s.splice(u--,1);else{s.splice(a--,1);continue e}}}s.length>12&&(s.sort((a,c)=>c.score-a.score),s.splice(12,s.length-12))}this.minStackPos=s[0].pos;for(let a=1;a<s.length;a++)s[a].pos<this.minStackPos&&(this.minStackPos=s[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,s){let o=e.pos,{parser:l}=this,a=verbose?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&o>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let f=e.curContext&&e.curContext.tracker.strict,d=f?e.curContext.hash:0;for(let g=this.fragments.nodeAt(o);g;){let m=this.parser.nodeSet.types[g.type.id]==g.type?l.getGoto(e.state,g.type.id):-1;if(m>-1&&g.length&&(!f||(g.prop(NodeProp.contextHash)||0)==d))return e.useNode(g,m),verbose&&console.log(a+this.stackID(e)+` (via reuse of ${l.getName(g.type.id)})`),!0;if(!(g instanceof Tree)||g.children.length==0||g.positions[0]>0)break;let v=g.children[0];if(v instanceof Tree&&g.positions[0]==0)g=v;else break}}let c=l.stateSlot(e.state,4);if(c>0)return e.reduce(c),verbose&&console.log(a+this.stackID(e)+` (via always-reduce ${l.getName(c&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let f=0;f<u.length;){let d=u[f++],g=u[f++],m=u[f++],v=f==u.length||!s,k=v?e:e.split(),A=this.tokens.mainToken;if(k.apply(d,g,A?A.start:k.pos,m),verbose&&console.log(a+this.stackID(k)+` (via ${d&65536?`reduce of ${l.getName(d&65535)}`:"shift"} for ${l.getName(g)} @ ${o}${k==e?"":", split"})`),v)return!0;k.pos>o?n.push(k):s.push(k)}return!1}advanceFully(e,n){let s=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>s)return pushStackDedup(e,n),!0}}runRecovery(e,n,s){let o=null,l=!1;for(let a=0;a<e.length;a++){let c=e[a],u=n[a<<1],f=n[(a<<1)+1],d=verbose?this.stackID(c)+" -> ":"";if(c.deadEnd&&(l||(l=!0,c.restart(),verbose&&console.log(d+this.stackID(c)+" (restarted)"),this.advanceFully(c,s))))continue;let g=c.split(),m=d;for(let v=0;v<10&&g.forceReduce()&&(verbose&&console.log(m+this.stackID(g)+" (via force-reduce)"),!this.advanceFully(g,s));v++)verbose&&(m=this.stackID(g)+" -> ");for(let v of c.recoverByInsert(u))verbose&&console.log(d+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,s);this.stream.end>c.pos?(f==c.pos&&(f++,u=0),c.recoverByDelete(u,f),verbose&&console.log(d+this.stackID(c)+` (via recover-delete ${this.parser.getName(u)})`),pushStackDedup(c,s)):(!o||o.score<c.score)&&(o=c)}return o}stackToTree(e){return e.close(),Tree.build({buffer:StackBufferCursor.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(stackIDs||(stackIDs=new WeakMap)).get(e);return n||stackIDs.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function pushStackDedup(r,e){for(let n=0;n<e.length;n++){let s=e[n];if(s.pos==r.pos&&s.sameState(r)){e[n].score<r.score&&(e[n]=r);return}}e.push(r)}class Dialect{constructor(e,n,s){this.source=e,this.flags=n,this.disabled=s}allows(e){return!this.disabled||this.disabled[e]==0}}class LRParser extends Parser{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let c=0;c<e.repeatNodeCount;c++)n.push("");let s=Object.keys(e.topRules).map(c=>e.topRules[c][1]),o=[];for(let c=0;c<n.length;c++)o.push([]);function l(c,u,f){o[c].push([u,u.deserialize(String(f))])}if(e.nodeProps)for(let c of e.nodeProps){let u=c[0];typeof u=="string"&&(u=NodeProp[u]);for(let f=1;f<c.length;){let d=c[f++];if(d>=0)l(d,u,c[f++]);else{let g=c[f+-d];for(let m=-d;m>0;m--)l(c[f++],u,g);f++}}}this.nodeSet=new NodeSet(n.map((c,u)=>NodeType.define({name:u>=this.minRepeatTerm?void 0:c,id:u,props:o[u],top:s.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let a=decodeArray(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(e.states,Uint32Array),this.data=decodeArray(e.stateData),this.goto=decodeArray(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new TokenGroup(a,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,s){let o=new Parse(this,e,n,s);for(let l of this.wrappers)o=l(o,e,n,s);return o}getGoto(e,n,s=!1){let o=this.goto;if(n>=o[0])return-1;for(let l=o[n+1];;){let a=o[l++],c=a&1,u=o[l++];if(c&&s)return u;for(let f=l+(a>>1);l<f;l++)if(o[l]==e)return u;if(c)return-1}}hasAction(e,n){let s=this.data;for(let o=0;o<2;o++)for(let l=this.stateSlot(e,o?2:1),a;;l+=3){if((a=s[l])==65535)if(s[l+1]==1)a=s[l=pair(s,l+2)];else{if(s[l+1]==2)return pair(s,l+2);break}if(a==n||a==0)return pair(s,l+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,s=>s==n?!0:null)}allActions(e,n){let s=this.stateSlot(e,4),o=s?n(s):void 0;for(let l=this.stateSlot(e,1);o==null;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=pair(this.data,l+2);else break;o=n(pair(this.data,l+1))}return o}nextStates(e){let n=[];for(let s=this.stateSlot(e,1);;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=pair(this.data,s+2);else break;if(!(this.data[s+2]&1)){let o=this.data[s+1];n.some((l,a)=>a&1&&l==o)||n.push(this.data[s],o)}}return n}configure(e){let n=Object.assign(Object.create(LRParser.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let s=this.topRules[e.top];if(!s)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=s}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(s=>{let o=e.tokenizers.find(l=>l.from==s);return o?o.to:s})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((s,o)=>{let l=e.specializers.find(c=>c.from==s.external);if(!l)return s;let a=Object.assign(Object.assign({},s),{external:l.to});return n.specializers[o]=getSpecializer(a),a})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),s=n.map(()=>!1);if(e)for(let l of e.split(" ")){let a=n.indexOf(l);a>=0&&(s[a]=!0)}let o=null;for(let l=0;l<n.length;l++)if(!s[l])for(let a=this.dialects[n[l]],c;(c=this.data[a++])!=65535;)(o||(o=new Uint8Array(this.maxTerm+1)))[c]=1;return new Dialect(e,s,o)}static deserialize(e){return new LRParser(e)}}function pair(r,e){return r[e]|r[e+1]<<16}function findFinished(r){let e=null;for(let n of r){let s=n.p.stoppedAt;(n.pos==n.p.stream.end||s!=null&&n.pos>s)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function getSpecializer(r){if(r.external){let e=r.extend?1:0;return(n,s)=>r.external(n,s)<<1|e}return r.get}const jsonHighlighting=styleTags({String:tags.string,Number:tags.number,"True False":tags.bool,PropertyName:tags.propertyName,Null:tags.null,", :":tags.separator,"[ ]":tags.squareBracket,"{ }":tags.brace}),parser=LRParser.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[jsonHighlighting],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),jsonLanguage=LRLanguage.define({name:"json",parser:parser.configure({props:[indentNodeProp.add({Object:continuedIndent({except:/^\s*\}/}),Array:continuedIndent({except:/^\s*\]/})}),foldNodeProp.add({"Object Array":foldInside})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function json(){return new LanguageSupport(jsonLanguage)}const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)],_hoisted_1$7={class:"editor-wrapper"},_sfc_main$7=defineComponent({__name:"CodeEditor",props:mergeModels({height:{},disabled:{type:Boolean},placeholder:{}},{modelValue:{default:""},modelModifiers:{}}),emits:mergeModels(["ready"],["update:modelValue"]),setup(r,{expose:e,emit:n}){const s=useModel(r,"modelValue"),o=n,l=[json(),oneDark],a=shallowRef();function c(f){a.value=f.view,o("ready",f.view)}function u(f){if(a.value){const d=a.value,m=d.state.selection.main;d.dispatch({changes:{from:m.from,to:m.to,insert:f},selection:{anchor:m.from+f.length}}),d.focus()}else s.value=s.value+f}return e({insertAtCursor:u,editorView:a}),(f,d)=>(openBlock(),createElementBlock("div",_hoisted_1$7,[createVNode(unref(T),{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=g=>s.value=g),extensions:l,style:normalizeStyle({height:r.height||"240px"}),disabled:r.disabled,placeholder:r.placeholder,onReady:c},null,8,["modelValue","style","disabled","placeholder"])]))}}),CodeEditor=_export_sfc(_sfc_main$7,[["__scopeId","data-v-77eb69d2"]]),_hoisted_1$6={class:"panel"},_hoisted_2$5={class:"toolbar"},_hoisted_3$3={class:"list"},_hoisted_4$3={key:0,class:"empty-state"},_hoisted_5$3=["onClick"],_hoisted_6$3={class:"item-header"},_hoisted_7$2={class:"item-url"},_hoisted_8$2=["onClick"],_hoisted_9$2=["onClick"],_hoisted_10$2={class:"item-meta"},_hoisted_11$1={key:0,class:"detail-section"},_hoisted_12$1={class:"detail-section"},_sfc_main$6=defineComponent({__name:"NetworkPanel",setup(r){const e=inject("ws"),{openEdit:n,openFromLog:s}=useRuleModal(),o=ref(""),l=ref(""),a=ref(""),c=ref(null);function u(m,v){return e.rules.value.find(k=>k.method===v&&m.includes(k.url))}function f(m){const v=new Map,k=[];for(const A of m){const E=`${A.method}:${A.url}`;A.isMocked?v.has(E)||(v.set(E,!0),k.push(A)):k.push(A)}return k}const d=computed(()=>{let m=e.logs.value.filter(v=>!(o.value&&!v.url.toLowerCase().includes(o.value.toLowerCase())||l.value&&v.method!==l.value||a.value==="mocked"&&!v.isMocked||a.value==="real"&&v.isMocked));return f(m)});function g(m){c.value=c.value===m?null:m}return(m,v)=>(openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$5,[createVNode(unref(SearchBox),{modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=k=>o.value=k),placeholder:"Search URL..."},null,8,["modelValue"]),createVNode(unref(MethodSelect),{modelValue:l.value,"onUpdate:modelValue":v[1]||(v[1]=k=>l.value=k),"show-all":""},null,8,["modelValue"]),withDirectives(createBaseVNode("select",{class:"select","onUpdate:modelValue":v[2]||(v[2]=k=>a.value=k)},[...v[6]||(v[6]=[createBaseVNode("option",{value:""},"All Status",-1),createBaseVNode("option",{value:"mocked"},"Mocked",-1),createBaseVNode("option",{value:"real"},"Real",-1)])],512),[[vModelSelect,a.value]]),createBaseVNode("button",{class:"btn btn-ghost",onClick:v[3]||(v[3]=k=>unref(e).clearLogs())},[...v[7]||(v[7]=[createBaseVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[createBaseVNode("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})],-1),createTextVNode(" Clear ",-1)])])]),createBaseVNode("div",_hoisted_3$3,[d.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_4$3,[...v[8]||(v[8]=[createBaseVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[createBaseVNode("path",{d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})],-1),createBaseVNode("div",null,"No network requests yet",-1)])])),(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,k=>(openBlock(),createElementBlock("div",{key:k.id,class:normalizeClass(["list-item",{expanded:c.value===k.id}]),onClick:A=>g(k.id)},[createBaseVNode("div",_hoisted_6$3,[createBaseVNode("span",{class:normalizeClass(["status-code",k.status>=200&&k.status<300?"success":"error"])},toDisplayString(k.status),3),createVNode(unref(MethodBadge),{method:k.method},null,8,["method"]),createBaseVNode("span",_hoisted_7$2,toDisplayString(k.url),1),createBaseVNode("span",{class:normalizeClass(["tag",k.isMocked?"tag-mock":"tag-real"])},toDisplayString(k.isMocked?"MOCK":"REAL"),3),createBaseVNode("div",{class:"item-actions",onClick:v[4]||(v[4]=withModifiers(()=>{},["stop"]))},[u(k.url,k.method)?(openBlock(),createElementBlock("button",{key:0,class:"btn btn-ghost btn-sm",onClick:A=>unref(n)(u(k.url,k.method))},"Edit",8,_hoisted_8$2)):(openBlock(),createElementBlock("button",{key:1,class:"btn btn-primary btn-sm",onClick:A=>unref(s)(k)},"+ Mock",8,_hoisted_9$2))])]),createBaseVNode("div",_hoisted_10$2,[createBaseVNode("span",null,toDisplayString(k.duration)+"ms",1),createBaseVNode("span",null,toDisplayString(k.timestamp),1)]),createBaseVNode("div",{class:"item-detail",onClick:v[5]||(v[5]=withModifiers(()=>{},["stop"]))},[k.requestBody?(openBlock(),createElementBlock("div",_hoisted_11$1,[v[9]||(v[9]=createBaseVNode("div",{class:"detail-label"},"Request Body",-1)),createVNode(unref(CodeEditor),{"model-value":unref(stringifyJSON)(k.requestBody),height:"200px",disabled:""},null,8,["model-value"])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_12$1,[v[10]||(v[10]=createBaseVNode("div",{class:"detail-label"},"Response Body",-1)),createVNode(unref(CodeEditor),{"model-value":unref(stringifyJSON)(k.responseBody),height:"280px",disabled:""},null,8,["model-value"])])])],10,_hoisted_5$3))),128))])]))}}),NetworkPanel=_export_sfc(_sfc_main$6,[["__scopeId","data-v-e0abc625"]]),_hoisted_1$5={class:"panel"},_hoisted_2$4={class:"toolbar"},_hoisted_3$2={class:"list"},_hoisted_4$2={key:0,class:"empty-state"},_hoisted_5$2={class:"rule-info"},_hoisted_6$2={class:"rule-url"},_hoisted_7$1={class:"rule-meta"},_hoisted_8$1=["onClick"],_hoisted_9$1=["onClick"],_hoisted_10$1=["onClick"],_sfc_main$5=defineComponent({__name:"RulesPanel",setup(r){const e=inject("ws"),{openAdd:n,openEdit:s,openView:o}=useRuleModal(),l=ref(""),a=ref(""),c=computed(()=>e.rules.value.filter(d=>!(l.value&&!d.url.toLowerCase().includes(l.value.toLowerCase())||a.value&&d.method!==a.value)));function u(d){confirm("Delete this rule?")&&e.deleteRule(d)}function f(d){e.toggleRule(d.id)}return(d,g)=>(openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$4,[createVNode(unref(SearchBox),{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=m=>l.value=m),placeholder:"Search URL..."},null,8,["modelValue"]),createVNode(unref(MethodSelect),{modelValue:a.value,"onUpdate:modelValue":g[1]||(g[1]=m=>a.value=m),"show-all":""},null,8,["modelValue"]),createBaseVNode("button",{class:"btn btn-primary",onClick:g[2]||(g[2]=(...m)=>unref(n)&&unref(n)(...m))},[...g[3]||(g[3]=[createBaseVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[createBaseVNode("path",{d:"M12 5v14M5 12h14"})],-1),createTextVNode(" Add Rule ",-1)])])]),createBaseVNode("div",_hoisted_3$2,[c.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_4$2,[...g[4]||(g[4]=[createBaseVNode("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[createBaseVNode("path",{d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),createBaseVNode("div",null,"No mock rules yet",-1)])])),(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,m=>(openBlock(),createElementBlock("div",{key:m.id,class:"rule-item"},[createVNode(unref(MethodBadge),{method:m.method},null,8,["method"]),createBaseVNode("div",_hoisted_5$2,[createBaseVNode("div",_hoisted_6$2,toDisplayString(m.url),1),createBaseVNode("div",_hoisted_7$1,"Status: "+toDisplayString(m.status)+"  Delay: "+toDisplayString(m.delay)+"ms",1)]),createVNode(unref(ToggleSwitch),{"model-value":m.enabled,"onUpdate:modelValue":v=>f(m)},null,8,["model-value","onUpdate:modelValue"]),createBaseVNode("button",{class:"btn btn-ghost btn-sm",onClick:v=>unref(o)(m)},"View",8,_hoisted_8$1),createBaseVNode("button",{class:"btn btn-ghost btn-sm",onClick:v=>unref(s)(m),title:"Edit"},"Edit",8,_hoisted_9$1),createBaseVNode("button",{class:"btn btn-ghost btn-sm btn-danger",onClick:v=>u(m.id),title:"Delete"},"Delete",8,_hoisted_10$1)]))),128))])]))}}),RulesPanel=_export_sfc(_sfc_main$5,[["__scopeId","data-v-32747fd5"]]),_hoisted_1$4={class:"mock-ref-body"},_hoisted_2$3={class:"category-title"},_hoisted_3$1={class:"mock-rules-grid"},_hoisted_4$1=["onClick"],_hoisted_5$1={class:"rule-syntax"},_hoisted_6$1={class:"rule-desc"},_sfc_main$4=defineComponent({__name:"MockReferenceModal",props:{visible:{type:Boolean}},emits:["close","insert"],setup(r,{emit:e}){const n=e,s=[{category:"Basic",rules:[{syntax:"@boolean",desc:"Random boolean"},{syntax:"@natural(min?, max?)",desc:"Natural number"},{syntax:"@integer(min?, max?)",desc:"Integer"},{syntax:"@float(min, max, dmin?, dmax?)",desc:"Float number"},{syntax:"@string(pool?, min?, max?)",desc:"Random string"}]},{category:"Date",rules:[{syntax:"@date(format?)",desc:"Date string"},{syntax:"@time(format?)",desc:"Time string"},{syntax:"@datetime(format?)",desc:"Datetime string"},{syntax:"@now(unit?, format?)",desc:"Current time"}]},{category:"Image",rules:[{syntax:"@image(size?, bg?, fg?, format?, text?)",desc:"Image URL"},{syntax:"@dataImage(size?, text?)",desc:"Base64 image"}]},{category:"Color",rules:[{syntax:"@color",desc:"Hex color"},{syntax:"@rgb",desc:"RGB color"},{syntax:"@rgba",desc:"RGBA color"}]},{category:"Text",rules:[{syntax:"@paragraph(min?, max?)",desc:"Paragraph"},{syntax:"@sentence(min?, max?)",desc:"Sentence"},{syntax:"@word(min?, max?)",desc:"Word"},{syntax:"@title(min?, max?)",desc:"Title"},{syntax:"@cparagraph",desc:"Chinese paragraph"},{syntax:"@csentence",desc:"Chinese sentence"},{syntax:"@cword(pool?, min?, max?)",desc:"Chinese word"},{syntax:"@ctitle",desc:"Chinese title"}]},{category:"Name",rules:[{syntax:"@first",desc:"First name"},{syntax:"@last",desc:"Last name"},{syntax:"@name(middle?)",desc:"Full name"},{syntax:"@cfirst",desc:"Chinese first name"},{syntax:"@clast",desc:"Chinese last name"},{syntax:"@cname",desc:"Chinese full name"}]},{category:"Web",rules:[{syntax:"@url(protocol?, host?)",desc:"URL"},{syntax:"@domain(tld?)",desc:"Domain"},{syntax:"@email(domain?)",desc:"Email"},{syntax:"@ip",desc:"IP address"}]},{category:"Address",rules:[{syntax:"@region",desc:"Region"},{syntax:"@province",desc:"Province"},{syntax:"@city(prefix?)",desc:"City"},{syntax:"@county(prefix?)",desc:"County"},{syntax:"@zip",desc:"Zip code"}]},{category:"Helper",rules:[{syntax:"@guid",desc:"GUID"},{syntax:"@id",desc:"ID (18 digits)"},{syntax:"@increment(step?)",desc:"Auto increment"}]},{category:"Array Rules",rules:[{syntax:'"list|count": [{}]',desc:"Fixed count array"},{syntax:'"list|min-max": [{}]',desc:"Random count array"},{syntax:'"id|+1": 1',desc:"Auto increment"},{syntax:'"status|1": [0,1]',desc:"Pick one from array"}]}];function o(l){const a=l.replace(/\(.*\)/,"").replace(/\?/g,"");n("insert",a),n("close")}return(l,a)=>(openBlock(),createBlock(unref(SubModal),{visible:r.visible,title:"Mock.js Reference",tip:"Click to insert at cursor",width:"900px",onClose:a[0]||(a[0]=c=>n("close"))},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$4,[(openBlock(),createElementBlock(Fragment,null,renderList(s,c=>createBaseVNode("div",{key:c.category,class:"mock-category"},[createBaseVNode("div",_hoisted_2$3,toDisplayString(c.category),1),createBaseVNode("div",_hoisted_3$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.rules,u=>(openBlock(),createElementBlock("div",{key:u.syntax,class:"mock-rule-item",onClick:f=>o(u.syntax)},[createBaseVNode("code",_hoisted_5$1,toDisplayString(u.syntax),1),createBaseVNode("span",_hoisted_6$1,toDisplayString(u.desc),1)],8,_hoisted_4$1))),128))])])),64))])]),_:1},8,["visible"]))}}),MockReferenceModal=_export_sfc(_sfc_main$4,[["__scopeId","data-v-871929a6"]]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var mock={exports:{}};(function(module,exports$1){(function(e,n){module.exports=n()})(commonjsGlobal,function(){return function(r){var e={};function n(s){if(e[s])return e[s].exports;var o=e[s]={exports:{},id:s,loaded:!1};return r[s].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.m=r,n.c=e,n.p="",n(0)}([function(r,e,n){var s=n(1),o=n(3),l=n(5),a=n(20),c=n(23),u=n(25),f;typeof window<"u"&&(f=n(27));/*!
    Mock -  & 
    https://github.com/nuysoft/Mock
     mozhi.gyy@taobao.com nuysoft@gmail.com
*/var d={Handler:s,Random:l,Util:o,XHR:f,RE:a,toJSONSchema:c,valid:u,heredoc:o.heredoc,setup:function(g){return f.setup(g)},_mocked:{}};d.version="1.0.1-beta3",f&&(f.Mock=d),d.mock=function(g,m,v){return arguments.length===1?s.gen(g):(arguments.length===2&&(v=m,m=void 0),f&&(window.XMLHttpRequest=f),d._mocked[g+(m||"")]={rurl:g,rtype:m,template:v},d)},r.exports=d},function(module,exports$1,__webpack_require__){var Constant=__webpack_require__(2),Util=__webpack_require__(3),Parser=__webpack_require__(4),Random=__webpack_require__(5),RE=__webpack_require__(20),Handler={extend:Util.extend};Handler.gen=function(r,e,n){e=e==null?"":e+"",n=n||{},n={path:n.path||[Constant.GUID],templatePath:n.templatePath||[Constant.GUID++],currentContext:n.currentContext,templateCurrentContext:n.templateCurrentContext||r,root:n.root||n.currentContext,templateRoot:n.templateRoot||n.templateCurrentContext||r};var s=Parser.parse(e),o=Util.type(r),l;return Handler[o]?(l=Handler[o]({type:o,template:r,name:e,parsedName:e&&e.replace(Constant.RE_KEY,"$1"),rule:s,context:n}),n.root||(n.root=l),l):r},Handler.extend({array:function(r){var e=[],n,s;if(r.template.length===0)return e;if(r.rule.parameters)if(r.rule.min===1&&r.rule.max===void 0)r.context.path.push(r.name),r.context.templatePath.push(r.name),e=Random.pick(Handler.gen(r.template,void 0,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template})),r.context.path.pop(),r.context.templatePath.pop();else if(r.rule.parameters[2])r.template.__order_index=r.template.__order_index||0,r.context.path.push(r.name),r.context.templatePath.push(r.name),e=Handler.gen(r.template,void 0,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template})[r.template.__order_index%r.template.length],r.template.__order_index+=+r.rule.parameters[2],r.context.path.pop(),r.context.templatePath.pop();else for(n=0;n<r.rule.count;n++)for(s=0;s<r.template.length;s++)r.context.path.push(e.length),r.context.templatePath.push(s),e.push(Handler.gen(r.template[s],e.length,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template})),r.context.path.pop(),r.context.templatePath.pop();else for(n=0;n<r.template.length;n++)r.context.path.push(n),r.context.templatePath.push(n),e.push(Handler.gen(r.template[n],n,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template})),r.context.path.pop(),r.context.templatePath.pop();return e},object:function(r){var e={},n,s,o,l,a,c;if(r.rule.min!=null)for(n=Util.keys(r.template),n=Random.shuffle(n),n=n.slice(0,r.rule.count),c=0;c<n.length;c++)o=n[c],l=o.replace(Constant.RE_KEY,"$1"),r.context.path.push(l),r.context.templatePath.push(o),e[l]=Handler.gen(r.template[o],o,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template}),r.context.path.pop(),r.context.templatePath.pop();else{n=[],s=[];for(o in r.template)(typeof r.template[o]=="function"?s:n).push(o);for(n=n.concat(s),c=0;c<n.length;c++)o=n[c],l=o.replace(Constant.RE_KEY,"$1"),r.context.path.push(l),r.context.templatePath.push(o),e[l]=Handler.gen(r.template[o],o,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template}),r.context.path.pop(),r.context.templatePath.pop(),a=o.match(Constant.RE_KEY),a&&a[2]&&Util.type(r.template[o])==="number"&&(r.template[o]+=parseInt(a[2],10))}return e},number:function(r){var e,n;if(r.rule.decimal){for(r.template+="",n=r.template.split("."),n[0]=r.rule.range?r.rule.count:n[0],n[1]=(n[1]||"").slice(0,r.rule.dcount);n[1].length<r.rule.dcount;)n[1]+=n[1].length<r.rule.dcount-1?Random.character("number"):Random.character("123456789");e=parseFloat(n.join("."),10)}else e=r.rule.range&&!r.rule.parameters[2]?r.rule.count:r.template;return e},boolean:function(r){var e;return e=r.rule.parameters?Random.bool(r.rule.min,r.rule.max,r.template):r.template,e},string:function(r){var e="",n,s,o,l;if(r.template.length){for(r.rule.count==null&&(e+=r.template),n=0;n<r.rule.count;n++)e+=r.template;for(s=e.match(Constant.RE_PLACEHOLDER)||[],n=0;n<s.length;n++){if(o=s[n],/^\\/.test(o)){s.splice(n--,1);continue}if(l=Handler.placeholder(o,r.context.currentContext,r.context.templateCurrentContext,r),s.length===1&&o===e&&typeof l!=typeof e){e=l;break}e=e.replace(o,l)}}else e=r.rule.range?Random.string(r.rule.count):r.template;return e},function:function(r){return r.template.call(r.context.currentContext,r)},regexp:function(r){var e="";r.rule.count==null&&(e+=r.template.source);for(var n=0;n<r.rule.count;n++)e+=r.template.source;return RE.Handler.gen(RE.Parser.parse(e))}}),Handler.extend({_all:function(){var r={};for(var e in Random)r[e.toLowerCase()]=e;return r},placeholder:function(placeholder,obj,templateContext,options){Constant.RE_PLACEHOLDER.exec("");var parts=Constant.RE_PLACEHOLDER.exec(placeholder),key=parts&&parts[1],lkey=key&&key.toLowerCase(),okey=this._all()[lkey],params=parts&&parts[2]||"",pathParts=this.splitPathToArray(key);try{params=eval("(function(){ return [].splice.call(arguments, 0 ) })("+params+")")}catch(r){params=parts[2].split(/,\s*/)}if(obj&&key in obj)return obj[key];if(key.charAt(0)==="/"||pathParts.length>1)return this.getValueByKeyPath(key,options);if(templateContext&&typeof templateContext=="object"&&key in templateContext&&placeholder!==templateContext[key])return templateContext[key]=Handler.gen(templateContext[key],key,{currentContext:obj,templateCurrentContext:templateContext}),templateContext[key];if(!(key in Random)&&!(lkey in Random)&&!(okey in Random))return placeholder;for(var i=0;i<params.length;i++)Constant.RE_PLACEHOLDER.exec(""),Constant.RE_PLACEHOLDER.test(params[i])&&(params[i]=Handler.placeholder(params[i],obj,templateContext,options));var handle=Random[key]||Random[lkey]||Random[okey];switch(Util.type(handle)){case"array":return Random.pick(handle);case"function":handle.options=options;var re=handle.apply(Random,params);return re===void 0&&(re=""),delete handle.options,re}},getValueByKeyPath:function(r,e){var n=r,s=this.splitPathToArray(r),o=[];r.charAt(0)==="/"?o=[e.context.path[0]].concat(this.normalizePath(s)):s.length>1&&(o=e.context.path.slice(0),o.pop(),o=this.normalizePath(o.concat(s)));try{r=s[s.length-1];for(var l=e.context.root,a=e.context.templateRoot,c=1;c<o.length-1;c++)l=l[o[c]],a=a[o[c]];if(l&&r in l)return l[r];if(a&&typeof a=="object"&&r in a&&n!==a[r])return a[r]=Handler.gen(a[r],r,{currentContext:l,templateCurrentContext:a}),a[r]}catch{}return"@"+s.join("/")},normalizePath:function(r){for(var e=[],n=0;n<r.length;n++)switch(r[n]){case"..":e.pop();break;case".":break;default:e.push(r[n])}return e},splitPathToArray:function(r){var e=r.split(/\/+/);return e[e.length-1]||(e=e.slice(0,-1)),e[0]||(e=e.slice(1)),e}}),module.exports=Handler},function(r,e){r.exports={GUID:1,RE_KEY:/(.+)\|(?:\+(\d+)|([\+\-]?\d+-?[\+\-]?\d*)?(?:\.(\d+-?\d*))?)/,RE_RANGE:/([\+\-]?\d+)-?([\+\-]?\d+)?/,RE_PLACEHOLDER:/\\*@([^@#%&()\?\s]+)(?:\((.*?)\))?/g}},function(r,e){var n={};n.extend=function(){var o=arguments[0]||{},l=1,a=arguments.length,c,u,f,d,g;for(a===1&&(o=this,l=0);l<a;l++)if(c=arguments[l],!!c)for(u in c)f=o[u],d=c[u],o!==d&&d!==void 0&&(n.isArray(d)||n.isObject(d)?(n.isArray(d)&&(g=f&&n.isArray(f)?f:[]),n.isObject(d)&&(g=f&&n.isObject(f)?f:{}),o[u]=n.extend(g,d)):o[u]=d);return o},n.each=function(o,l,a){var c,u;if(this.type(o)==="number")for(c=0;c<o;c++)l(c,c);else if(o.length===+o.length)for(c=0;c<o.length&&l.call(a,o[c],c,o)!==!1;c++);else for(u in o)if(l.call(a,o[u],u,o)===!1)break},n.type=function(o){return o==null?String(o):Object.prototype.toString.call(o).match(/\[object (\w+)\]/)[1].toLowerCase()},n.each("String Object Array RegExp Function".split(" "),function(s){n["is"+s]=function(o){return n.type(o)===s.toLowerCase()}}),n.isObjectOrArray=function(s){return n.isObject(s)||n.isArray(s)},n.isNumeric=function(s){return!isNaN(parseFloat(s))&&isFinite(s)},n.keys=function(s){var o=[];for(var l in s)s.hasOwnProperty(l)&&o.push(l);return o},n.values=function(s){var o=[];for(var l in s)s.hasOwnProperty(l)&&o.push(s[l]);return o},n.heredoc=function(o){return o.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"").replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")},n.noop=function(){},r.exports=n},function(r,e,n){var s=n(2),o=n(5);r.exports={parse:function(l){l=l==null?"":l+"";var a=(l||"").match(s.RE_KEY),c=a&&a[3]&&a[3].match(s.RE_RANGE),u=c&&c[1]&&parseInt(c[1],10),f=c&&c[2]&&parseInt(c[2],10),d=c?c[2]?o.integer(u,f):parseInt(c[1],10):void 0,g=a&&a[4]&&a[4].match(s.RE_RANGE),m=g&&g[1]&&parseInt(g[1],10),v=g&&g[2]&&parseInt(g[2],10),k=g?!g[2]&&parseInt(g[1],10)||o.integer(m,v):void 0,A={parameters:a,range:c,min:u,max:f,count:d,decimal:g,dmin:m,dmax:v,dcount:k};for(var E in A)if(A[E]!=null)return A;return{}}}},function(r,e,n){var s=n(3),o={extend:s.extend};o.extend(n(6)),o.extend(n(7)),o.extend(n(8)),o.extend(n(10)),o.extend(n(13)),o.extend(n(15)),o.extend(n(16)),o.extend(n(17)),o.extend(n(14)),o.extend(n(19)),r.exports=o},function(r,e){r.exports={boolean:function(n,s,o){return o!==void 0?(n=typeof n<"u"&&!isNaN(n)?parseInt(n,10):1,s=typeof s<"u"&&!isNaN(s)?parseInt(s,10):1,Math.random()>1/(n+s)*n?!o:o):Math.random()>=.5},bool:function(n,s,o){return this.boolean(n,s,o)},natural:function(n,s){return n=typeof n<"u"?parseInt(n,10):0,s=typeof s<"u"?parseInt(s,10):9007199254740992,Math.round(Math.random()*(s-n))+n},integer:function(n,s){return n=typeof n<"u"?parseInt(n,10):-9007199254740992,s=typeof s<"u"?parseInt(s,10):9007199254740992,Math.round(Math.random()*(s-n))+n},int:function(n,s){return this.integer(n,s)},float:function(n,s,o,l){o=o===void 0?0:o,o=Math.max(Math.min(o,17),0),l=l===void 0?17:l,l=Math.max(Math.min(l,17),0);for(var a=this.integer(n,s)+".",c=0,u=this.natural(o,l);c<u;c++)a+=c<u-1?this.character("number"):this.character("123456789");return parseFloat(a,10)},character:function(n){var s={lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",number:"0123456789",symbol:"!@#$%^&*()[]"};return s.alpha=s.lower+s.upper,s.undefined=s.lower+s.upper+s.number+s.symbol,n=s[(""+n).toLowerCase()]||n,n.charAt(this.natural(0,n.length-1))},char:function(n){return this.character(n)},string:function(n,s,o){var l;switch(arguments.length){case 0:l=this.natural(3,7);break;case 1:l=n,n=void 0;break;case 2:typeof arguments[0]=="string"?l=s:(l=this.natural(n,s),n=void 0);break;case 3:l=this.natural(s,o);break}for(var a="",c=0;c<l;c++)a+=this.character(n);return a},str:function(){return this.string.apply(this,arguments)},range:function(n,s,o){arguments.length<=1&&(s=n||0,n=0),o=arguments[2]||1,n=+n,s=+s,o=+o;for(var l=Math.max(Math.ceil((s-n)/o),0),a=0,c=new Array(l);a<l;)c[a++]=n,n+=o;return c}}},function(r,e){var n={yyyy:"getFullYear",yy:function(s){return(""+s.getFullYear()).slice(2)},y:"yy",MM:function(s){var o=s.getMonth()+1;return o<10?"0"+o:o},M:function(s){return s.getMonth()+1},dd:function(s){var o=s.getDate();return o<10?"0"+o:o},d:"getDate",HH:function(s){var o=s.getHours();return o<10?"0"+o:o},H:"getHours",hh:function(s){var o=s.getHours()%12;return o<10?"0"+o:o},h:function(s){return s.getHours()%12},mm:function(s){var o=s.getMinutes();return o<10?"0"+o:o},m:"getMinutes",ss:function(s){var o=s.getSeconds();return o<10?"0"+o:o},s:"getSeconds",SS:function(s){var o=s.getMilliseconds();return o<10&&"00"+o||o<100&&"0"+o||o},S:"getMilliseconds",A:function(s){return s.getHours()<12?"AM":"PM"},a:function(s){return s.getHours()<12?"am":"pm"},T:"getTime"};r.exports={_patternLetters:n,_rformat:new RegExp(function(){var s=[];for(var o in n)s.push(o);return"("+s.join("|")+")"}(),"g"),_formatDate:function(s,o){return o.replace(this._rformat,function l(a,c){return typeof n[c]=="function"?n[c](s):n[c]in n?l(a,n[c]):s[n[c]]()})},_randomDate:function(s,o){return s=s===void 0?new Date(0):s,o=o===void 0?new Date:o,new Date(Math.random()*(o.getTime()-s.getTime()))},date:function(s){return s=s||"yyyy-MM-dd",this._formatDate(this._randomDate(),s)},time:function(s){return s=s||"HH:mm:ss",this._formatDate(this._randomDate(),s)},datetime:function(s){return s=s||"yyyy-MM-dd HH:mm:ss",this._formatDate(this._randomDate(),s)},now:function(s,o){arguments.length===1&&(/year|month|day|hour|minute|second|week/.test(s)||(o=s,s="")),s=(s||"").toLowerCase(),o=o||"yyyy-MM-dd HH:mm:ss";var l=new Date;switch(s){case"year":l.setMonth(0);case"month":l.setDate(1);case"week":case"day":l.setHours(0);case"hour":l.setMinutes(0);case"minute":l.setSeconds(0);case"second":l.setMilliseconds(0)}switch(s){case"week":l.setDate(l.getDate()-l.getDay())}return this._formatDate(l,o)}}},function(r,e,n){(function(s){s.exports={_adSize:["300x250","250x250","240x400","336x280","180x150","720x300","468x60","234x60","88x31","120x90","120x60","120x240","125x125","728x90","160x600","120x600","300x600"],_screenSize:["320x200","320x240","640x480","800x480","800x480","1024x600","1024x768","1280x800","1440x900","1920x1200","2560x1600"],_videoSize:["720x480","768x576","1280x720","1920x1080"],image:function(o,l,a,c,u){return arguments.length===4&&(u=c,c=void 0),arguments.length===3&&(u=a,a=void 0),o||(o=this.pick(this._adSize)),l&&~l.indexOf("#")&&(l=l.slice(1)),a&&~a.indexOf("#")&&(a=a.slice(1)),"http://dummyimage.com/"+o+(l?"/"+l:"")+(a?"/"+a:"")+(c?"."+c:"")+(u?"&text="+u:"")},img:function(){return this.image.apply(this,arguments)},_brandColors:{"4ormat":"#fb0a2a","500px":"#02adea","About.me (blue)":"#00405d","About.me (yellow)":"#ffcc33",Addvocate:"#ff6138",Adobe:"#ff0000",Aim:"#fcd20b",Amazon:"#e47911",Android:"#a4c639","Angie's List":"#7fbb00",AOL:"#0060a3",Atlassian:"#003366",Behance:"#053eff","Big Cartel":"#97b538",bitly:"#ee6123",Blogger:"#fc4f08",Boeing:"#0039a6","Booking.com":"#003580",Carbonmade:"#613854",Cheddar:"#ff7243","Code School":"#3d4944",Delicious:"#205cc0",Dell:"#3287c1",Designmoo:"#e54a4f",Deviantart:"#4e6252","Designer News":"#2d72da",Devour:"#fd0001",DEWALT:"#febd17","Disqus (blue)":"#59a3fc","Disqus (orange)":"#db7132",Dribbble:"#ea4c89",Dropbox:"#3d9ae8",Drupal:"#0c76ab",Dunked:"#2a323a",eBay:"#89c507",Ember:"#f05e1b",Engadget:"#00bdf6",Envato:"#528036",Etsy:"#eb6d20",Evernote:"#5ba525","Fab.com":"#dd0017",Facebook:"#3b5998",Firefox:"#e66000","Flickr (blue)":"#0063dc","Flickr (pink)":"#ff0084",Forrst:"#5b9a68",Foursquare:"#25a0ca",Garmin:"#007cc3",GetGlue:"#2d75a2",Gimmebar:"#f70078",GitHub:"#171515","Google Blue":"#0140ca","Google Green":"#16a61e","Google Red":"#dd1812","Google Yellow":"#fcca03","Google+":"#dd4b39",Grooveshark:"#f77f00",Groupon:"#82b548","Hacker News":"#ff6600",HelloWallet:"#0085ca","Heroku (light)":"#c7c5e6","Heroku (dark)":"#6567a5",HootSuite:"#003366",Houzz:"#73ba37",HTML5:"#ec6231",IKEA:"#ffcc33",IMDb:"#f3ce13",Instagram:"#3f729b",Intel:"#0071c5",Intuit:"#365ebf",Kickstarter:"#76cc1e",kippt:"#e03500",Kodery:"#00af81",LastFM:"#c3000d",LinkedIn:"#0e76a8",Livestream:"#cf0005",Lumo:"#576396",Mixpanel:"#a086d3",Meetup:"#e51937",Nokia:"#183693",NVIDIA:"#76b900",Opera:"#cc0f16",Path:"#e41f11","PayPal (dark)":"#1e477a","PayPal (light)":"#3b7bbf",Pinboard:"#0000e6",Pinterest:"#c8232c",PlayStation:"#665cbe",Pocket:"#ee4056",Prezi:"#318bff",Pusha:"#0f71b4",Quora:"#a82400","QUOTE.fm":"#66ceff",Rdio:"#008fd5",Readability:"#9c0000","Red Hat":"#cc0000",Resource:"#7eb400",Rockpack:"#0ba6ab",Roon:"#62b0d9",RSS:"#ee802f",Salesforce:"#1798c1",Samsung:"#0c4da2",Shopify:"#96bf48",Skype:"#00aff0",Snagajob:"#f47a20",Softonic:"#008ace",SoundCloud:"#ff7700","Space Box":"#f86960",Spotify:"#81b71a",Sprint:"#fee100",Squarespace:"#121212",StackOverflow:"#ef8236",Staples:"#cc0000","Status Chart":"#d7584f",Stripe:"#008cdd",StudyBlue:"#00afe1",StumbleUpon:"#f74425","T-Mobile":"#ea0a8e",Technorati:"#40a800","The Next Web":"#ef4423",Treehouse:"#5cb868",Trulia:"#5eab1f",Tumblr:"#34526f","Twitch.tv":"#6441a5",Twitter:"#00acee",TYPO3:"#ff8700",Ubuntu:"#dd4814",Ustream:"#3388ff",Verizon:"#ef1d1d",Vimeo:"#86c9ef",Vine:"#00a478",Virb:"#06afd8","Virgin Media":"#cc0000",Wooga:"#5b009c","WordPress (blue)":"#21759b","WordPress (orange)":"#d54e21","WordPress (grey)":"#464646",Wunderlist:"#2b88d9",XBOX:"#9bc848",XING:"#126567","Yahoo!":"#720e9e",Yandex:"#ffcc00",Yelp:"#c41200",YouTube:"#c4302b",Zalongo:"#5498dc",Zendesk:"#78a300",Zerply:"#9dcc7a",Zootool:"#5e8b1d"},_brandNames:function(){var o=[];for(var l in this._brandColors)o.push(l);return o},dataImage:function(o,l){var a;if(typeof document<"u")a=document.createElement("canvas");else{var c=s.require("canvas");a=new c}var u=a&&a.getContext&&a.getContext("2d");if(!a||!u)return"";o||(o=this.pick(this._adSize)),l=l!==void 0?l:o,o=o.split("x");var f=parseInt(o[0],10),d=parseInt(o[1],10),g=this._brandColors[this.pick(this._brandNames())],m="#FFF",v=14,k="sans-serif";return a.width=f,a.height=d,u.textAlign="center",u.textBaseline="middle",u.fillStyle=g,u.fillRect(0,0,f,d),u.fillStyle=m,u.font="bold "+v+"px "+k,u.fillText(l,f/2,d/2,f),a.toDataURL("image/png")}}}).call(e,n(9)(r))},function(r,e){r.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children=[],n.webpackPolyfill=1),n}},function(r,e,n){var s=n(11),o=n(12);r.exports={color:function(l){return l||o[l]?o[l].nicer:this.hex()},hex:function(){var l=this._goldenRatioColor(),a=s.hsv2rgb(l),c=s.rgb2hex(a[0],a[1],a[2]);return c},rgb:function(){var l=this._goldenRatioColor(),a=s.hsv2rgb(l);return"rgb("+parseInt(a[0],10)+", "+parseInt(a[1],10)+", "+parseInt(a[2],10)+")"},rgba:function(){var l=this._goldenRatioColor(),a=s.hsv2rgb(l);return"rgba("+parseInt(a[0],10)+", "+parseInt(a[1],10)+", "+parseInt(a[2],10)+", "+Math.random().toFixed(2)+")"},hsl:function(){var l=this._goldenRatioColor(),a=s.hsv2hsl(l);return"hsl("+parseInt(a[0],10)+", "+parseInt(a[1],10)+", "+parseInt(a[2],10)+")"},_goldenRatioColor:function(l,a){return this._goldenRatio=.618033988749895,this._hue=this._hue||Math.random(),this._hue+=this._goldenRatio,this._hue%=1,typeof l!="number"&&(l=.5),typeof a!="number"&&(a=.95),[this._hue*360,l*100,a*100]}}},function(r,e){r.exports={rgb2hsl:function(s){var o=s[0]/255,l=s[1]/255,a=s[2]/255,c=Math.min(o,l,a),u=Math.max(o,l,a),f=u-c,d,g,m;return u==c?d=0:o==u?d=(l-a)/f:l==u?d=2+(a-o)/f:a==u&&(d=4+(o-l)/f),d=Math.min(d*60,360),d<0&&(d+=360),m=(c+u)/2,u==c?g=0:m<=.5?g=f/(u+c):g=f/(2-u-c),[d,g*100,m*100]},rgb2hsv:function(s){var o=s[0],l=s[1],a=s[2],c=Math.min(o,l,a),u=Math.max(o,l,a),f=u-c,d,g,m;return u===0?g=0:g=f/u*1e3/10,u==c?d=0:o==u?d=(l-a)/f:l==u?d=2+(a-o)/f:a==u&&(d=4+(o-l)/f),d=Math.min(d*60,360),d<0&&(d+=360),m=u/255*1e3/10,[d,g,m]},hsl2rgb:function(s){var o=s[0]/360,l=s[1]/100,a=s[2]/100,c,u,f,d,g;if(l===0)return g=a*255,[g,g,g];a<.5?u=a*(1+l):u=a+l-a*l,c=2*a-u,d=[0,0,0];for(var m=0;m<3;m++)f=o+1/3*-(m-1),f<0&&f++,f>1&&f--,6*f<1?g=c+(u-c)*6*f:2*f<1?g=u:3*f<2?g=c+(u-c)*(2/3-f)*6:g=c,d[m]=g*255;return d},hsl2hsv:function(s){var o=s[0],l=s[1]/100,a=s[2]/100,c,u;return a*=2,l*=a<=1?a:2-a,u=(a+l)/2,c=2*l/(a+l),[o,c*100,u*100]},hsv2rgb:function(s){var o=s[0]/60,l=s[1]/100,a=s[2]/100,c=Math.floor(o)%6,u=o-Math.floor(o),f=255*a*(1-l),d=255*a*(1-l*u),g=255*a*(1-l*(1-u));switch(a=255*a,c){case 0:return[a,g,f];case 1:return[d,a,f];case 2:return[f,a,g];case 3:return[f,d,a];case 4:return[g,f,a];case 5:return[a,f,d]}},hsv2hsl:function(s){var o=s[0],l=s[1]/100,a=s[2]/100,c,u;return u=(2-l)*a,c=l*a,c/=u<=1?u:2-u,u/=2,[o,c*100,u*100]},rgb2hex:function(n,s,o){return"#"+((256+n<<8|s)<<8|o).toString(16).slice(1)},hex2rgb:function(n){return n="0x"+n.slice(1).replace(n.length>4?n:/./g,"$&$&")|0,[n>>16,n>>8&255,n&255]}}},function(r,e){r.exports={navy:{value:"#000080",nicer:"#001F3F"},blue:{value:"#0000ff",nicer:"#0074D9"},aqua:{value:"#00ffff",nicer:"#7FDBFF"},teal:{value:"#008080",nicer:"#39CCCC"},olive:{value:"#008000",nicer:"#3D9970"},green:{value:"#008000",nicer:"#2ECC40"},lime:{value:"#00ff00",nicer:"#01FF70"},yellow:{value:"#ffff00",nicer:"#FFDC00"},orange:{value:"#ffa500",nicer:"#FF851B"},red:{value:"#ff0000",nicer:"#FF4136"},maroon:{value:"#800000",nicer:"#85144B"},fuchsia:{value:"#ff00ff",nicer:"#F012BE"},purple:{value:"#800080",nicer:"#B10DC9"},silver:{value:"#c0c0c0",nicer:"#DDDDDD"},gray:{value:"#808080",nicer:"#AAAAAA"},black:{value:"#000000",nicer:"#111111"},white:{value:"#FFFFFF",nicer:"#FFFFFF"}}},function(r,e,n){var s=n(6),o=n(14);function l(a,c,u,f){return u===void 0?s.natural(a,c):f===void 0?u:s.natural(parseInt(u,10),parseInt(f,10))}r.exports={paragraph:function(a,c){for(var u=l(3,7,a,c),f=[],d=0;d<u;d++)f.push(this.sentence());return f.join(" ")},cparagraph:function(a,c){for(var u=l(3,7,a,c),f=[],d=0;d<u;d++)f.push(this.csentence());return f.join("")},sentence:function(a,c){for(var u=l(12,18,a,c),f=[],d=0;d<u;d++)f.push(this.word());return o.capitalize(f.join(" "))+"."},csentence:function(a,c){for(var u=l(12,18,a,c),f=[],d=0;d<u;d++)f.push(this.cword());return f.join("")+""},word:function(a,c){for(var u=l(3,10,a,c),f="",d=0;d<u;d++)f+=s.character("lower");return f},cword:function(a,c,u){var f="",d;switch(arguments.length){case 0:a=f,d=1;break;case 1:typeof arguments[0]=="string"?d=1:(d=a,a=f);break;case 2:typeof arguments[0]=="string"?d=c:(d=this.natural(a,c),a=f);break;case 3:d=this.natural(c,u);break}for(var g="",m=0;m<d;m++)g+=a.charAt(this.natural(0,a.length-1));return g},title:function(a,c){for(var u=l(3,7,a,c),f=[],d=0;d<u;d++)f.push(this.capitalize(this.word()));return f.join(" ")},ctitle:function(a,c){for(var u=l(3,7,a,c),f=[],d=0;d<u;d++)f.push(this.cword());return f.join("")}}},function(r,e,n){var s=n(3);r.exports={capitalize:function(o){return(o+"").charAt(0).toUpperCase()+(o+"").substr(1)},upper:function(o){return(o+"").toUpperCase()},lower:function(o){return(o+"").toLowerCase()},pick:function(l,a,c){return s.isArray(l)?(a===void 0&&(a=1),c===void 0&&(c=a)):(l=[].slice.call(arguments),a=1,c=1),a===1&&c===1?l[this.natural(0,l.length-1)]:this.shuffle(l,a,c)},shuffle:function(l,a,c){l=l||[];for(var u=l.slice(0),f=[],d=0,g=u.length,m=0;m<g;m++)d=this.natural(0,u.length-1),f.push(u[d]),u.splice(d,1);switch(arguments.length){case 0:case 1:return f;case 2:c=a;case 3:return a=parseInt(a,10),c=parseInt(c,10),f.slice(0,this.natural(a,c))}},order:function o(l){o.cache=o.cache||{},arguments.length>1&&(l=[].slice.call(arguments,0));var a=o.options,c=a.context.templatePath.join("."),u=o.cache[c]=o.cache[c]||{index:0,array:l};return u.array[u.index++%u.array.length]}}},function(r,e){r.exports={first:function(){var n=["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas","Christopher","Daniel","Paul","Mark","Donald","George","Kenneth","Steven","Edward","Brian","Ronald","Anthony","Kevin","Jason","Matthew","Gary","Timothy","Jose","Larry","Jeffrey","Frank","Scott","Eric"].concat(["Mary","Patricia","Linda","Barbara","Elizabeth","Jennifer","Maria","Susan","Margaret","Dorothy","Lisa","Nancy","Karen","Betty","Helen","Sandra","Donna","Carol","Ruth","Sharon","Michelle","Laura","Sarah","Kimberly","Deborah","Jessica","Shirley","Cynthia","Angela","Melissa","Brenda","Amy","Anna"]);return this.pick(n)},last:function(){var n=["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen"];return this.pick(n)},name:function(n){return this.first()+" "+(n?this.first()+" ":"")+this.last()},cfirst:function(){var n="                                                                                                   ".split(" ");return this.pick(n)},clast:function(){var n="                      ".split(" ");return this.pick(n)},cname:function(){return this.cfirst()+this.clast()}}},function(r,e){r.exports={url:function(n,s){return(n||this.protocol())+"://"+(s||this.domain())+"/"+this.word()},protocol:function(){return this.pick("http ftp gopher mailto mid cid news nntp prospero telnet rlogin tn3270 wais".split(" "))},domain:function(n){return this.word()+"."+(n||this.tld())},tld:function(){return this.pick("com net org edu gov int mil cn com.cn net.cn gov.cn org.cn  . . tel biz cc tv info name hk mobi asia cd travel pro museum coop aero ad ae af ag ai al am an ao aq ar as at au aw az ba bb bd be bf bg bh bi bj bm bn bo br bs bt bv bw by bz ca cc cf cg ch ci ck cl cm cn co cq cr cu cv cx cy cz de dj dk dm do dz ec ee eg eh es et ev fi fj fk fm fo fr ga gb gd ge gf gh gi gl gm gn gp gr gt gu gw gy hk hm hn hr ht hu id ie il in io iq ir is it jm jo jp ke kg kh ki km kn kp kr kw ky kz la lb lc li lk lr ls lt lu lv ly ma mc md mg mh ml mm mn mo mp mq mr ms mt mv mw mx my mz na nc ne nf ng ni nl no np nr nt nu nz om qa pa pe pf pg ph pk pl pm pn pr pt pw py re ro ru rw sa sb sc sd se sg sh si sj sk sl sm sn so sr st su sy sz tc td tf tg th tj tk tm tn to tp tr tt tv tw tz ua ug uk us uy va vc ve vg vn vu wf ws ye yu za zm zr zw".split(" "))},email:function(n){return this.character("lower")+"."+this.word()+"@"+(n||this.word()+"."+this.tld())},ip:function(){return this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)}}},function(r,e,n){var s=n(18),o=["","","","","","",""];r.exports={region:function(){return this.pick(o)},province:function(){return this.pick(s).name},city:function(l){var a=this.pick(s),c=this.pick(a.children);return l?[a.name,c.name].join(" "):c.name},county:function(l){var a=this.pick(s),c=this.pick(a.children),u=this.pick(c.children)||{name:"-"};return l?[a.name,c.name,u.name].join(" "):u.name},zip:function(l){for(var a="",c=0;c<(l||6);c++)a+=this.natural(0,9);return a}}},function(r,e){var n={11e4:"",110100:"",110101:"",110102:"",110105:"",110106:"",110107:"",110108:"",110109:"",110111:"",110112:"",110113:"",110114:"",110115:"",110116:"",110117:"",110228:"",110229:"",110230:"",12e4:"",120100:"",120101:"",120102:"",120103:"",120104:"",120105:"",120106:"",120110:"",120111:"",120112:"",120113:"",120114:"",120115:"",120116:"",120221:"",120223:"",120225:"",120226:"",13e4:"",130100:"",130102:"",130103:"",130104:"",130105:"",130107:"",130108:"",130121:"",130123:"",130124:"",130125:"",130126:"",130127:"",130128:"",130129:"",130130:"",130131:"",130132:"",130133:"",130181:"",130182:"",130183:"",130184:"",130185:"",130186:"",130200:"",130202:"",130203:"",130204:"",130205:"",130207:"",130208:"",130223:"",130224:"",130225:"",130227:"",130229:"",130230:"",130281:"",130283:"",130284:"",130300:"",130302:"",130303:"",130304:"",130321:"",130322:"",130323:"",130324:"",130398:"",130400:"",130402:"",130403:"",130404:"",130406:"",130421:"",130423:"",130424:"",130425:"",130426:"",130427:"",130428:"",130429:"",130430:"",130431:"",130432:"",130433:"",130434:"",130435:"",130481:"",130482:"",130500:"",130502:"",130503:"",130521:"",130522:"",130523:"",130524:"",130525:"",130526:"",130527:"",130528:"",130529:"",130530:"",130531:"",130532:"",130533:"",130534:"",130535:"",130581:"",130582:"",130583:"",130600:"",130602:"",130603:"",130604:"",130621:"",130622:"",130623:"",130624:"",130625:"",130626:"",130627:"",130628:"",130629:"",130630:"",130631:"",130632:"",130633:"",130634:"",130635:"",130636:"",130637:"",130638:"",130681:"",130682:"",130683:"",130684:"",130699:"",130700:"",130702:"",130703:"",130705:"",130706:"",130721:"",130722:"",130723:"",130724:"",130725:"",130726:"",130727:"",130728:"",130729:"",130730:"",130731:"",130732:"",130733:"",130734:"",130800:"",130802:"",130803:"",130804:"",130821:"",130822:"",130823:"",130824:"",130825:"",130826:"",130827:"",130828:"",130829:"",130900:"",130902:"",130903:"",130921:"",130922:"",130923:"",130924:"",130925:"",130926:"",130927:"",130928:"",130929:"",130930:"",130981:"",130982:"",130983:"",130984:"",130985:"",131e3:"",131002:"",131003:"",131022:"",131023:"",131024:"",131025:"",131026:"",131028:"",131081:"",131082:"",131083:"",131100:"",131102:"",131121:"",131122:"",131123:"",131124:"",131125:"",131126:"",131127:"",131128:"",131181:"",131182:"",131183:"",14e4:"",140100:"",140105:"",140106:"",140107:"",140108:"",140109:"",140110:"",140121:"",140122:"",140123:"",140181:"",140182:"",140200:"",140202:"",140203:"",140211:"",140212:"",140221:"",140222:"",140223:"",140224:"",140225:"",140226:"",140227:"",140228:"",140300:"",140302:"",140303:"",140311:"",140321:"",140322:"",140323:"",140400:"",140421:"",140423:"",140424:"",140425:"",140426:"",140427:"",140428:"",140429:"",140430:"",140431:"",140481:"",140482:"",140483:"",140485:"",140500:"",140502:"",140521:"",140522:"",140524:"",140525:"",140581:"",140582:"",140600:"",140602:"",140603:"",140621:"",140622:"",140623:"",140624:"",140625:"",140700:"",140702:"",140721:"",140722:"",140723:"",140724:"",140725:"",140726:"",140727:"",140728:"",140729:"",140781:"",140782:"",140800:"",140802:"",140821:"",140822:"",140823:"",140824:"",140825:"",140826:"",140827:"",140828:"",140829:"",140830:"",140881:"",140882:"",140883:"",140900:"",140902:"",140921:"",140922:"",140923:"",140924:"",140925:"",140926:"",140927:"",140928:"",140929:"",140930:"",140931:"",140932:"",140981:"",140982:"",141e3:"",141002:"",141021:"",141022:"",141023:"",141024:"",141025:"",141026:"",141027:"",141028:"",141029:"",141030:"",141031:"",141032:"",141033:"",141034:"",141081:"",141082:"",141083:"",141100:"",141102:"",141121:"",141122:"",141123:"",141124:"",141125:"",141126:"",141127:"",141128:"",141129:"",141130:"",141181:"",141182:"",141183:"",15e4:"",150100:"",150102:"",150103:"",150104:"",150105:"",150121:"",150122:"",150123:"",150124:"",150125:"",150126:"",150200:"",150202:"",150203:"",150204:"",150205:"",150206:"",150207:"",150221:"",150222:"",150223:"",150224:"",150300:"",150302:"",150303:"",150304:"",150305:"",150400:"",150402:"",150403:"",150404:"",150421:"",150422:"",150423:"",150424:"",150425:"",150426:"",150428:"",150429:"",150430:"",150431:"",150500:"",150502:"",150521:"",150522:"",150523:"",150524:"",150525:"",150526:"",150581:"",150582:"",150600:"",150602:"",150621:"",150622:"",150623:"",150624:"",150625:"",150626:"",150627:"",150628:"",150700:"",150702:"",150703:"",150721:"",150722:"",150723:"",150724:"",150725:"",150726:"",150727:"",150781:"",150782:"",150783:"",150784:"",150785:"",150786:"",150800:"",150802:"",150821:"",150822:"",150823:"",150824:"",150825:"",150826:"",150827:"",150900:"",150902:"",150921:"",150922:"",150923:"",150924:"",150925:"",150926:"",150927:"",150928:"",150929:"",150981:"",150982:"",152200:"",152201:"",152202:"",152221:"",152222:"",152223:"",152224:"",152225:"",152500:"",152501:"",152502:"",152522:"",152523:"",152524:"",152525:"",152526:"",152527:"",152528:"",152529:"",152530:"",152531:"",152532:"",152900:"",152921:"",152922:"",152923:"",152924:"",21e4:"",210100:"",210102:"",210103:"",210104:"",210105:"",210106:"",210111:"",210112:"",210113:"",210114:"",210122:"",210123:"",210124:"",210181:"",210184:"",210185:"",210200:"",210202:"",210203:"",210204:"",210211:"",210212:"",210213:"",210224:"",210281:"",210282:"",210283:"",210298:"",210300:"",210302:"",210303:"",210304:"",210311:"",210321:"",210323:"",210381:"",210382:"",210400:"",210402:"",210403:"",210404:"",210411:"",210421:"",210422:"",210423:"",210424:"",210500:"",210502:"",210503:"",210504:"",210505:"",210521:"",210522:"",210523:"",210600:"",210602:"",210603:"",210604:"",210624:"",210681:"",210682:"",210683:"",210700:"",210702:"",210703:"",210711:"",210726:"",210727:"",210781:"",210782:"",210783:"",210800:"",210802:"",210803:"",210804:"",210811:"",210881:"",210882:"",210883:"",210900:"",210902:"",210903:"",210904:"",210905:"",210911:"",210921:"",210922:"",210923:"",211e3:"",211002:"",211003:"",211004:"",211005:"",211011:"",211021:"",211081:"",211082:"",211100:"",211102:"",211103:"",211121:"",211122:"",211123:"",211200:"",211202:"",211204:"",211221:"",211223:"",211224:"",211281:"",211282:"",211283:"",211300:"",211302:"",211303:"",211321:"",211322:"",211324:"",211381:"",211382:"",211383:"",211400:"",211402:"",211403:"",211404:"",211421:"",211422:"",211481:"",211482:"",22e4:"",220100:"",220102:"",220103:"",220104:"",220105:"",220106:"",220112:"",220122:"",220181:"",220182:"",220183:"",220188:"",220200:"",220202:"",220203:"",220204:"",220211:"",220221:"",220281:"",220282:"",220283:"",220284:"",220285:"",220300:"",220302:"",220303:"",220322:"",220323:"",220381:"",220382:"",220383:"",220400:"",220402:"",220403:"",220421:"",220422:"",220423:"",220500:"",220502:"",220503:"",220521:"",220523:"",220524:"",220581:"",220582:"",220583:"",220600:"",220602:"",220621:"",220622:"",220623:"",220625:"",220681:"",220682:"",220700:"",220702:"",220721:"",220722:"",220723:"",220724:"",220725:"",220800:"",220802:"",220821:"",220822:"",220881:"",220882:"",220883:"",222400:"",222401:"",222402:"",222403:"",222404:"",222405:"",222406:"",222424:"",222426:"",222427:"",23e4:"",230100:"",230102:"",230103:"",230104:"",230106:"",230108:"",230109:"",230111:"",230123:"",230124:"",230125:"",230126:"",230127:"",230128:"",230129:"",230181:"",230182:"",230183:"",230184:"",230186:"",230200:"",230202:"",230203:"",230204:"",230205:"",230206:"",230207:"",230208:"",230221:"",230223:"",230224:"",230225:"",230227:"",230229:"",230230:"",230231:"",230281:"",230282:"",230300:"",230302:"",230303:"",230304:"",230305:"",230306:"",230307:"",230321:"",230381:"",230382:"",230383:"",230400:"",230402:"",230403:"",230404:"",230405:"",230406:"",230407:"",230421:"",230422:"",230423:"",230500:"",230502:"",230503:"",230505:"",230506:"",230521:"",230522:"",230523:"",230524:"",230525:"",230600:"",230602:"",230603:"",230604:"",230605:"",230606:"",230621:"",230622:"",230623:"",230624:"",230625:"",230700:"",230702:"",230703:"",230704:"",230705:"",230706:"",230707:"",230708:"",230709:"",230710:"",230711:"",230712:"",230713:"",230714:"",230715:"",230716:"",230722:"",230781:"",230782:"",230800:"",230803:"",230804:"",230805:"",230811:"",230822:"",230826:"",230828:"",230833:"",230881:"",230882:"",230883:"",230900:"",230902:"",230903:"",230904:"",230921:"",230922:"",231e3:"",231002:"",231003:"",231004:"",231005:"",231024:"",231025:"",231081:"",231083:"",231084:"",231085:"",231086:"",231100:"",231102:"",231121:"",231123:"",231124:"",231181:"",231182:"",231183:"",231200:"",231202:"",231221:"",231222:"",231223:"",231224:"",231225:"",231226:"",231281:"",231282:"",231283:"",231284:"",232700:"",232702:"",232703:"",232704:"",232721:"",232722:"",232723:"",232724:"",232725:"",31e4:"",310100:"",310101:"",310104:"",310105:"",310106:"",310107:"",310108:"",310109:"",310110:"",310112:"",310113:"",310114:"",310115:"",310116:"",310117:"",310118:"",310120:"",310230:"",310231:"",32e4:"",320100:"",320102:"",320104:"",320105:"",320106:"",320111:"",320113:"",320114:"",320115:"",320116:"",320124:"",320125:"",320126:"",320200:"",320202:"",320203:"",320204:"",320205:"",320206:"",320211:"",320281:"",320282:"",320297:"",320300:"",320302:"",320303:"",320305:"",320311:"",320321:"",320322:"",320323:"",320324:"",320381:"",320382:"",320383:"",320400:"",320402:"",320404:"",320405:"",320411:"",320412:"",320481:"",320482:"",320483:"",320500:"",320505:"",320506:"",320507:"",320508:"",320581:"",320582:"",320583:"",320584:"",320585:"",320596:"",320600:"",320602:"",320611:"",320612:"",320621:"",320623:"",320681:"",320682:"",320684:"",320694:"",320700:"",320703:"",320705:"",320706:"",320721:"",320722:"",320723:"",320724:"",320725:"",320800:"",320802:"",320803:"",320804:"",320811:"",320826:"",320829:"",320830:"",320831:"",320832:"",320900:"",320902:"",320903:"",320921:"",320922:"",320923:"",320924:"",320925:"",320981:"",320982:"",320983:"",321e3:"",321002:"",321003:"",321023:"",321081:"",321084:"",321088:"",321093:"",321100:"",321102:"",321111:"",321112:"",321181:"",321182:"",321183:"",321184:"",321200:"",321202:"",321203:"",321281:"",321282:"",321283:"",321284:"",321285:"",321300:"",321302:"",321311:"",321322:"",321323:"",321324:"",321325:"",33e4:"",330100:"",330102:"",330103:"",330104:"",330105:"",330106:"",330108:"",330109:"",330110:"",330122:"",330127:"",330182:"",330183:"",330185:"",330186:"",330200:"",330203:"",330204:"",330205:"",330206:"",330211:"",330212:"",330225:"",330226:"",330281:"",330282:"",330283:"",330284:"",330300:"",330302:"",330303:"",330304:"",330322:"",330324:"",330326:"",330327:"",330328:"",330329:"",330381:"",330382:"",330383:"",330400:"",330402:"",330411:"",330421:"",330424:"",330481:"",330482:"",330483:"",330484:"",330500:"",330502:"",330503:"",330521:"",330522:"",330523:"",330524:"",330600:"",330602:"",330621:"",330624:"",330681:"",330682:"",330683:"",330684:"",330700:"",330702:"",330703:"",330723:"",330726:"",330727:"",330781:"",330782:"",330783:"",330784:"",330785:"",330800:"",330802:"",330803:"",330822:"",330824:"",330825:"",330881:"",330882:"",330900:"",330902:"",330903:"",330921:"",330922:"",330923:"",331e3:"",331002:"",331003:"",331004:"",331021:"",331022:"",331023:"",331024:"",331081:"",331082:"",331083:"",331100:"",331102:"",331121:"",331122:"",331123:"",331124:"",331125:"",331126:"",331127:"",331181:"",331182:"",34e4:"",340100:"",340102:"",340103:"",340104:"",340111:"",340121:"",340122:"",340123:"",340192:"",340200:"",340202:"",340203:"",340207:"",340208:"",340221:"",340222:"",340223:"",340224:"",340300:"",340302:"",340303:"",340304:"",340311:"",340321:"",340322:"",340323:"",340324:"",340400:"",340402:"",340403:"",340404:"",340405:"",340406:"",340421:"",340422:"",340500:"",340503:"",340504:"",340506:"",340521:"",340522:"",340600:"",340602:"",340603:"",340604:"",340621:"",340622:"",340700:"",340702:"",340703:"",340711:"",340721:"",340722:"",340800:"",340802:"",340803:"",340811:"",340822:"",340823:"",340824:"",340825:"",340826:"",340827:"",340828:"",340881:"",340882:"",341e3:"",341002:"",341003:"",341004:"",341021:"",341022:"",341023:"",341024:"",341025:"",341100:"",341102:"",341103:"",341122:"",341124:"",341125:"",341126:"",341181:"",341182:"",341183:"",341200:"",341202:"",341203:"",341204:"",341221:"",341222:"",341225:"",341226:"",341282:"",341283:"",341300:"",341302:"",341321:"",341322:"",341323:"",341324:"",341325:"",341400:"",341421:"",341422:"",341423:"",341424:"",341500:"",341502:"",341503:"",341521:"",341522:"",341523:"",341524:"",341525:"",341526:"",341600:"",341602:"",341621:"",341622:"",341623:"",341624:"",341700:"",341702:"",341721:"",341722:"",341723:"",341724:"",341800:"",341802:"",341821:"",341822:"",341823:"",341824:"",341825:"",341881:"",341882:"",35e4:"",350100:"",350102:"",350103:"",350104:"",350105:"",350111:"",350121:"",350122:"",350123:"",350124:"",350125:"",350128:"",350181:"",350182:"",350183:"",350200:"",350203:"",350205:"",350206:"",350211:"",350212:"",350213:"",350214:"",350300:"",350302:"",350303:"",350304:"",350305:"",350322:"",350323:"",350400:"",350402:"",350403:"",350421:"",350423:"",350424:"",350425:"",350426:"",350427:"",350428:"",350429:"",350430:"",350481:"",350482:"",350500:"",350502:"",350503:"",350504:"",350505:"",350521:"",350524:"",350525:"",350526:"",350527:"",350581:"",350582:"",350583:"",350584:"",350600:"",350602:"",350603:"",350622:"",350623:"",350624:"",350625:"",350626:"",350627:"",350628:"",350629:"",350681:"",350682:"",350700:"",350702:"",350721:"",350722:"",350723:"",350724:"",350725:"",350781:"",350782:"",350783:"",350784:"",350785:"",350800:"",350802:"",350821:"",350822:"",350823:"",350824:"",350825:"",350881:"",350882:"",350900:"",350902:"",350921:"",350922:"",350923:"",350924:"",350925:"",350926:"",350981:"",350982:"",350983:"",36e4:"",360100:"",360102:"",360103:"",360104:"",360105:"",360111:"",360121:"",360122:"",360123:"",360124:"",360128:"",360200:"",360202:"",360203:"",360222:"",360281:"",360282:"",360300:"",360302:"",360313:"",360321:"",360322:"",360323:"",360324:"",360400:"",360402:"",360403:"",360421:"",360423:"",360424:"",360425:"",360426:"",360427:"",360428:"",360429:"",360430:"",360481:"",360482:"",360483:"",360500:"",360502:"",360521:"",360522:"",360600:"",360602:"",360622:"",360681:"",360682:"",360700:"",360702:"",360721:"",360722:"",360723:"",360724:"",360725:"",360726:"",360727:"",360728:"",360729:"",360730:"",360731:"",360732:"",360733:"",360734:"",360735:"",360781:"",360782:"",360783:"",360800:"",360802:"",360803:"",360821:"",360822:"",360823:"",360824:"",360825:"",360826:"",360827:"",360828:"",360829:"",360830:"",360881:"",360882:"",360900:"",360902:"",360921:"",360922:"",360923:"",360924:"",360925:"",360926:"",360981:"",360982:"",360983:"",360984:"",361e3:"",361002:"",361021:"",361022:"",361023:"",361024:"",361025:"",361026:"",361027:"",361028:"",361029:"",361030:"",361031:"",361100:"",361102:"",361121:"",361122:"",361123:"",361124:"",361125:"",361126:"",361127:"",361128:"",361129:"",361130:"",361181:"",361182:"",37e4:"",370100:"",370102:"",370103:"",370104:"",370105:"",370112:"",370113:"",370124:"",370125:"",370126:"",370181:"",370182:"",370200:"",370202:"",370203:"",370211:"",370212:"",370213:"",370214:"",370281:"",370282:"",370283:"",370285:"",370286:"",370300:"",370302:"",370303:"",370304:"",370305:"",370306:"",370321:"",370322:"",370323:"",370324:"",370400:"",370402:"",370403:"",370404:"",370405:"",370406:"",370481:"",370482:"",370500:"",370502:"",370503:"",370521:"",370522:"",370523:"",370591:"",370600:"",370602:"",370611:"",370612:"",370613:"",370634:"",370681:"",370682:"",370683:"",370684:"",370685:"",370686:"",370687:"",370688:"",370700:"",370702:"",370703:"",370704:"",370705:"",370724:"",370725:"",370781:"",370782:"",370783:"",370784:"",370785:"",370786:"",370787:"",370800:"",370802:"",370811:"",370826:"",370827:"",370828:"",370829:"",370830:"",370831:"",370832:"",370881:"",370882:"",370883:"",370884:"",370900:"",370902:"",370903:"",370921:"",370923:"",370982:"",370983:"",370984:"",371e3:"",371002:"",371081:"",371082:"",371083:"",371084:"",371100:"",371102:"",371103:"",371121:"",371122:"",371123:"",371200:"",371202:"",371203:"",371204:"",371300:"",371302:"",371311:"",371312:"",371321:"",371322:"",371323:"",371324:"",371325:"",371326:"",371327:"",371328:"",371329:"",371330:"",371400:"",371402:"",371421:"",371422:"",371423:"",371424:"",371425:"",371426:"",371427:"",371428:"",371481:"",371482:"",371483:"",371500:"",371502:"",371521:"",371522:"",371523:"",371524:"",371525:"",371526:"",371581:"",371582:"",371600:"",371602:"",371621:"",371622:"",371623:"",371624:"",371625:"",371626:"",371627:"",371700:"",371702:"",371721:"",371722:"",371723:"",371724:"",371725:"",371726:"",371727:"",371728:"",371729:"",41e4:"",410100:"",410102:"",410103:"",410104:"",410105:"",410106:"",410108:"",410122:"",410181:"",410182:"",410183:"",410184:"",410185:"",410188:"",410200:"",410202:"",410203:"",410204:"",410205:"",410211:"",410221:"",410222:"",410223:"",410224:"",410225:"",410226:"",410300:"",410302:"",410303:"",410304:"",410305:"",410306:"",410307:"",410322:"",410323:"",410324:"",410325:"",410326:"",410327:"",410328:"",410329:"",410381:"",410400:"",410402:"",410403:"",410404:"",410411:"",410421:"",410422:"",410423:"",410425:"",410481:"",410482:"",410483:"",410500:"",410502:"",410503:"",410505:"",410506:"",410522:"",410523:"",410526:"",410527:"",410581:"",410582:"",410600:"",410602:"",410603:"",410611:"",410621:"",410622:"",410623:"",410700:"",410702:"",410703:"",410704:"",410711:"",410721:"",410724:"",410725:"",410726:"",410727:"",410728:"",410781:"",410782:"",410783:"",410800:"",410802:"",410803:"",410804:"",410811:"",410821:"",410822:"",410823:"",410825:"",410881:"",410882:"",410883:"",410884:"",410900:"",410902:"",410922:"",410923:"",410926:"",410927:"",410928:"",410929:"",411e3:"",411002:"",411023:"",411024:"",411025:"",411081:"",411082:"",411083:"",411100:"",411102:"",411103:"",411104:"",411121:"",411122:"",411123:"",411200:"",411202:"",411221:"",411222:"",411224:"",411281:"",411282:"",411283:"",411300:"",411302:"",411303:"",411321:"",411322:"",411323:"",411324:"",411325:"",411326:"",411327:"",411328:"",411329:"",411330:"",411381:"",411382:"",411400:"",411402:"",411403:"",411421:"",411422:"",411423:"",411424:"",411425:"",411426:"",411481:"",411482:"",411500:"",411502:"",411503:"",411521:"",411522:"",411523:"",411524:"",411525:"",411526:"",411527:"",411528:"",411529:"",411600:"",411602:"",411621:"",411622:"",411623:"",411624:"",411625:"",411626:"",411627:"",411628:"",411681:"",411682:"",411700:"",411702:"",411721:"",411722:"",411723:"",411724:"",411725:"",411726:"",411727:"",411728:"",411729:"",411730:"",42e4:"",420100:"",420102:"",420103:"",420104:"",420105:"",420106:"",420107:"",420111:"",420112:"",420113:"",420114:"",420115:"",420116:"",420117:"",420118:"",420200:"",420202:"",420203:"",420204:"",420205:"",420222:"",420281:"",420282:"",420300:"",420302:"",420303:"",420321:"",420322:"",420323:"",420324:"",420325:"",420381:"",420383:"",420500:"",420502:"",420503:"",420504:"",420505:"",420506:"",420525:"",420526:"",420527:"",420528:"",420529:"",420581:"",420582:"",420583:"",420584:"",420600:"",420602:"",420606:"",420607:"",420624:"",420625:"",420626:"",420682:"",420683:"",420684:"",420685:"",420700:"",420702:"",420703:"",420704:"",420705:"",420800:"",420802:"",420804:"",420821:"",420822:"",420881:"",420882:"",420900:"",420902:"",420921:"",420922:"",420923:"",420981:"",420982:"",420984:"",420985:"",421e3:"",421002:"",421003:"",421022:"",421023:"",421024:"",421081:"",421083:"",421087:"",421088:"",421100:"",421102:"",421121:"",421122:"",421123:"",421124:"",421125:"",421126:"",421127:"",421181:"",421182:"",421183:"",421200:"",421202:"",421221:"",421222:"",421223:"",421224:"",421281:"",421283:"",421300:"",421302:"",421321:"",421381:"",421382:"",422800:"",422801:"",422802:"",422822:"",422823:"",422825:"",422826:"",422827:"",422828:"",422829:"",429004:"",429005:"",429006:"",429021:"",43e4:"",430100:"",430102:"",430103:"",430104:"",430105:"",430111:"",430121:"",430122:"",430124:"",430181:"",430182:"",430200:"",430202:"",430203:"",430204:"",430211:"",430221:"",430223:"",430224:"",430225:"",430281:"",430282:"",430300:"",430302:"",430304:"",430321:"",430381:"",430382:"",430383:"",430400:"",430405:"",430406:"",430407:"",430408:"",430412:"",430421:"",430422:"",430423:"",430424:"",430426:"",430481:"",430482:"",430483:"",430500:"",430502:"",430503:"",430511:"",430521:"",430522:"",430523:"",430524:"",430525:"",430527:"",430528:"",430529:"",430581:"",430582:"",430600:"",430602:"",430603:"",430611:"",430621:"",430623:"",430624:"",430626:"",430681:"",430682:"",430683:"",430700:"",430702:"",430703:"",430721:"",430722:"",430723:"",430724:"",430725:"",430726:"",430781:"",430782:"",430800:"",430802:"",430811:"",430821:"",430822:"",430823:"",430900:"",430902:"",430903:"",430921:"",430922:"",430923:"",430981:"",430982:"",431e3:"",431002:"",431003:"",431021:"",431022:"",431023:"",431024:"",431025:"",431026:"",431027:"",431028:"",431081:"",431082:"",431100:"",431102:"",431103:"",431121:"",431122:"",431123:"",431124:"",431125:"",431126:"",431127:"",431128:"",431129:"",431130:"",431200:"",431202:"",431221:"",431222:"",431223:"",431224:"",431225:"",431226:"",431227:"",431228:"",431229:"",431230:"",431281:"",431282:"",431300:"",431302:"",431321:"",431322:"",431381:"",431382:"",431383:"",433100:"",433101:"",433122:"",433123:"",433124:"",433125:"",433126:"",433127:"",433130:"",433131:"",44e4:"",440100:"",440103:"",440104:"",440105:"",440106:"",440111:"",440112:"",440113:"",440114:"",440115:"",440116:"",440183:"",440184:"",440189:"",440200:"",440203:"",440204:"",440205:"",440222:"",440224:"",440229:"",440232:"",440233:"",440281:"",440282:"",440283:"",440300:"",440303:"",440304:"",440305:"",440306:"",440307:"",440308:"",440309:"",440320:"",440321:"",440322:"",440323:"",440400:"",440402:"",440403:"",440404:"",440488:"",440500:"",440507:"",440511:"",440512:"",440513:"",440514:"",440515:"",440523:"",440524:"",440600:"",440604:"",440605:"",440606:"",440607:"",440608:"",440609:"",440700:"",440703:"",440704:"",440705:"",440781:"",440783:"",440784:"",440785:"",440786:"",440800:"",440802:"",440803:"",440804:"",440811:"",440823:"",440825:"",440881:"",440882:"",440883:"",440884:"",440900:"",440902:"",440903:"",440923:"",440981:"",440982:"",440983:"",440984:"",441200:"",441202:"",441203:"",441223:"",441224:"",441225:"",441226:"",441283:"",441284:"",441285:"",441300:"",441302:"",441303:"",441322:"",441323:"",441324:"",441325:"",441400:"",441402:"",441421:"",441422:"",441423:"",441424:"",441426:"",441427:"",441481:"",441482:"",441500:"",441502:"",441521:"",441523:"",441581:"",441582:"",441600:"",441602:"",441621:"",441622:"",441623:"",441624:"",441625:"",441626:"",441700:"",441702:"",441721:"",441723:"",441781:"",441782:"",441800:"",441802:"",441821:"",441823:"",441825:"",441826:"",441827:"",441881:"",441882:"",441883:"",441900:"",442e3:"",442101:"",445100:"",445102:"",445121:"",445122:"",445186:"",445200:"",445202:"",445221:"",445222:"",445224:"",445281:"",445285:"",445300:"",445302:"",445321:"",445322:"",445323:"",445381:"",445382:"",45e4:"",450100:"",450102:"",450103:"",450105:"",450107:"",450108:"",450109:"",450122:"",450123:"",450124:"",450125:"",450126:"",450127:"",450128:"",450200:"",450202:"",450203:"",450204:"",450205:"",450221:"",450222:"",450223:"",450224:"",450225:"",450226:"",450227:"",450300:"",450302:"",450303:"",450304:"",450305:"",450311:"",450321:"",450322:"",450323:"",450324:"",450325:"",450326:"",450327:"",450328:"",450329:"",450330:"",450331:"",450332:"",450333:"",450400:"",450403:"",450405:"",450406:"",450421:"",450422:"",450423:"",450481:"",450482:"",450500:"",450502:"",450503:"",450512:"",450521:"",450522:"",450600:"",450602:"",450603:"",450621:"",450681:"",450682:"",450700:"",450702:"",450703:"",450721:"",450722:"",450723:"",450800:"",450802:"",450803:"",450804:"",450821:"",450881:"",450882:"",450900:"",450902:"",450903:"",450921:"",450922:"",450923:"",450924:"",450981:"",450982:"",451e3:"",451002:"",451021:"",451022:"",451023:"",451024:"",451025:"",451026:"",451027:"",451028:"",451029:"",451030:"",451031:"",451032:"",451100:"",451102:"",451119:"",451121:"",451122:"",451123:"",451124:"",451200:"",451202:"",451221:"",451222:"",451223:"",451224:"",451225:"",451226:"",451227:"",451228:"",451229:"",451281:"",451282:"",451300:"",451302:"",451321:"",451322:"",451323:"",451324:"",451381:"",451382:"",451400:"",451402:"",451421:"",451422:"",451423:"",451424:"",451425:"",451481:"",451482:"",46e4:"",460100:"",460105:"",460106:"",460107:"",460108:"",460109:"",460200:"",460300:"",460321:"",460322:"",460323:"",469001:"",469002:"",469003:"",469005:"",469006:"",469007:"",469025:"",469026:"",469027:"",469028:"",469030:"",469031:"",469033:"",469034:"",469035:"",469036:"",471005:"",5e5:"",500100:"",500101:"",500102:"",500103:"",500104:"",500105:"",500106:"",500107:"",500108:"",500109:"",500110:"",500111:"",500112:"",500113:"",500114:"",500115:"",500222:"",500223:"",500224:"",500225:"",500226:"",500227:"",500228:"",500229:"",500230:"",500231:"",500232:"",500233:"",500234:"",500235:"",500236:"",500237:"",500238:"",500240:"",500241:"",500242:"",500243:"",500381:"",500382:"",500383:"",500384:"",500385:"",51e4:"",510100:"",510104:"",510105:"",510106:"",510107:"",510108:"",510112:"",510113:"",510114:"",510115:"",510121:"",510122:"",510124:"",510129:"",510131:"",510132:"",510181:"",510182:"",510183:"",510184:"",510185:"",510300:"",510302:"",510303:"",510304:"",510311:"",510321:"",510322:"",510323:"",510400:"",510402:"",510403:"",510411:"",510421:"",510422:"",510423:"",510500:"",510502:"",510503:"",510504:"",510521:"",510522:"",510524:"",510525:"",510526:"",510600:"",510603:"",510623:"",510626:"",510681:"",510682:"",510683:"",510684:"",510700:"",510703:"",510704:"",510722:"",510723:"",510724:"",510725:"",510726:"",510727:"",510781:"",510782:"",510800:"",510802:"",510811:"",510812:"",510821:"",510822:"",510823:"",510824:"",510825:"",510900:"",510903:"",510904:"",510921:"",510922:"",510923:"",510924:"",511e3:"",511002:"",511011:"",511024:"",511025:"",511028:"",511029:"",511100:"",511102:"",511111:"",511112:"",511113:"",511123:"",511124:"",511126:"",511129:"",511132:"",511133:"",511181:"",511182:"",511300:"",511302:"",511303:"",511304:"",511321:"",511322:"",511323:"",511324:"",511325:"",511381:"",511382:"",511400:"",511402:"",511421:"",511422:"",511423:"",511424:"",511425:"",511426:"",511500:"",511502:"",511521:"",511522:"",511523:"",511524:"",511525:"",511526:"",511527:"",511528:"",511529:"",511530:"",511600:"",511602:"",511603:"",511621:"",511622:"",511623:"",511681:"",511683:"",511700:"",511702:"",511721:"",511722:"",511723:"",511724:"",511725:"",511781:"",511782:"",511800:"",511802:"",511821:"",511822:"",511823:"",511824:"",511825:"",511826:"",511827:"",511828:"",511900:"",511902:"",511903:"",511921:"",511922:"",511923:"",511924:"",512e3:"",512002:"",512021:"",512022:"",512081:"",512082:"",513200:"",513221:"",513222:"",513223:"",513224:"",513225:"",513226:"",513227:"",513228:"",513229:"",513230:"",513231:"",513232:"",513233:"",513234:"",513300:"",513321:"",513322:"",513323:"",513324:"",513325:"",513326:"",513327:"",513328:"",513329:"",513330:"",513331:"",513332:"",513333:"",513334:"",513335:"",513336:"",513337:"",513338:"",513339:"",513400:"",513401:"",513422:"",513423:"",513424:"",513425:"",513426:"",513427:"",513428:"",513429:"",513430:"",513431:"",513432:"",513433:"",513434:"",513435:"",513436:"",513437:"",513438:"",52e4:"",520100:"",520102:"",520103:"",520111:"",520112:"",520113:"",520121:"",520122:"",520123:"",520151:"",520181:"",520182:"",520200:"",520201:"",520203:"",520221:"",520222:"",520223:"",520300:"",520302:"",520303:"",520321:"",520322:"",520323:"",520324:"",520325:"",520326:"",520327:"",520328:"",520329:"",520330:"",520381:"",520382:"",520383:"",520400:"",520402:"",520421:"",520422:"",520423:"",520424:"",520425:"",520426:"",522200:"",522201:"",522222:"",522223:"",522224:"",522225:"",522226:"",522227:"",522228:"",522229:"",522230:"",522231:"",522300:"",522301:"",522322:"",522323:"",522324:"",522325:"",522326:"",522327:"",522328:"",522329:"",522400:"",522401:"",522422:"",522423:"",522424:"",522425:"",522426:"",522427:"",522428:"",522429:"",522600:"",522601:"",522622:"",522623:"",522624:"",522625:"",522626:"",522627:"",522628:"",522629:"",522630:"",522631:"",522632:"",522633:"",522634:"",522635:"",522636:"",522637:"",522700:"",522701:"",522702:"",522722:"",522723:"",522725:"",522726:"",522727:"",522728:"",522729:"",522730:"",522731:"",522732:"",522733:"",53e4:"",530100:"",530102:"",530103:"",530111:"",530112:"",530113:"",530121:"",530122:"",530124:"",530125:"",530126:"",530127:"",530128:"",530129:"",530181:"",530182:"",530300:"",530302:"",530321:"",530322:"",530323:"",530324:"",530325:"",530326:"",530328:"",530381:"",530382:"",530400:"",530402:"",530421:"",530422:"",530423:"",530424:"",530425:"",530426:"",530427:"",530428:"",530429:"",530500:"",530502:"",530521:"",530522:"",530523:"",530524:"",530525:"",530600:"",530602:"",530621:"",530622:"",530623:"",530624:"",530625:"",530626:"",530627:"",530628:"",530629:"",530630:"",530631:"",530700:"",530702:"",530721:"",530722:"",530723:"",530724:"",530725:"",530800:"",530802:"",530821:"",530822:"",530823:"",530824:"",530825:"",530826:"",530827:"",530828:"",530829:"",530830:"",530900:"",530902:"",530921:"",530922:"",530923:"",530924:"",530925:"",530926:"",530927:"",530928:"",532300:"",532301:"",532322:"",532323:"",532324:"",532325:"",532326:"",532327:"",532328:"",532329:"",532331:"",532332:"",532500:"",532501:"",532502:"",532522:"",532523:"",532524:"",532525:"",532526:"",532527:"",532528:"",532529:"",532530:"",532531:"",532532:"",532533:"",532600:"",532621:"",532622:"",532623:"",532624:"",532625:"",532626:"",532627:"",532628:"",532629:"",532800:"",532801:"",532822:"",532823:"",532824:"",532900:"",532901:"",532922:"",532923:"",532924:"",532925:"",532926:"",532927:"",532928:"",532929:"",532930:"",532931:"",532932:"",532933:"",533100:"",533102:"",533103:"",533122:"",533123:"",533124:"",533125:"",533300:"",533321:"",533323:"",533324:"",533325:"",533326:"",533400:"",533421:"",533422:"",533423:"",533424:"",54e4:"",540100:"",540102:"",540121:"",540122:"",540123:"",540124:"",540125:"",540126:"",540127:"",540128:"",542100:"",542121:"",542122:"",542123:"",542124:"",542125:"",542126:"",542127:"",542128:"",542129:"",542132:"",542133:"",542134:"",542200:"",542221:"",542222:"",542223:"",542224:"",542225:"",542226:"",542227:"",542228:"",542229:"",542231:"",542232:"",542233:"",542234:"",542300:"",542301:"",542322:"",542323:"",542324:"",542325:"",542326:"",542327:"",542328:"",542329:"",542330:"",542331:"",542332:"",542333:"",542334:"",542335:"",542336:"",542337:"",542338:"",542339:"",542400:"",542421:"",542422:"",542423:"",542424:"",542425:"",542426:"",542427:"",542428:"",542429:"",542430:"",542431:"",542432:"",542500:"",542521:"",542522:"",542523:"",542524:"",542525:"",542526:"",542527:"",542528:"",542600:"",542621:"",542622:"",542623:"",542624:"",542625:"",542626:"",542627:"",542628:"",61e4:"",610100:"",610102:"",610103:"",610104:"",610111:"",610112:"",610113:"",610114:"",610115:"",610116:"",610122:"",610124:"",610125:"",610126:"",610127:"",610200:"",610202:"",610203:"",610204:"",610222:"",610223:"",610300:"",610302:"",610303:"",610304:"",610322:"",610323:"",610324:"",610326:"",610327:"",610328:"",610329:"",610330:"",610331:"",610332:"",610400:"",610402:"",610403:"",610404:"",610422:"",610423:"",610424:"",610425:"",610426:"",610427:"",610428:"",610429:"",610430:"",610431:"",610481:"",610482:"",610500:"",610502:"",610521:"",610522:"",610523:"",610524:"",610525:"",610526:"",610527:"",610528:"",610581:"",610582:"",610583:"",610600:"",610602:"",610621:"",610622:"",610623:"",610624:"",610625:"",610626:"",610627:"",610628:"",610629:"",610630:"",610631:"",610632:"",610633:"",610700:"",610702:"",610721:"",610722:"",610723:"",610724:"",610725:"",610726:"",610727:"",610728:"",610729:"",610730:"",610731:"",610800:"",610802:"",610821:"",610822:"",610823:"",610824:"",610825:"",610826:"",610827:"",610828:"",610829:"",610830:"",610831:"",610832:"",610900:"",610902:"",610921:"",610922:"",610923:"",610924:"",610925:"",610926:"",610927:"",610928:"",610929:"",610930:"",611e3:"",611002:"",611021:"",611022:"",611023:"",611024:"",611025:"",611026:"",611027:"",62e4:"",620100:"",620102:"",620103:"",620104:"",620105:"",620111:"",620121:"",620122:"",620123:"",620124:"",620200:"",620300:"",620302:"",620321:"",620322:"",620400:"",620402:"",620403:"",620421:"",620422:"",620423:"",620424:"",620500:"",620502:"",620503:"",620521:"",620522:"",620523:"",620524:"",620525:"",620526:"",620600:"",620602:"",620621:"",620622:"",620623:"",620624:"",620700:"",620702:"",620721:"",620722:"",620723:"",620724:"",620725:"",620726:"",620800:"",620802:"",620821:"",620822:"",620823:"",620824:"",620825:"",620826:"",620827:"",620900:"",620902:"",620921:"",620922:"",620923:"",620924:"",620981:"",620982:"",620983:"",621e3:"",621002:"",621021:"",621022:"",621023:"",621024:"",621025:"",621026:"",621027:"",621028:"",621100:"",621102:"",621121:"",621122:"",621123:"",621124:"",621125:"",621126:"",621127:"",621200:"",621202:"",621221:"",621222:"",621223:"",621224:"",621225:"",621226:"",621227:"",621228:"",621229:"",622900:"",622901:"",622921:"",622922:"",622923:"",622924:"",622925:"",622926:"",622927:"",622928:"",623e3:"",623001:"",623021:"",623022:"",623023:"",623024:"",623025:"",623026:"",623027:"",623028:"",63e4:"",630100:"",630102:"",630103:"",630104:"",630105:"",630121:"",630122:"",630123:"",630124:"",632100:"",632121:"",632122:"",632123:"",632126:"",632127:"",632128:"",632129:"",632200:"",632221:"",632222:"",632223:"",632224:"",632225:"",632300:"",632321:"",632322:"",632323:"",632324:"",632325:"",632500:"",632521:"",632522:"",632523:"",632524:"",632525:"",632526:"",632600:"",632621:"",632622:"",632623:"",632624:"",632625:"",632626:"",632627:"",632700:"",632721:"",632722:"",632723:"",632724:"",632725:"",632726:"",632727:"",632800:"",632801:"",632802:"",632821:"",632822:"",632823:"",632824:"",64e4:"",640100:"",640104:"",640105:"",640106:"",640121:"",640122:"",640181:"",640182:"",640200:"",640202:"",640205:"",640221:"",640222:"",640300:"",640302:"",640303:"",640323:"",640324:"",640381:"",640382:"",640400:"",640402:"",640422:"",640423:"",640424:"",640425:"",640426:"",640500:"",640502:"",640521:"",640522:"",640523:"",65e4:"",650100:"",650102:"",650103:"",650104:"",650105:"",650106:"",650107:"",650109:"",650121:"",650122:"",650200:"",650202:"",650203:"",650204:"",650205:"",650206:"",652100:"",652101:"",652122:"",652123:"",652124:"",652200:"",652201:"",652222:"",652223:"",652224:"",652300:"",652301:"",652302:"",652323:"",652324:"",652325:"",652327:"",652328:"",652329:"",652700:"",652701:"",652702:"",652722:"",652723:"",652724:"",652800:"",652801:"",652822:"",652823:"",652824:"",652825:"",652826:"",652827:"",652828:"",652829:"",652830:"",652900:"",652901:"",652922:"",652923:"",652924:"",652925:"",652926:"",652927:"",652928:"",652929:"",652930:"",653e3:"",653001:"",653022:"",653023:"",653024:"",653025:"",653100:"",653101:"",653121:"",653122:"",653123:"",653124:"",653125:"",653126:"",653127:"",653128:"",653129:"",653130:"",653131:"",653132:"",653200:"",653201:"",653221:"",653222:"",653223:"",653224:"",653225:"",653226:"",653227:"",653228:"",654e3:"",654002:"",654003:"",654021:"",654022:"",654023:"",654024:"",654025:"",654026:"",654027:"",654028:"",654029:"",654200:"",654201:"",654202:"",654221:"",654223:"",654224:"",654225:"",654226:"",654227:"",654300:"",654301:"",654321:"",654322:"",654323:"",654324:"",654325:"",654326:"",654327:"",659001:"",659002:"",659003:"",659004:"",71e4:"",710100:"",710101:"",710102:"",710103:"",710104:"",710105:"",710106:"",710107:"",710108:"",710109:"",710110:"",710111:"",710112:"",710113:"",710200:"",710201:"",710202:"",710203:"",710204:"",710205:"",710206:"",710207:"",710208:"",710209:"",710210:"",710211:"",710212:"",710241:"",710242:"",710243:"",710244:"",710245:"",710246:"",710247:"",710248:"",710249:"",710250:"",710251:"",710252:"",710253:"",710254:"",710255:"",710256:"",710257:"",710258:"",710259:"",710260:"",710261:"",710262:"",710263:"",710264:"",710265:"",710266:"",710267:"",710268:"",710300:"",710301:"",710302:"",710303:"",710304:"",710305:"",710306:"",710307:"",710339:"",710340:"",710341:"",710342:"",710343:"",710344:"",710345:"",710346:"",710347:"",710348:"",710349:"",710350:"",710351:"",710352:"",710353:"",710354:"",710355:"",710356:"",710357:"",710358:"",710359:"",710360:"",710361:"",710362:"",710363:"",710364:"",710365:"",710366:"",710367:"",710368:"",710369:"",710400:"",710401:"",710402:"",710403:"",710404:"",710405:"",710406:"",710407:"",710408:"",710409:"",710431:"",710432:"",710433:"",710434:"",710435:"",710436:"",710437:"",710438:"",710439:"",710440:"",710441:"",710442:"",710443:"",710444:"",710445:"",710446:"",710447:"",710448:"",710449:"",710450:"",710451:"",710500:"",710507:"",710508:"",710509:"",710510:"",710511:"",710512:"",710600:"",710614:"",710615:"",710616:"",710617:"",710618:"",710619:"",710620:"",710621:"",710622:"",710623:"",710624:"",710625:"",710626:"",710700:"",710701:"",710702:"",710703:"",710704:"",710705:"",710706:"",710707:"",710708:"",710800:"",710801:"",710802:"",710803:"",710804:"",710900:"",710901:"",710902:"",710903:"",711100:"",711130:"",711131:"",711132:"",711133:"",711134:"",711135:"",711136:"",711137:"",711138:"",711139:"",711140:"",711141:"",711142:"",711143:"",711144:"",711145:"",711146:"",711147:"",711148:"",711149:"",711150:"",711151:"",711152:"",711153:"",711154:"",711155:"",711156:"",711157:"",711158:"",711200:"",711214:"",711215:"",711216:"",711217:"",711218:"",711219:"",711220:"",711221:"",711222:"",711223:"",711224:"",711225:"",711226:"",711300:"",711314:"",711315:"",711316:"",711317:"",711318:"",711319:"",711320:"",711321:"",711322:"",711323:"",711324:"",711325:"",711326:"",711400:"",711414:"",711415:"",711416:"",711417:"",711418:"",711419:"",711420:"",711421:"",711422:"",711423:"",711424:"",711425:"",711426:"",711500:"",711519:"",711520:"",711521:"",711522:"",711523:"",711524:"",711525:"",711526:"",711527:"",711528:"",711529:"",711530:"",711531:"",711532:"",711533:"",711534:"",711535:"",711536:"",711700:"",711727:"",711728:"",711729:"",711730:"",711731:"",711732:"",711733:"",711734:"",711735:"",711736:"",711737:"",711738:"",711739:"",711740:"",711741:"",711742:"",711743:"",711744:"",711745:"",711746:"",711747:"",711748:"",711749:"",711750:"",711751:"",711752:"",711900:"",711919:"",711920:"",711921:"",711922:"",711923:"",711924:"",711925:"",711926:"",711927:"",711928:"",711929:"",711930:"",711931:"",711932:"",711933:"",711934:"",711935:"",711936:"",712100:"",712121:"",712122:"",712123:"",712124:"",712125:"",712126:"",712127:"",712128:"",712129:"",712130:"",712131:"",712132:"",712133:"",712134:"",712135:"",712136:"",712137:"",712138:"",712139:"",712140:"",712400:"",712434:"",712435:"",712436:"",712437:"",712438:"",712439:"",712440:"",712441:"",712442:"",712443:"",712444:"",712445:"",712446:"",712447:"",712448:"",712449:"",712450:"",712451:"",712452:"",712453:"",712454:"",712455:"",712456:"",712457:"",712458:"",712459:"",712460:"",712461:"",712462:"",712463:"",712464:"",712465:"",712466:"",712500:"",712517:"",712518:"",712519:"",712520:"",712521:"",712522:"",712523:"",712524:"",712525:"",712526:"",712527:"",712528:"",712529:"",712530:"",712531:"",712532:"",712600:"",712615:"",712616:"",712617:"",712618:"",712619:"",712620:"",712621:"",712622:"",712623:"",712624:"",712625:"",712626:"",712627:"",712628:"",712700:"",712707:"",712708:"",712709:"",712710:"",712711:"",712712:"",712800:"",712805:"",712806:"",712807:"",712808:"",81e4:"",810100:"",810101:"",810102:"",810103:"",810104:"",810200:"",810201:"",810202:"",810203:"",810204:"",810205:"",810300:"",810301:"",810302:"",810303:"",810304:"",810305:"",810306:"",810307:"",810308:"",810309:"",82e4:"",820100:"",820200:"",99e4:"",990100:""};function s(l){for(var a={},c=0,u;c<l.length;c++)u=l[c],!(!u||!u.id)&&(a[u.id]=u);for(var f=[],d=0;d<l.length;d++)if(u=l[d],!!u){if(u.pid==null&&u.parentId==null){f.push(u);continue}var g=a[u.pid]||a[u.parentId];g&&(g.children||(g.children=[]),g.children.push(u))}return f}var o=function(){var l=[];for(var a in n){var c=a.slice(2,6)==="0000"?void 0:a.slice(4,6)=="00"?a.slice(0,2)+"0000":a.slice(0,4)+"00";l.push({id:a,pid:c,name:n[a]})}return s(l)}();r.exports=o},function(r,e,n){var s=n(18);r.exports={d4:function(){return this.natural(1,4)},d6:function(){return this.natural(1,6)},d8:function(){return this.natural(1,8)},d12:function(){return this.natural(1,12)},d20:function(){return this.natural(1,20)},d100:function(){return this.natural(1,100)},guid:function(){var o="abcdefABCDEF1234567890",l=this.string(o,8)+"-"+this.string(o,4)+"-"+this.string(o,4)+"-"+this.string(o,4)+"-"+this.string(o,12);return l},uuid:function(){return this.guid()},id:function(){var o,l=0,a=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],c=["1","0","X","9","8","7","6","5","4","3","2"];o=this.pick(s).id+this.date("yyyyMMdd")+this.string("number",3);for(var u=0;u<o.length;u++)l+=o[u]*a[u];return o+=c[l%11],o},increment:function(){var o=0;return function(l){return o+=+l||1}}(),inc:function(o){return this.increment(o)}}},function(r,e,n){var s=n(21),o=n(22);r.exports={Parser:s,Handler:o}},function(r,e){function n(W){this.type=W,this.offset=n.offset(),this.text=n.text()}function s(W,H){n.call(this,"alternate"),this.left=W,this.right=H}function o(W){n.call(this,"match"),this.body=W.filter(Boolean)}function l(W,H){n.call(this,W),this.body=H}function a(W){l.call(this,"capture-group"),this.index=q[this.offset]||(q[this.offset]=V++),this.body=W}function c(W,H){n.call(this,"quantified"),this.body=W,this.quantifier=H}function u(W,H){n.call(this,"quantifier"),this.min=W,this.max=H,this.greedy=!0}function f(W,H){n.call(this,"charset"),this.invert=W,this.body=H}function d(W,H){n.call(this,"range"),this.start=W,this.end=H}function g(W){n.call(this,"literal"),this.body=W,this.escaped=this.body!=this.text}function m(W){n.call(this,"unicode"),this.code=W.toUpperCase()}function v(W){n.call(this,"hex"),this.code=W.toUpperCase()}function k(W){n.call(this,"octal"),this.code=W.toUpperCase()}function A(W){n.call(this,"back-reference"),this.code=W.toUpperCase()}function E(W){n.call(this,"control-character"),this.code=W.toUpperCase()}var N=function(){function W(L,te){function ae(){this.constructor=L}ae.prototype=te.prototype,L.prototype=new ae}function H(L,te,ae,ge,Y){function he(me,xe){function we(ve){function Te(Me){return Me.charCodeAt(0).toString(16).toUpperCase()}return ve.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(Me){return"\\x0"+Te(Me)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(Me){return"\\x"+Te(Me)}).replace(/[\u0180-\u0FFF]/g,function(Me){return"\\u0"+Te(Me)}).replace(/[\u1080-\uFFFF]/g,function(Me){return"\\u"+Te(Me)})}var Se,be;switch(me.length){case 0:Se="end of input";break;case 1:Se=me[0];break;default:Se=me.slice(0,-1).join(", ")+" or "+me[me.length-1]}return be=xe?'"'+we(xe)+'"':"end of input","Expected "+Se+" but "+be+" found."}this.expected=L,this.found=te,this.offset=ae,this.line=ge,this.column=Y,this.name="SyntaxError",this.message=he(L,te)}function $(L){function te(){return L.substring(pe,R)}function ae(){return pe}function ge(b){function M(G,ce,Ce){var je,Je;for(je=ce;Ce>je;je++)Je=L.charAt(je),Je===`
`?(G.seenCR||G.line++,G.column=1,G.seenCR=!1):Je==="\r"||Je==="\u2028"||Je==="\u2029"?(G.line++,G.column=1,G.seenCR=!0):(G.column++,G.seenCR=!1)}return Ye!==b&&(Ye>b&&(Ye=0,ut={line:1,column:1,seenCR:!1}),M(ut,Ye,b),Ye=b),ut}function Y(b){st>R||(R>st&&(st=R,ot=[]),ot.push(b))}function he(b){var M=0;for(b.sort();M<b.length;)b[M-1]===b[M]?b.splice(M,1):M++}function me(){var b,M,G,ce,Ce;return b=R,M=xe(),M!==null?(G=R,L.charCodeAt(R)===124?(ce=ti,R++):(ce=null,oe===0&&Y(ii)),ce!==null?(Ce=me(),Ce!==null?(ce=[ce,Ce],G=ce):(R=G,G=ue)):(R=G,G=ue),G===null&&(G=qe),G!==null?(pe=b,M=ni(M,G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue),b}function xe(){var b,M,G,ce,Ce;if(b=R,M=Se(),M===null&&(M=qe),M!==null)if(G=R,oe++,ce=Te(),oe--,ce===null?G=qe:(R=G,G=ue),G!==null){for(ce=[],Ce=ve(),Ce===null&&(Ce=we());Ce!==null;)ce.push(Ce),Ce=ve(),Ce===null&&(Ce=we());ce!==null?(Ce=be(),Ce===null&&(Ce=qe),Ce!==null?(pe=b,M=ri(M,ce,Ce),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue)}else R=b,b=ue;else R=b,b=ue;return b}function we(){var b;return b=Qe(),b===null&&(b=K(),b===null&&(b=ne())),b}function Se(){var b,M;return b=R,L.charCodeAt(R)===94?(M=xt,R++):(M=null,oe===0&&Y(St)),M!==null&&(pe=b,M=si()),M===null&&(R=b),b=M,b}function be(){var b,M;return b=R,L.charCodeAt(R)===36?(M=oi,R++):(M=null,oe===0&&Y(li)),M!==null&&(pe=b,M=ai()),M===null&&(R=b),b=M,b}function ve(){var b,M,G;return b=R,M=we(),M!==null?(G=Te(),G!==null?(pe=b,M=ci(M,G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue),b}function Te(){var b,M,G;return oe++,b=R,M=Me(),M!==null?(G=$e(),G===null&&(G=qe),G!==null?(pe=b,M=ui(M,G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue),oe--,b===null&&(M=null,oe===0&&Y(hi)),b}function Me(){var b;return b=Be(),b===null&&(b=Re(),b===null&&(b=Ne(),b===null&&(b=Ve(),b===null&&(b=He(),b===null&&(b=Fe()))))),b}function Be(){var b,M,G,ce,Ce,je;return b=R,L.charCodeAt(R)===123?(M=at,R++):(M=null,oe===0&&Y(ct)),M!==null?(G=We(),G!==null?(L.charCodeAt(R)===44?(ce=fi,R++):(ce=null,oe===0&&Y(di)),ce!==null?(Ce=We(),Ce!==null?(L.charCodeAt(R)===125?(je=kt,R++):(je=null,oe===0&&Y(wt)),je!==null?(pe=b,M=pi(G,Ce),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue)):(R=b,b=ue)):(R=b,b=ue)):(R=b,b=ue),b}function Re(){var b,M,G,ce;return b=R,L.charCodeAt(R)===123?(M=at,R++):(M=null,oe===0&&Y(ct)),M!==null?(G=We(),G!==null?(L.substr(R,2)===Ct?(ce=Ct,R+=2):(ce=null,oe===0&&Y(gi)),ce!==null?(pe=b,M=mi(G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue)):(R=b,b=ue),b}function Ne(){var b,M,G,ce;return b=R,L.charCodeAt(R)===123?(M=at,R++):(M=null,oe===0&&Y(ct)),M!==null?(G=We(),G!==null?(L.charCodeAt(R)===125?(ce=kt,R++):(ce=null,oe===0&&Y(wt)),ce!==null?(pe=b,M=yi(G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue)):(R=b,b=ue),b}function Ve(){var b,M;return b=R,L.charCodeAt(R)===43?(M=bi,R++):(M=null,oe===0&&Y(vi)),M!==null&&(pe=b,M=xi()),M===null&&(R=b),b=M,b}function He(){var b,M;return b=R,L.charCodeAt(R)===42?(M=Si,R++):(M=null,oe===0&&Y(ki)),M!==null&&(pe=b,M=wi()),M===null&&(R=b),b=M,b}function Fe(){var b,M;return b=R,L.charCodeAt(R)===63?(M=Tt,R++):(M=null,oe===0&&Y(At)),M!==null&&(pe=b,M=Ci()),M===null&&(R=b),b=M,b}function $e(){var b;return L.charCodeAt(R)===63?(b=Tt,R++):(b=null,oe===0&&Y(At)),b}function We(){var b,M,G;if(b=R,M=[],Mt.test(L.charAt(R))?(G=L.charAt(R),R++):(G=null,oe===0&&Y(Et)),G!==null)for(;G!==null;)M.push(G),Mt.test(L.charAt(R))?(G=L.charAt(R),R++):(G=null,oe===0&&Y(Et));else M=ue;return M!==null&&(pe=b,M=Ti(M)),M===null&&(R=b),b=M,b}function Qe(){var b,M,G,ce;return b=R,L.charCodeAt(R)===40?(M=Ai,R++):(M=null,oe===0&&Y(Mi)),M!==null?(G=I(),G===null&&(G=_(),G===null&&(G=ft(),G===null&&(G=Ue()))),G!==null?(L.charCodeAt(R)===41?(ce=Ei,R++):(ce=null,oe===0&&Y(Ri)),ce!==null?(pe=b,M=Bi(G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue)):(R=b,b=ue),b}function Ue(){var b,M;return b=R,M=me(),M!==null&&(pe=b,M=Pi(M)),M===null&&(R=b),b=M,b}function ft(){var b,M,G;return b=R,L.substr(R,2)===Rt?(M=Rt,R+=2):(M=null,oe===0&&Y(Oi)),M!==null?(G=me(),G!==null?(pe=b,M=Di(G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue),b}function I(){var b,M,G;return b=R,L.substr(R,2)===Bt?(M=Bt,R+=2):(M=null,oe===0&&Y(Ni)),M!==null?(G=me(),G!==null?(pe=b,M=Ii(G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue),b}function _(){var b,M,G;return b=R,L.substr(R,2)===Pt?(M=Pt,R+=2):(M=null,oe===0&&Y(Li)),M!==null?(G=me(),G!==null?(pe=b,M=_i(G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue),b}function K(){var b,M,G,ce,Ce;if(oe++,b=R,L.charCodeAt(R)===91?(M=Vi,R++):(M=null,oe===0&&Y(Hi)),M!==null)if(L.charCodeAt(R)===94?(G=xt,R++):(G=null,oe===0&&Y(St)),G===null&&(G=qe),G!==null){for(ce=[],Ce=Z(),Ce===null&&(Ce=J());Ce!==null;)ce.push(Ce),Ce=Z(),Ce===null&&(Ce=J());ce!==null?(L.charCodeAt(R)===93?(Ce=$i,R++):(Ce=null,oe===0&&Y(Wi)),Ce!==null?(pe=b,M=zi(G,ce),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue)}else R=b,b=ue;else R=b,b=ue;return oe--,b===null&&(M=null,oe===0&&Y(Fi)),b}function Z(){var b,M,G,ce;return oe++,b=R,M=J(),M!==null?(L.charCodeAt(R)===45?(G=Ui,R++):(G=null,oe===0&&Y(qi)),G!==null?(ce=J(),ce!==null?(pe=b,M=Ki(M,ce),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue)):(R=b,b=ue),oe--,b===null&&(M=null,oe===0&&Y(ji)),b}function J(){var b;return oe++,b=se(),b===null&&(b=Q()),oe--,b===null&&oe===0&&Y(Gi),b}function Q(){var b,M;return b=R,Yi.test(L.charAt(R))?(M=L.charAt(R),R++):(M=null,oe===0&&Y(Ji)),M!==null&&(pe=b,M=ht(M)),M===null&&(R=b),b=M,b}function se(){var b;return b=le(),b===null&&(b=Ge(),b===null&&(b=ke(),b===null&&(b=Ee(),b===null&&(b=Ae(),b===null&&(b=Pe(),b===null&&(b=Oe(),b===null&&(b=Ie(),b===null&&(b=Le(),b===null&&(b=ze(),b===null&&(b=Ke(),b===null&&(b=De(),b===null&&(b=_e(),b===null&&(b=dt(),b===null&&(b=pt(),b===null&&(b=gt(),b===null&&(b=mt(),b===null&&(b=yt()))))))))))))))))),b}function ne(){var b;return b=ee(),b===null&&(b=de(),b===null&&(b=X())),b}function ee(){var b,M;return b=R,L.charCodeAt(R)===46?(M=Qi,R++):(M=null,oe===0&&Y(Xi)),M!==null&&(pe=b,M=Zi()),M===null&&(R=b),b=M,b}function X(){var b,M;return oe++,b=R,tn.test(L.charAt(R))?(M=L.charAt(R),R++):(M=null,oe===0&&Y(nn)),M!==null&&(pe=b,M=ht(M)),M===null&&(R=b),b=M,oe--,b===null&&(M=null,oe===0&&Y(en)),b}function de(){var b;return b=fe(),b===null&&(b=ye(),b===null&&(b=Ge(),b===null&&(b=ke(),b===null&&(b=Ee(),b===null&&(b=Ae(),b===null&&(b=Pe(),b===null&&(b=Oe(),b===null&&(b=Ie(),b===null&&(b=Le(),b===null&&(b=ze(),b===null&&(b=Ke(),b===null&&(b=De(),b===null&&(b=_e(),b===null&&(b=Xe(),b===null&&(b=dt(),b===null&&(b=pt(),b===null&&(b=gt(),b===null&&(b=mt(),b===null&&(b=yt()))))))))))))))))))),b}function le(){var b,M;return b=R,L.substr(R,2)===et?(M=et,R+=2):(M=null,oe===0&&Y(Ot)),M!==null&&(pe=b,M=rn()),M===null&&(R=b),b=M,b}function fe(){var b,M;return b=R,L.substr(R,2)===et?(M=et,R+=2):(M=null,oe===0&&Y(Ot)),M!==null&&(pe=b,M=sn()),M===null&&(R=b),b=M,b}function ye(){var b,M;return b=R,L.substr(R,2)===Dt?(M=Dt,R+=2):(M=null,oe===0&&Y(on)),M!==null&&(pe=b,M=ln()),M===null&&(R=b),b=M,b}function ke(){var b,M;return b=R,L.substr(R,2)===Nt?(M=Nt,R+=2):(M=null,oe===0&&Y(an)),M!==null&&(pe=b,M=cn()),M===null&&(R=b),b=M,b}function Ee(){var b,M;return b=R,L.substr(R,2)===It?(M=It,R+=2):(M=null,oe===0&&Y(hn)),M!==null&&(pe=b,M=un()),M===null&&(R=b),b=M,b}function Ae(){var b,M;return b=R,L.substr(R,2)===Lt?(M=Lt,R+=2):(M=null,oe===0&&Y(fn)),M!==null&&(pe=b,M=dn()),M===null&&(R=b),b=M,b}function Pe(){var b,M;return b=R,L.substr(R,2)===_t?(M=_t,R+=2):(M=null,oe===0&&Y(pn)),M!==null&&(pe=b,M=gn()),M===null&&(R=b),b=M,b}function Oe(){var b,M;return b=R,L.substr(R,2)===Ft?(M=Ft,R+=2):(M=null,oe===0&&Y(mn)),M!==null&&(pe=b,M=yn()),M===null&&(R=b),b=M,b}function Ie(){var b,M;return b=R,L.substr(R,2)===Vt?(M=Vt,R+=2):(M=null,oe===0&&Y(bn)),M!==null&&(pe=b,M=vn()),M===null&&(R=b),b=M,b}function Le(){var b,M;return b=R,L.substr(R,2)===Ht?(M=Ht,R+=2):(M=null,oe===0&&Y(xn)),M!==null&&(pe=b,M=Sn()),M===null&&(R=b),b=M,b}function ze(){var b,M;return b=R,L.substr(R,2)===$t?(M=$t,R+=2):(M=null,oe===0&&Y(kn)),M!==null&&(pe=b,M=wn()),M===null&&(R=b),b=M,b}function Ke(){var b,M;return b=R,L.substr(R,2)===Wt?(M=Wt,R+=2):(M=null,oe===0&&Y(Cn)),M!==null&&(pe=b,M=Tn()),M===null&&(R=b),b=M,b}function De(){var b,M;return b=R,L.substr(R,2)===zt?(M=zt,R+=2):(M=null,oe===0&&Y(An)),M!==null&&(pe=b,M=Mn()),M===null&&(R=b),b=M,b}function _e(){var b,M;return b=R,L.substr(R,2)===jt?(M=jt,R+=2):(M=null,oe===0&&Y(En)),M!==null&&(pe=b,M=Rn()),M===null&&(R=b),b=M,b}function Ge(){var b,M,G;return b=R,L.substr(R,2)===Ut?(M=Ut,R+=2):(M=null,oe===0&&Y(Bn)),M!==null?(L.length>R?(G=L.charAt(R),R++):(G=null,oe===0&&Y(qt)),G!==null?(pe=b,M=Pn(G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue),b}function Xe(){var b,M,G;return b=R,L.charCodeAt(R)===92?(M=Kt,R++):(M=null,oe===0&&Y(Gt)),M!==null?(On.test(L.charAt(R))?(G=L.charAt(R),R++):(G=null,oe===0&&Y(Dn)),G!==null?(pe=b,M=Nn(G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue),b}function dt(){var b,M,G,ce;if(b=R,L.substr(R,2)===it?(M=it,R+=2):(M=null,oe===0&&Y(Yt)),M!==null){if(G=[],Jt.test(L.charAt(R))?(ce=L.charAt(R),R++):(ce=null,oe===0&&Y(Qt)),ce!==null)for(;ce!==null;)G.push(ce),Jt.test(L.charAt(R))?(ce=L.charAt(R),R++):(ce=null,oe===0&&Y(Qt));else G=ue;G!==null?(pe=b,M=In(G),M===null&&(R=b),b=M):(R=b,b=ue)}else R=b,b=ue;return b}function pt(){var b,M,G,ce;if(b=R,L.substr(R,2)===Xt?(M=Xt,R+=2):(M=null,oe===0&&Y(Ln)),M!==null){if(G=[],nt.test(L.charAt(R))?(ce=L.charAt(R),R++):(ce=null,oe===0&&Y(rt)),ce!==null)for(;ce!==null;)G.push(ce),nt.test(L.charAt(R))?(ce=L.charAt(R),R++):(ce=null,oe===0&&Y(rt));else G=ue;G!==null?(pe=b,M=_n(G),M===null&&(R=b),b=M):(R=b,b=ue)}else R=b,b=ue;return b}function gt(){var b,M,G,ce;if(b=R,L.substr(R,2)===Zt?(M=Zt,R+=2):(M=null,oe===0&&Y(Fn)),M!==null){if(G=[],nt.test(L.charAt(R))?(ce=L.charAt(R),R++):(ce=null,oe===0&&Y(rt)),ce!==null)for(;ce!==null;)G.push(ce),nt.test(L.charAt(R))?(ce=L.charAt(R),R++):(ce=null,oe===0&&Y(rt));else G=ue;G!==null?(pe=b,M=Vn(G),M===null&&(R=b),b=M):(R=b,b=ue)}else R=b,b=ue;return b}function mt(){var b,M;return b=R,L.substr(R,2)===it?(M=it,R+=2):(M=null,oe===0&&Y(Yt)),M!==null&&(pe=b,M=Hn()),M===null&&(R=b),b=M,b}function yt(){var b,M,G;return b=R,L.charCodeAt(R)===92?(M=Kt,R++):(M=null,oe===0&&Y(Gt)),M!==null?(L.length>R?(G=L.charAt(R),R++):(G=null,oe===0&&Y(qt)),G!==null?(pe=b,M=ht(G),M===null&&(R=b),b=M):(R=b,b=ue)):(R=b,b=ue),b}var lt,Ze=arguments.length>1?arguments[1]:{},bt={regexp:me},vt=me,ue=null,qe="",ti="|",ii='"|"',ni=function(b,M){return M?new s(b,M[1]):b},ri=function(b,M,G){return new o([b].concat(M).concat([G]))},xt="^",St='"^"',si=function(){return new n("start")},oi="$",li='"$"',ai=function(){return new n("end")},ci=function(b,M){return new c(b,M)},hi="Quantifier",ui=function(b,M){return M&&(b.greedy=!1),b},at="{",ct='"{"',fi=",",di='","',kt="}",wt='"}"',pi=function(b,M){return new u(b,M)},Ct=",}",gi='",}"',mi=function(b){return new u(b,1/0)},yi=function(b){return new u(b,b)},bi="+",vi='"+"',xi=function(){return new u(1,1/0)},Si="*",ki='"*"',wi=function(){return new u(0,1/0)},Tt="?",At='"?"',Ci=function(){return new u(0,1)},Mt=/^[0-9]/,Et="[0-9]",Ti=function(b){return+b.join("")},Ai="(",Mi='"("',Ei=")",Ri='")"',Bi=function(b){return b},Pi=function(b){return new a(b)},Rt="?:",Oi='"?:"',Di=function(b){return new l("non-capture-group",b)},Bt="?=",Ni='"?="',Ii=function(b){return new l("positive-lookahead",b)},Pt="?!",Li='"?!"',_i=function(b){return new l("negative-lookahead",b)},Fi="CharacterSet",Vi="[",Hi='"["',$i="]",Wi='"]"',zi=function(b,M){return new f(!!b,M)},ji="CharacterRange",Ui="-",qi='"-"',Ki=function(b,M){return new d(b,M)},Gi="Character",Yi=/^[^\\\]]/,Ji="[^\\\\\\]]",ht=function(b){return new g(b)},Qi=".",Xi='"."',Zi=function(){return new n("any-character")},en="Literal",tn=/^[^|\\\/.[()?+*$\^]/,nn="[^|\\\\\\/.[()?+*$\\^]",et="\\b",Ot='"\\\\b"',rn=function(){return new n("backspace")},sn=function(){return new n("word-boundary")},Dt="\\B",on='"\\\\B"',ln=function(){return new n("non-word-boundary")},Nt="\\d",an='"\\\\d"',cn=function(){return new n("digit")},It="\\D",hn='"\\\\D"',un=function(){return new n("non-digit")},Lt="\\f",fn='"\\\\f"',dn=function(){return new n("form-feed")},_t="\\n",pn='"\\\\n"',gn=function(){return new n("line-feed")},Ft="\\r",mn='"\\\\r"',yn=function(){return new n("carriage-return")},Vt="\\s",bn='"\\\\s"',vn=function(){return new n("white-space")},Ht="\\S",xn='"\\\\S"',Sn=function(){return new n("non-white-space")},$t="\\t",kn='"\\\\t"',wn=function(){return new n("tab")},Wt="\\v",Cn='"\\\\v"',Tn=function(){return new n("vertical-tab")},zt="\\w",An='"\\\\w"',Mn=function(){return new n("word")},jt="\\W",En='"\\\\W"',Rn=function(){return new n("non-word")},Ut="\\c",Bn='"\\\\c"',qt="any character",Pn=function(b){return new E(b)},Kt="\\",Gt='"\\\\"',On=/^[1-9]/,Dn="[1-9]",Nn=function(b){return new A(b)},it="\\0",Yt='"\\\\0"',Jt=/^[0-7]/,Qt="[0-7]",In=function(b){return new k(b.join(""))},Xt="\\x",Ln='"\\\\x"',nt=/^[0-9a-fA-F]/,rt="[0-9a-fA-F]",_n=function(b){return new v(b.join(""))},Zt="\\u",Fn='"\\\\u"',Vn=function(b){return new m(b.join(""))},Hn=function(){return new n("null-character")},R=0,pe=0,Ye=0,ut={line:1,column:1,seenCR:!1},st=0,ot=[],oe=0;if("startRule"in Ze){if(!(Ze.startRule in bt))throw new Error(`Can't start parsing from rule "`+Ze.startRule+'".');vt=bt[Ze.startRule]}if(n.offset=ae,n.text=te,lt=vt(),lt!==null&&R===L.length)return lt;throw he(ot),pe=Math.max(R,st),new H(ot,pe<L.length?L.charAt(pe):null,pe,ge(pe).line,ge(pe).column)}return W(H,Error),{SyntaxError:H,parse:$}}(),V=1,q={};r.exports=N},function(r,e,n){var s=n(3),o=n(5),l={extend:s.extend},a=v(97,122),c=v(65,90),u=v(48,57),f=v(32,47)+v(58,64)+v(91,96)+v(123,126),d=v(32,126),g=` \f
\r	\v\u2028\u2029`,m={"\\w":a+c+u+"_","\\W":f.replace("_",""),"\\s":g,"\\S":function(){for(var k=d,A=0;A<g.length;A++)k=k.replace(g[A],"");return k}(),"\\d":u,"\\D":a+c+f};function v(k,A){for(var E="",N=k;N<=A;N++)E+=String.fromCharCode(N);return E}l.gen=function(k,A,E){return E=E||{guid:1},l[k.type]?l[k.type](k,A,E):l.token(k,A,E)},l.extend({token:function(k,A,E){switch(k.type){case"start":case"end":return"";case"any-character":return o.character();case"backspace":return"";case"word-boundary":return"";case"non-word-boundary":break;case"digit":return o.pick(u.split(""));case"non-digit":return o.pick((a+c+f).split(""));case"form-feed":break;case"line-feed":return k.body||k.text;case"carriage-return":break;case"white-space":return o.pick(g.split(""));case"non-white-space":return o.pick((a+c+u).split(""));case"tab":break;case"vertical-tab":break;case"word":return o.pick((a+c+u).split(""));case"non-word":return o.pick(f.replace("_","").split(""))}return k.body||k.text},alternate:function(k,A,E){return this.gen(o.boolean()?k.left:k.right,A,E)},match:function(k,A,E){A="";for(var N=0;N<k.body.length;N++)A+=this.gen(k.body[N],A,E);return A},"capture-group":function(k,A,E){return A=this.gen(k.body,A,E),E[E.guid++]=A,A},"non-capture-group":function(k,A,E){return this.gen(k.body,A,E)},"positive-lookahead":function(k,A,E){return this.gen(k.body,A,E)},"negative-lookahead":function(k,A,E){return""},quantified:function(k,A,E){A="";for(var N=this.quantifier(k.quantifier),V=0;V<N;V++)A+=this.gen(k.body,A,E);return A},quantifier:function(k,A,E){var N=Math.max(k.min,0),V=isFinite(k.max)?k.max:N+o.integer(3,7);return o.integer(N,V)},charset:function(k,A,E){if(k.invert)return this["invert-charset"](k,A,E);var N=o.pick(k.body);return this.gen(N,A,E)},"invert-charset":function(k,A,E){for(var N=d,V=0,q;V<k.body.length;V++)switch(q=k.body[V],q.type){case"literal":N=N.replace(q.body,"");break;case"range":for(var W=this.gen(q.start,A,E).charCodeAt(),H=this.gen(q.end,A,E).charCodeAt(),$=W;$<=H;$++)N=N.replace(String.fromCharCode($),"");default:var L=m[q.text];if(L)for(var te=0;te<=L.length;te++)N=N.replace(L[te],"")}return o.pick(N.split(""))},range:function(k,A,E){var N=this.gen(k.start,A,E).charCodeAt(),V=this.gen(k.end,A,E).charCodeAt();return String.fromCharCode(o.integer(N,V))},literal:function(k,A,E){return k.escaped?k.body:k.text},unicode:function(k,A,E){return String.fromCharCode(parseInt(k.code,16))},hex:function(k,A,E){return String.fromCharCode(parseInt(k.code,16))},octal:function(k,A,E){return String.fromCharCode(parseInt(k.code,8))},"back-reference":function(k,A,E){return E[k.code]||""},CONTROL_CHARACTER_MAP:function(){for(var k="@ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \\ ] ^ _".split(" "),A=`\0       \x07 \b 	 
 \v \f \r              \x1B    `.split(" "),E={},N=0;N<k.length;N++)E[k[N]]=A[N];return E}(),"control-character":function(k,A,E){return this.CONTROL_CHARACTER_MAP[k.code]}}),r.exports=l},function(r,e,n){r.exports=n(24)},function(r,e,n){var s=n(2),o=n(3),l=n(4);function a(c,u,f){f=f||[];var d={name:typeof u=="string"?u.replace(s.RE_KEY,"$1"):u,template:c,type:o.type(c),rule:l.parse(u)};switch(d.path=f.slice(0),d.path.push(u===void 0?"ROOT":d.name),d.type){case"array":d.items=[],o.each(c,function(g,m){d.items.push(a(g,m,d.path))});break;case"object":d.properties=[],o.each(c,function(g,m){d.properties.push(a(g,m,d.path))});break}return d}r.exports=a},function(r,e,n){r.exports=n(26)},function(r,e,n){var s=n(2),o=n(3),l=n(23);function a(f,d){for(var g=l(f),m=c.diff(g,d),v=0;v<m.length;v++);return m}var c={diff:function(d,g,m){var v=[];return this.name(d,g,m,v)&&this.type(d,g,m,v)&&(this.value(d,g,m,v),this.properties(d,g,m,v),this.items(d,g,m,v)),v},name:function(f,d,g,m){var v=m.length;return u.equal("name",f.path,g+"",f.name+"",m),m.length===v},type:function(f,d,g,m){var v=m.length;switch(f.type){case"string":if(f.template.match(s.RE_PLACEHOLDER))return!0;break;case"array":if(f.rule.parameters&&(f.rule.min!==void 0&&f.rule.max===void 0&&f.rule.count===1||f.rule.parameters[2]))return!0;break;case"function":return!0}return u.equal("type",f.path,o.type(d),f.type,m),m.length===v},value:function(f,d,g,m){var v=m.length,k=f.rule,A=f.type;if(A==="object"||A==="array"||A==="function")return!0;if(!k.parameters){switch(A){case"regexp":return u.match("value",f.path,d,f.template,m),m.length===v;case"string":if(f.template.match(s.RE_PLACEHOLDER))return m.length===v;break}return u.equal("value",f.path,d,f.template,m),m.length===v}var E;switch(A){case"number":var N=(d+"").split(".");N[0]=+N[0],k.min!==void 0&&k.max!==void 0&&(u.greaterThanOrEqualTo("value",f.path,N[0],Math.min(k.min,k.max),m),u.lessThanOrEqualTo("value",f.path,N[0],Math.max(k.min,k.max),m)),k.min!==void 0&&k.max===void 0&&u.equal("value",f.path,N[0],k.min,m,"[value] "+g),k.decimal&&(k.dmin!==void 0&&k.dmax!==void 0&&(u.greaterThanOrEqualTo("value",f.path,N[1].length,k.dmin,m),u.lessThanOrEqualTo("value",f.path,N[1].length,k.dmax,m)),k.dmin!==void 0&&k.dmax===void 0&&u.equal("value",f.path,N[1].length,k.dmin,m));break;case"boolean":break;case"string":E=d.match(new RegExp(f.template,"g")),E=E?E.length:0,k.min!==void 0&&k.max!==void 0&&(u.greaterThanOrEqualTo("repeat count",f.path,E,k.min,m),u.lessThanOrEqualTo("repeat count",f.path,E,k.max,m)),k.min!==void 0&&k.max===void 0&&u.equal("repeat count",f.path,E,k.min,m);break;case"regexp":E=d.match(new RegExp(f.template.source.replace(/^\^|\$$/g,""),"g")),E=E?E.length:0,k.min!==void 0&&k.max!==void 0&&(u.greaterThanOrEqualTo("repeat count",f.path,E,k.min,m),u.lessThanOrEqualTo("repeat count",f.path,E,k.max,m)),k.min!==void 0&&k.max===void 0&&u.equal("repeat count",f.path,E,k.min,m);break}return m.length===v},properties:function(f,d,g,m){var v=m.length,k=f.rule,A=o.keys(d);if(f.properties){if(f.rule.parameters?(k.min!==void 0&&k.max!==void 0&&(u.greaterThanOrEqualTo("properties length",f.path,A.length,Math.min(k.min,k.max),m),u.lessThanOrEqualTo("properties length",f.path,A.length,Math.max(k.min,k.max),m)),k.min!==void 0&&k.max===void 0&&k.count!==1&&u.equal("properties length",f.path,A.length,k.min,m)):u.equal("properties length",f.path,A.length,f.properties.length,m),m.length!==v)return!1;for(var E=0;E<A.length;E++)m.push.apply(m,this.diff(function(){var N;return o.each(f.properties,function(V){V.name===A[E]&&(N=V)}),N||f.properties[E]}(),d[A[E]],A[E]));return m.length===v}},items:function(f,d,g,m){var v=m.length;if(f.items){var k=f.rule;if(!f.rule.parameters)u.equal("items length",f.path,d.length,f.items.length,m);else{if(k.min!==void 0&&k.max!==void 0&&(u.greaterThanOrEqualTo("items",f.path,d.length,Math.min(k.min,k.max)*f.items.length,m,"[{utype}] array is too short: {path} must have at least {expected} elements but instance has {actual} elements"),u.lessThanOrEqualTo("items",f.path,d.length,Math.max(k.min,k.max)*f.items.length,m,"[{utype}] array is too long: {path} must have at most {expected} elements but instance has {actual} elements")),k.min!==void 0&&k.max===void 0){if(k.count===1)return m.length===v;u.equal("items length",f.path,d.length,k.min*f.items.length,m)}if(k.parameters[2])return m.length===v}if(m.length!==v)return!1;for(var A=0;A<d.length;A++)m.push.apply(m,this.diff(f.items[A%f.items.length],d[A],A%f.items.length));return m.length===v}}},u={message:function(f){return(f.message||"[{utype}] Expect {path}'{ltype} {action} {expected}, but is {actual}").replace("{utype}",f.type.toUpperCase()).replace("{ltype}",f.type.toLowerCase()).replace("{path}",o.isArray(f.path)&&f.path.join(".")||f.path).replace("{action}",f.action).replace("{expected}",f.expected).replace("{actual}",f.actual)},equal:function(f,d,g,m,v,k){if(g===m)return!0;switch(f){case"type":if(m==="regexp"&&g==="string")return!0;break}var A={path:d,type:f,actual:g,expected:m,action:"is equal to",message:k};return A.message=u.message(A),v.push(A),!1},match:function(f,d,g,m,v,k){if(m.test(g))return!0;var A={path:d,type:f,actual:g,expected:m,action:"matches",message:k};return A.message=u.message(A),v.push(A),!1},notEqual:function(f,d,g,m,v,k){if(g!==m)return!0;var A={path:d,type:f,actual:g,expected:m,action:"is not equal to",message:k};return A.message=u.message(A),v.push(A),!1},greaterThan:function(f,d,g,m,v,k){if(g>m)return!0;var A={path:d,type:f,actual:g,expected:m,action:"is greater than",message:k};return A.message=u.message(A),v.push(A),!1},lessThan:function(f,d,g,m,v,k){if(g<m)return!0;var A={path:d,type:f,actual:g,expected:m,action:"is less to",message:k};return A.message=u.message(A),v.push(A),!1},greaterThanOrEqualTo:function(f,d,g,m,v,k){if(g>=m)return!0;var A={path:d,type:f,actual:g,expected:m,action:"is greater than or equal to",message:k};return A.message=u.message(A),v.push(A),!1},lessThanOrEqualTo:function(f,d,g,m,v,k){if(g<=m)return!0;var A={path:d,type:f,actual:g,expected:m,action:"is less than or equal to",message:k};return A.message=u.message(A),v.push(A),!1}};a.Diff=c,a.Assert=u,r.exports=a},function(r,e,n){r.exports=n(28)},function(r,e,n){var s=n(3);window._XMLHttpRequest=window.XMLHttpRequest,window._ActiveXObject=window.ActiveXObject;try{new window.Event("custom")}catch{window.Event=function(k,A,E,N){var V=document.createEvent("CustomEvent");return V.initCustomEvent(k,A,E,N),V}}var o={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l="readystatechange loadstart progress abort error load timeout loadend".split(" "),a="timeout withCredentials".split(" "),c="readyState responseURL status statusText responseType response responseText responseXML".split(" "),u={200:"OK"};function f(){this.custom={events:{},requestHeaders:{},responseHeaders:{}}}f._settings={timeout:"10-100"},f.setup=function(v){return s.extend(f._settings,v),f._settings},s.extend(f,o),s.extend(f.prototype,o),f.prototype.mock=!0,f.prototype.match=!1,s.extend(f.prototype,{open:function(v,k,A,E,N){var V=this;s.extend(this.custom,{method:v,url:k,async:typeof A=="boolean"?A:!0,username:E,password:N,options:{url:k,type:v}}),this.custom.timeout=function(te){if(typeof te=="number")return te;if(typeof te=="string"&&!~te.indexOf("-"))return parseInt(te,10);if(typeof te=="string"&&~te.indexOf("-")){var ae=te.split("-"),ge=parseInt(ae[0],10),Y=parseInt(ae[1],10);return Math.round(Math.random()*(Y-ge))+ge}}(f._settings.timeout);var q=g(this.custom.options);function W(te){for(var ae=0;ae<c.length;ae++)try{V[c[ae]]=H[c[ae]]}catch{}V.dispatchEvent(new Event(te.type))}if(!q){var H=d();this.custom.xhr=H;for(var $=0;$<l.length;$++)H.addEventListener(l[$],W);E?H.open(v,k,A,E,N):H.open(v,k,A);for(var L=0;L<a.length;L++)try{H[a[L]]=V[a[L]]}catch{}return}this.match=!0,this.custom.template=q,this.readyState=f.OPENED,this.dispatchEvent(new Event("readystatechange"))},setRequestHeader:function(v,k){if(!this.match){this.custom.xhr.setRequestHeader(v,k);return}var A=this.custom.requestHeaders;A[v]?A[v]+=","+k:A[v]=k},timeout:0,withCredentials:!1,upload:{},send:function(k){var A=this;if(this.custom.options.body=k,!this.match){this.custom.xhr.send(k);return}this.setRequestHeader("X-Requested-With","MockXMLHttpRequest"),this.dispatchEvent(new Event("loadstart")),this.custom.async?setTimeout(E,this.custom.timeout):E();function E(){A.readyState=f.HEADERS_RECEIVED,A.dispatchEvent(new Event("readystatechange")),A.readyState=f.LOADING,A.dispatchEvent(new Event("readystatechange")),A.status=200,A.statusText=u[200],A.response=A.responseText=JSON.stringify(m(A.custom.template,A.custom.options),null,4),A.readyState=f.DONE,A.dispatchEvent(new Event("readystatechange")),A.dispatchEvent(new Event("load")),A.dispatchEvent(new Event("loadend"))}},abort:function(){if(!this.match){this.custom.xhr.abort();return}this.readyState=f.UNSENT,this.dispatchEvent(new Event("abort",!1,!1,this)),this.dispatchEvent(new Event("error",!1,!1,this))}}),s.extend(f.prototype,{responseURL:"",status:f.UNSENT,statusText:"",getResponseHeader:function(v){return this.match?this.custom.responseHeaders[v.toLowerCase()]:this.custom.xhr.getResponseHeader(v)},getAllResponseHeaders:function(){if(!this.match)return this.custom.xhr.getAllResponseHeaders();var v=this.custom.responseHeaders,k="";for(var A in v)v.hasOwnProperty(A)&&(k+=A+": "+v[A]+`\r
`);return k},overrideMimeType:function(){},responseType:"",response:null,responseText:"",responseXML:null}),s.extend(f.prototype,{addEventListener:function(k,A){var E=this.custom.events;E[k]||(E[k]=[]),E[k].push(A)},removeEventListener:function(k,A){for(var E=this.custom.events[k]||[],N=0;N<E.length;N++)E[N]===A&&E.splice(N--,1)},dispatchEvent:function(k){for(var A=this.custom.events[k.type]||[],E=0;E<A.length;E++)A[E].call(this,k);var N="on"+k.type;this[N]&&this[N](k)}});function d(){var v=function(){var E=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,N=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,V=location.href,q=N.exec(V.toLowerCase())||[];return E.test(q[1])}();return window.ActiveXObject?!v&&k()||A():k();function k(){try{return new window._XMLHttpRequest}catch{}}function A(){try{return new window._ActiveXObject("Microsoft.XMLHTTP")}catch{}}}function g(v){for(var k in f.Mock._mocked){var A=f.Mock._mocked[k];if((!A.rurl||E(A.rurl,v.url))&&(!A.rtype||E(A.rtype,v.type.toLowerCase())))return A}function E(N,V){if(s.type(N)==="string")return N===V;if(s.type(N)==="regexp")return N.test(V)}}function m(v,k){return s.isFunction(v.template)?v.template(k):f.Mock.mock(v.template)}r.exports=f}])})})(mock);var mockExports=mock.exports;const Mock=getDefaultExportFromCjs(mockExports),_hoisted_1$3={class:"preview-body"},_hoisted_2$2={key:0,class:"preview-error"},_sfc_main$3=defineComponent({__name:"MockPreviewModal",props:{visible:{type:Boolean},template:{}},emits:["close"],setup(r,{emit:e}){const n=r,s=e,o=ref(""),l=ref("");function a(){l.value="";try{const c=JSON.parse(n.template.trim()||"{}"),u=Mock.mock(c);o.value=JSON.stringify(u,null,2)}catch(c){l.value=c.message||"Invalid JSON",o.value=""}}return watch(()=>n.visible,c=>{c&&a()}),(c,u)=>(openBlock(),createBlock(unref(SubModal),{visible:r.visible,title:"Mock.js Preview",width:"800px",height:"75vh",onClose:u[0]||(u[0]=f=>s("close"))},{actions:withCtx(()=>[createBaseVNode("button",{class:"refresh-btn",onClick:a,title:"Refresh"},[...u[1]||(u[1]=[createBaseVNode("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[createBaseVNode("path",{d:"M23 4v6h-6M1 20v-6h6"}),createBaseVNode("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})],-1)])])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$3,[l.value?(openBlock(),createElementBlock("div",_hoisted_2$2,toDisplayString(l.value),1)):(openBlock(),createBlock(unref(CodeEditor),{key:1,"model-value":o.value,height:"100%",disabled:""},null,8,["model-value"]))])]),_:1},8,["visible"]))}}),MockPreviewModal=_export_sfc(_sfc_main$3,[["__scopeId","data-v-52ea6c78"]]),_hoisted_1$2={class:"editor-body"},_sfc_main$2=defineComponent({__name:"EditorExpandModal",props:mergeModels({visible:{type:Boolean},title:{},disabled:{type:Boolean},placeholder:{}},{modelValue:{default:""},modelModifiers:{}}),emits:mergeModels(["close"],["update:modelValue"]),setup(r,{emit:e}){const n=useModel(r,"modelValue"),s=e;return(o,l)=>(openBlock(),createBlock(unref(SubModal),{visible:r.visible,title:r.title,width:"900px",height:"80vh",onClose:l[1]||(l[1]=a=>s("close"))},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createVNode(unref(CodeEditor),{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=a=>n.value=a),height:"100%",disabled:r.disabled,placeholder:r.placeholder},null,8,["modelValue","disabled","placeholder"])])]),_:1},8,["visible","title"]))}}),EditorExpandModal=_export_sfc(_sfc_main$2,[["__scopeId","data-v-cc6143f5"]]),_hoisted_1$1={class:"modal"},_hoisted_2$1={class:"modal-header"},_hoisted_3={class:"modal-title"},_hoisted_4={class:"modal-body"},_hoisted_5={class:"form-group"},_hoisted_6=["disabled"],_hoisted_7={key:0,class:"form-error"},_hoisted_8={class:"form-row"},_hoisted_9={class:"form-group"},_hoisted_10={class:"form-group"},_hoisted_11=["disabled"],_hoisted_12={key:0,class:"form-error"},_hoisted_13={class:"form-group"},_hoisted_14=["disabled"],_hoisted_15={key:0,class:"form-error"},_hoisted_16={class:"form-group"},_hoisted_17={class:"tab-bar"},_hoisted_18={class:"tab-left"},_hoisted_19={class:"tab-right"},_hoisted_20={key:0,class:"form-error"},_hoisted_21={key:1,class:"form-error"},_hoisted_22={class:"modal-footer"},_sfc_main$1=defineComponent({__name:"RuleModal",setup(r){const{visible:e,isEdit:n,viewOnly:s,form:o,close:l}=useRuleModal(),a=ref(!1),c=ref("body"),u=ref(!1),f=ref(!1),d=ref();function g(H){c.value=H,a.value=!a.value}function m(H){var $;($=d.value)==null||$.insertAtCursor(H)}function v(H){H.key==="Escape"&&(u.value?u.value=!1:f.value?f.value=!1:a.value?a.value=!1:e.value&&l())}watch(e,H=>{H?document.addEventListener("keydown",v):document.removeEventListener("keydown",v)});const k=inject("ws"),A=ref("body"),E=reactive({url:"",status:"",delay:"",response:"",headers:""});function N(){E.url="",E.status="",E.delay="",E.response="",E.headers=""}watch(e,H=>{H&&(N(),A.value="body",u.value=!1,f.value=!1)});function V(){N();let H=!0;o.url.trim()||(E.url="URL Pattern is required",H=!1),(!o.status||o.status<100||o.status>599)&&(E.status="Status must be between 100-599",H=!1),o.delay<0&&(E.delay="Delay cannot be negative",H=!1);try{o.response.trim()&&JSON.parse(o.response.trim())}catch{E.response="Response Body must be valid JSON",H=!1,A.value="body"}try{o.headers.trim()&&JSON.parse(o.headers.trim())}catch{E.headers="Headers must be valid JSON",H=!1,E.response||(A.value="headers")}return H}function q(){if(!V())return;const H={id:o.id||Date.now().toString(36)+Math.random().toString(36).substring(2),url:o.url,method:o.method,status:o.status,delay:o.delay,response:JSON.parse(o.response.trim()||"{}"),headers:JSON.parse(o.headers.trim()||"{}"),enabled:o.enabled,createdAt:o.createdAt||Date.now()};n.value?k.updateRule(H):k.addRule(H),l()}const W=computed(()=>s.value?"View Mock Rule":n.value?"Edit Mock Rule":"Add Mock Rule");return(H,$)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["modal-overlay",{active:unref(e)}])},[createBaseVNode("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3,toDisplayString(W.value),1),createBaseVNode("button",{class:"modal-close",onClick:$[0]||($[0]=(...L)=>unref(l)&&unref(l)(...L))},[...$[19]||($[19]=[createBaseVNode("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[createBaseVNode("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])])]),createBaseVNode("div",_hoisted_4,[createBaseVNode("div",_hoisted_5,[$[20]||($[20]=createBaseVNode("label",{class:"form-label"},"URL Pattern",-1)),withDirectives(createBaseVNode("input",{type:"text",class:normalizeClass(["form-input",{"has-error":E.url}]),"onUpdate:modelValue":$[1]||($[1]=L=>unref(o).url=L),placeholder:"/api/users",disabled:unref(s)},null,10,_hoisted_6),[[vModelText,unref(o).url]]),E.url?(openBlock(),createElementBlock("span",_hoisted_7,toDisplayString(E.url),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_8,[createBaseVNode("div",_hoisted_9,[$[21]||($[21]=createBaseVNode("label",{class:"form-label"},"Method",-1)),createVNode(unref(MethodSelect),{modelValue:unref(o).method,"onUpdate:modelValue":$[2]||($[2]=L=>unref(o).method=L),disabled:unref(s)},null,8,["modelValue","disabled"])]),createBaseVNode("div",_hoisted_10,[$[22]||($[22]=createBaseVNode("label",{class:"form-label"},"Status",-1)),withDirectives(createBaseVNode("input",{type:"number",class:normalizeClass(["form-input",{"has-error":E.status}]),"onUpdate:modelValue":$[3]||($[3]=L=>unref(o).status=L),disabled:unref(s)},null,10,_hoisted_11),[[vModelText,unref(o).status,void 0,{number:!0}]]),E.status?(openBlock(),createElementBlock("span",_hoisted_12,toDisplayString(E.status),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_13,[$[23]||($[23]=createBaseVNode("label",{class:"form-label"},"Delay (ms)",-1)),withDirectives(createBaseVNode("input",{type:"number",class:normalizeClass(["form-input",{"has-error":E.delay}]),"onUpdate:modelValue":$[4]||($[4]=L=>unref(o).delay=L),disabled:unref(s)},null,10,_hoisted_14),[[vModelText,unref(o).delay,void 0,{number:!0}]]),E.delay?(openBlock(),createElementBlock("span",_hoisted_15,toDisplayString(E.delay),1)):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_16,[createBaseVNode("div",_hoisted_17,[createBaseVNode("div",_hoisted_18,[createBaseVNode("button",{class:normalizeClass(["tab-btn",{active:A.value==="body","tab-error":E.response}]),onClick:$[5]||($[5]=L=>A.value="body")},"Response Body",2),createBaseVNode("button",{class:normalizeClass(["tab-btn",{active:A.value==="headers","tab-error":E.headers}]),onClick:$[6]||($[6]=L=>A.value="headers")},"Headers",2)]),createBaseVNode("div",_hoisted_19,[A.value==="body"&&!unref(s)?(openBlock(),createElementBlock("button",{key:0,class:normalizeClass(["action-btn",{active:f.value}]),onClick:$[7]||($[7]=L=>f.value=!f.value),title:"Mock.js Reference"},[...$[24]||($[24]=[createBaseVNode("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[createBaseVNode("circle",{cx:"12",cy:"12",r:"10"}),createBaseVNode("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),createBaseVNode("path",{d:"M12 17h.01"})],-1)])],2)):createCommentVNode("",!0),A.value==="body"?(openBlock(),createElementBlock("button",{key:1,class:"action-btn",onClick:$[8]||($[8]=L=>u.value=!0),title:"Preview"},[...$[25]||($[25]=[createBaseVNode("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[createBaseVNode("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),createBaseVNode("circle",{cx:"12",cy:"12",r:"3"})],-1)])])):createCommentVNode("",!0),createBaseVNode("button",{class:"action-btn",onClick:$[9]||($[9]=L=>g(A.value)),title:"Fullscreen"},[...$[26]||($[26]=[createBaseVNode("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[createBaseVNode("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})],-1)])])])]),withDirectives(createBaseVNode("div",{class:normalizeClass({"has-error":E.response})},[createVNode(unref(CodeEditor),{ref_key:"responseEditorRef",ref:d,modelValue:unref(o).response,"onUpdate:modelValue":$[10]||($[10]=L=>unref(o).response=L),disabled:unref(s),placeholder:'{"code": 200, "data": {}}'},null,8,["modelValue","disabled"])],2),[[vShow,A.value==="body"]]),E.response&&A.value==="body"?(openBlock(),createElementBlock("span",_hoisted_20,toDisplayString(E.response),1)):createCommentVNode("",!0),withDirectives(createBaseVNode("div",{class:normalizeClass({"has-error":E.headers})},[createVNode(unref(CodeEditor),{modelValue:unref(o).headers,"onUpdate:modelValue":$[11]||($[11]=L=>unref(o).headers=L),disabled:unref(s),placeholder:'{"Content-Type": "application/json"}'},null,8,["modelValue","disabled"])],2),[[vShow,A.value==="headers"]]),E.headers&&A.value==="headers"?(openBlock(),createElementBlock("span",_hoisted_21,toDisplayString(E.headers),1)):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_22,[createBaseVNode("button",{class:"btn btn-ghost",onClick:$[12]||($[12]=(...L)=>unref(l)&&unref(l)(...L))},toDisplayString(unref(s)?"Close":"Cancel"),1),unref(s)?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:0,class:"btn btn-primary",onClick:q},"Save Rule"))])]),createVNode(MockPreviewModal,{visible:u.value,template:unref(o).response,onClose:$[13]||($[13]=L=>u.value=!1)},null,8,["visible","template"]),createVNode(MockReferenceModal,{visible:f.value,onClose:$[14]||($[14]=L=>f.value=!1),onInsert:m},null,8,["visible"]),c.value==="body"?(openBlock(),createBlock(EditorExpandModal,{key:0,modelValue:unref(o).response,"onUpdate:modelValue":$[15]||($[15]=L=>unref(o).response=L),visible:a.value,title:"Response Body",disabled:unref(s),placeholder:'{"code": 200, "data": {}}',onClose:$[16]||($[16]=L=>a.value=!1)},null,8,["modelValue","visible","disabled"])):(openBlock(),createBlock(EditorExpandModal,{key:1,modelValue:unref(o).headers,"onUpdate:modelValue":$[17]||($[17]=L=>unref(o).headers=L),visible:a.value,title:"Headers",disabled:unref(s),placeholder:'{"Content-Type": "application/json"}',onClose:$[18]||($[18]=L=>a.value=!1)},null,8,["modelValue","visible","disabled"]))],2))}}),RuleModal=_export_sfc(_sfc_main$1,[["__scopeId","data-v-cab2a550"]]),_hoisted_1={class:"container"},_hoisted_2={class:"card"},_sfc_main=defineComponent({__name:"App",setup(r){const e=ref("network"),n=useWebSocket();return provide("ws",n),(s,o)=>(openBlock(),createElementBlock("div",_hoisted_1,[createVNode(AppHeader,{activeTab:e.value,"onUpdate:activeTab":o[0]||(o[0]=l=>e.value=l)},null,8,["activeTab"]),createBaseVNode("div",_hoisted_2,[withDirectives(createVNode(NetworkPanel,null,null,512),[[vShow,e.value==="network"]]),withDirectives(createVNode(RulesPanel,null,null,512),[[vShow,e.value==="rules"]])]),createVNode(RuleModal)]))}});createApp(_sfc_main).mount("#app");</script>
  <style rel="stylesheet" crossorigin>.header[data-v-b868c482]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.logo[data-v-b868c482]{display:flex;align-items:center;gap:10px;font-size:18px;font-weight:600;color:var(--primary)}.logo svg[data-v-b868c482]{width:28px;height:28px}.tabs[data-v-b868c482]{display:inline-flex;background:var(--card-bg);border-radius:var(--radius);padding:4px;box-shadow:var(--shadow)}.tab[data-v-b868c482]{padding:8px 20px;cursor:pointer;border:none;background:none;font-size:14px;font-weight:500;color:var(--text-secondary);border-radius:6px;transition:all .2s}.tab[data-v-b868c482]:hover{color:var(--text)}.tab.active[data-v-b868c482]{background:var(--primary);color:#fff}.modal-overlay[data-v-dadc1275]{position:fixed;top:0;right:0;bottom:0;left:0;background:#0f172a99;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-overlay.active[data-v-dadc1275]{display:flex}.modal[data-v-dadc1275]{background:var(--card-bg);border-radius:var(--radius-lg);width:100%;max-height:calc(100vh - 40px);overflow:hidden;box-shadow:var(--shadow-lg);display:flex;flex-direction:column}.modal-header[data-v-dadc1275]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--border)}.modal-title[data-v-dadc1275]{font-size:16px;font-weight:600}.modal-close[data-v-dadc1275]{padding:4px;border:none;background:none;color:var(--text-secondary);cursor:pointer;border-radius:4px;transition:all .2s}.modal-close[data-v-dadc1275]:hover{background:var(--bg);color:var(--text)}.modal-body[data-v-dadc1275]{padding:24px;overflow-y:auto;flex:1}.modal-footer[data-v-dadc1275]{padding:16px 24px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:12px}.sub-modal-overlay[data-v-7f43eec3]{position:fixed;top:0;right:0;bottom:0;left:0;background:#0f172a80;display:flex;align-items:center;justify-content:center;z-index:2000;padding:20px}.sub-modal[data-v-7f43eec3]{background:var(--card-bg);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;flex-direction:column;overflow:hidden;width:90%}.sub-modal-header[data-v-7f43eec3]{display:flex;align-items:center;gap:12px;padding:16px 20px;border-bottom:1px solid var(--border)}.sub-modal-title[data-v-7f43eec3]{font-size:16px;font-weight:600}.sub-modal-tip[data-v-7f43eec3]{font-size:12px;font-weight:400;color:var(--text-muted)}.sub-modal-actions[data-v-7f43eec3]{margin-left:auto;display:flex;align-items:center;gap:8px}.sub-modal-close[data-v-7f43eec3]{padding:4px;border:none;background:none;color:var(--text-secondary);cursor:pointer;border-radius:4px;transition:all .2s}.sub-modal-close[data-v-7f43eec3]:hover{background:var(--bg);color:var(--text)}.sub-modal-body[data-v-7f43eec3]{flex:1;overflow:hidden}.search-box[data-v-003c4be9]{flex:1;min-width:200px;position:relative}.search-box svg[data-v-003c4be9]{position:absolute;left:12px;top:50%;transform:translateY(-50%);width:16px;height:16px;color:var(--text-muted)}.search-input[data-v-003c4be9]{width:100%;padding-left:38px}.method-badge[data-v-5ac0a434]{padding:3px 8px;border-radius:4px;font-size:11px;font-weight:600;text-transform:uppercase}.method-badge.GET[data-v-5ac0a434]{background:#dbeafe;color:#1d4ed8}.method-badge.POST[data-v-5ac0a434]{background:#dcfce7;color:#15803d}.method-badge.PUT[data-v-5ac0a434]{background:#fef3c7;color:#b45309}.method-badge.DELETE[data-v-5ac0a434]{background:#fee2e2;color:#dc2626}.method-badge.PATCH[data-v-5ac0a434]{background:#f3e8ff;color:#7c3aed}.toggle[data-v-581fc0ab]{position:relative;width:40px;height:22px;cursor:pointer}.toggle input[data-v-581fc0ab]{opacity:0;width:0;height:0;position:absolute}.toggle-track[data-v-581fc0ab]{position:absolute;top:0;right:0;bottom:0;left:0;background:#cbd5e1;border-radius:11px;transition:background .2s}.toggle-thumb[data-v-581fc0ab]{position:absolute;width:18px;height:18px;left:2px;top:2px;background:#fff;border-radius:50%;transition:transform .2s;box-shadow:0 1px 3px #0003}.toggle input:checked+.toggle-track[data-v-581fc0ab]{background:var(--primary)}.toggle input:checked~.toggle-thumb[data-v-581fc0ab]{transform:translate(18px)}.method-select[data-v-ad85a28b]{padding:9px 32px 9px 12px;border:1px solid var(--border);border-radius:var(--radius);font-size:14px;outline:none;background:#fff url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E") no-repeat right 10px center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}.method-select[data-v-ad85a28b]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #4f46e51a}.editor-wrapper[data-v-77eb69d2]{position:relative;border:1px solid var(--border);border-radius:var(--radius);overflow:hidden}.editor-wrapper[data-v-77eb69d2]:focus-within{border-color:var(--primary);box-shadow:0 0 0 3px #4f46e51a}.editor-wrapper[data-v-77eb69d2] .cm-editor{font-size:13px}.editor-wrapper[data-v-77eb69d2] .cm-scroller{font-family:SF Mono,Monaco,monospace}.toolbar[data-v-e0abc625]{display:flex;gap:12px;padding:16px;border-bottom:1px solid var(--border);flex-wrap:wrap;align-items:center}.select[data-v-e0abc625]{padding:9px 32px 9px 12px;border:1px solid var(--border);border-radius:var(--radius);font-size:14px;outline:none;background:#fff url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E") no-repeat right 10px center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}.select[data-v-e0abc625]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #4f46e51a}.list[data-v-e0abc625]{padding:8px;max-height:calc(100vh - 200px);overflow-y:auto}.list[data-v-e0abc625]::-webkit-scrollbar{width:6px}.list[data-v-e0abc625]::-webkit-scrollbar-track{background:transparent}.list[data-v-e0abc625]::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}.list[data-v-e0abc625]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}.list-item[data-v-e0abc625]{padding:14px 16px;border-radius:var(--radius);cursor:pointer;transition:background .15s;margin-bottom:4px}.list-item[data-v-e0abc625]:hover{background:var(--bg)}.list-item.expanded[data-v-e0abc625]{background:#f1f5f9}.item-header[data-v-e0abc625]{display:flex;align-items:center;gap:12px}.status-code[data-v-e0abc625]{font-weight:600;font-size:13px;min-width:32px}.status-code.success[data-v-e0abc625]{color:var(--success)}.status-code.error[data-v-e0abc625]{color:var(--danger)}.item-url[data-v-e0abc625]{flex:1;font-family:SF Mono,Monaco,monospace;font-size:13px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item-meta[data-v-e0abc625]{display:flex;align-items:center;gap:16px;margin-top:8px;padding-left:44px;font-size:12px;color:var(--text-muted)}.item-actions[data-v-e0abc625]{display:flex;gap:8px;margin-left:auto}.item-detail[data-v-e0abc625]{display:none;margin-top:12px;padding:12px;background:#fff;border-radius:var(--radius);border:1px solid var(--border)}.list-item.expanded .item-detail[data-v-e0abc625]{display:block}.detail-label[data-v-e0abc625]{font-size:12px;font-weight:500;color:var(--text-secondary);margin-bottom:6px}.detail-section[data-v-e0abc625]{margin-bottom:12px}.detail-section[data-v-e0abc625]:last-child{margin-bottom:0}.toolbar[data-v-32747fd5]{display:flex;gap:12px;padding:16px;border-bottom:1px solid var(--border);flex-wrap:wrap;align-items:center}.list[data-v-32747fd5]{padding:8px;max-height:calc(100vh - 200px);overflow-y:auto}.list[data-v-32747fd5]::-webkit-scrollbar{width:6px}.list[data-v-32747fd5]::-webkit-scrollbar-track{background:transparent}.list[data-v-32747fd5]::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}.list[data-v-32747fd5]::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}.rule-item[data-v-32747fd5]{display:flex;align-items:center;gap:12px;padding:14px 16px;border-radius:var(--radius);margin-bottom:4px;background:var(--bg)}.rule-info[data-v-32747fd5]{flex:1}.rule-url[data-v-32747fd5]{font-family:SF Mono,Monaco,monospace;font-size:13px;font-weight:500}.rule-meta[data-v-32747fd5]{font-size:12px;color:var(--text-muted);margin-top:4px}.mock-ref-body[data-v-871929a6]{max-height:calc(80vh - 60px);overflow-y:auto;padding:16px 20px;display:grid;grid-template-columns:repeat(3,1fr);gap:20px}.mock-category[data-v-871929a6]{min-width:0}.category-title[data-v-871929a6]{font-size:12px;font-weight:600;color:var(--text);margin-bottom:10px;padding-bottom:6px;border-bottom:1px solid var(--border)}.mock-rules-grid[data-v-871929a6]{display:flex;flex-direction:column;gap:2px}.mock-rule-item[data-v-871929a6]{display:flex;flex-direction:column;gap:1px;padding:6px 8px;border-radius:4px;cursor:pointer;transition:background .15s}.mock-rule-item[data-v-871929a6]:hover{background:var(--bg)}.rule-syntax[data-v-871929a6]{font-family:SF Mono,Monaco,monospace;font-size:12px;color:var(--primary);word-break:break-all}.rule-desc[data-v-871929a6]{font-size:11px;color:var(--text-muted)}.preview-body[data-v-52ea6c78]{height:calc(75vh - 60px);margin:16px 20px 20px}.preview-body[data-v-52ea6c78] .editor-wrapper{height:100%;background:#282c34}.preview-error[data-v-52ea6c78]{padding:20px;color:#ef4444;font-size:14px}.refresh-btn[data-v-52ea6c78]{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border:1px solid var(--border);background:#fff;color:var(--text-secondary);cursor:pointer;border-radius:4px;transition:all .2s}.refresh-btn[data-v-52ea6c78]:hover{border-color:var(--primary);color:var(--primary)}.editor-body[data-v-cc6143f5]{height:calc(80vh - 60px);margin:16px 20px 20px}.editor-body[data-v-cc6143f5] .editor-wrapper{height:100%}.modal-overlay[data-v-cab2a550]{position:fixed;top:0;right:0;bottom:0;left:0;background:#0f172a99;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-overlay.active[data-v-cab2a550]{display:flex;gap:16px}.modal[data-v-cab2a550]{background:var(--card-bg);border-radius:var(--radius-lg);width:100%;max-width:640px;max-height:calc(100vh - 40px);overflow:hidden;box-shadow:var(--shadow-lg);display:flex;flex-direction:column}.modal-header[data-v-cab2a550]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--border)}.modal-title[data-v-cab2a550]{font-size:16px;font-weight:600}.modal-close[data-v-cab2a550]{padding:4px;border:none;background:none;color:var(--text-secondary);cursor:pointer;border-radius:4px;transition:all .2s}.modal-close[data-v-cab2a550]:hover{background:var(--bg);color:var(--text)}.modal-body[data-v-cab2a550]{padding:24px;overflow-y:auto;flex:1}.modal-footer[data-v-cab2a550]{padding:16px 24px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:12px}.form-group[data-v-cab2a550]{margin-bottom:20px}.form-group[data-v-cab2a550]:last-child{margin-bottom:0}.form-label[data-v-cab2a550]{display:block;font-size:13px;font-weight:500;margin-bottom:6px}.form-input[data-v-cab2a550]{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:var(--radius);font-size:14px;outline:none;background:#fff}.form-input[data-v-cab2a550]:disabled{background:var(--bg);cursor:not-allowed}.form-input[data-v-cab2a550]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #4f46e51a}.form-input.has-error[data-v-cab2a550]{border-color:#ef4444}.form-error[data-v-cab2a550]{display:block;font-size:12px;color:#ef4444;margin-top:4px}.form-row[data-v-cab2a550]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.tab-bar[data-v-cab2a550]{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}.tab-left[data-v-cab2a550]{display:flex;gap:4px}.tab-right[data-v-cab2a550]{display:flex;align-items:center;gap:6px}.tab-btn[data-v-cab2a550]{padding:6px 14px;border:none;background:none;font-size:13px;font-weight:500;color:var(--text-secondary);cursor:pointer;border-radius:6px;transition:all .2s}.tab-btn[data-v-cab2a550]:hover{background:var(--bg)}.tab-btn.active[data-v-cab2a550]{background:var(--primary);color:#fff}.tab-btn.tab-error[data-v-cab2a550]{color:#ef4444}.tab-btn.tab-error.active[data-v-cab2a550]{background:#ef4444;color:#fff}.action-btn[data-v-cab2a550]{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border:1px solid var(--border);background:#fff;color:var(--text-secondary);cursor:pointer;border-radius:4px;transition:all .2s}.action-btn[data-v-cab2a550]:hover{border-color:var(--primary);color:var(--primary)}.action-btn.active[data-v-cab2a550]{background:var(--primary);border-color:var(--primary);color:#fff}.has-error[data-v-cab2a550] .editor-wrapper{border-color:#ef4444}:root{--primary: #4f46e5;--primary-hover: #4338ca;--success: #10b981;--danger: #ef4444;--warning: #f59e0b;--bg: #f8fafc;--card-bg: #ffffff;--border: #e2e8f0;--text: #1e293b;--text-secondary: #64748b;--text-muted: #94a3b8;--shadow: 0 1px 3px rgba(0,0,0,.1), 0 1px 2px rgba(0,0,0,.06);--shadow-lg: 0 10px 15px -3px rgba(0,0,0,.1), 0 4px 6px -2px rgba(0,0,0,.05);--radius: 8px;--radius-lg: 12px}*{margin:0;padding:0;box-sizing:border-box}html,body,#app{min-height:100%}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,sans-serif;background:var(--bg);color:var(--text);font-size:14px;line-height:1.5}.container{max-width:960px;width:100%;margin:0 auto;padding:20px 24px}.btn{display:inline-flex;align-items:center;gap:6px;padding:9px 16px;border:none;border-radius:var(--radius);font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;white-space:nowrap}.btn svg{width:16px;height:16px}.btn-primary{background:var(--primary);color:#fff}.btn-primary:hover{background:var(--primary-hover)}.btn-ghost{background:transparent;color:var(--text-secondary)}.btn-ghost:hover{background:var(--bg);color:var(--text)}.btn-danger{color:var(--danger)}.btn-sm{padding:6px 12px;font-size:13px}.card{background:var(--card-bg);border-radius:var(--radius-lg);box-shadow:var(--shadow);overflow:hidden}.search-input,.select{padding:9px 12px;border:1px solid var(--border);border-radius:var(--radius);font-size:14px;outline:none;transition:border-color .2s,box-shadow .2s}.search-input:focus,.select:focus{border-color:var(--primary);box-shadow:0 0 0 3px #4f46e51a}.method-badge{padding:3px 8px;border-radius:4px;font-size:11px;font-weight:600;text-transform:uppercase}.method-badge.GET{background:#dbeafe;color:#1d4ed8}.method-badge.POST{background:#fef3c7;color:#b45309}.method-badge.PUT{background:#d1fae5;color:#047857}.method-badge.DELETE{background:#fee2e2;color:#b91c1c}.method-badge.PATCH{background:#e9d5ff;color:#7c3aed}.tag{padding:3px 8px;border-radius:4px;font-size:11px;font-weight:500}.tag-mock{background:#d1fae5;color:#047857}.tag-real{background:#f1f5f9;color:var(--text-secondary)}.empty-state{text-align:center;padding:60px 20px;color:var(--text-muted)}.empty-state svg{width:48px;height:48px;margin-bottom:12px;opacity:.5}.json-key{color:#7dd3fc}.json-string{color:#86efac}.json-number{color:#fcd34d}.json-boolean{color:#f472b6}.json-null{color:#a78bfa}</style>
</head>
<body>
  <div id="app"></div>
</body>
</html>
